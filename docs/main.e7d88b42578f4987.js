"use strict";(self.webpackChunkJulklappslottning=self.webpackChunkJulklappslottning||[]).push([[179],{2011:(gt,Ae,V)=>{V.d(Ae,{Dh:()=>fe,GT:()=>he,cc:()=>Pe,hO:()=>Ge,on:()=>$,pX:()=>se,xv:()=>ge});var d=V(4650),te=V(127),L=V(5813);gt=V.hmd(gt);const ae=["ngOnDestroy"],se=(me,ot,dt,Re={})=>new Proxy(me,{get:(we,Ie)=>dt.runOutsideAngular(()=>{var ze;if(me[Ie])return!(null===(ze=Re?.spy)||void 0===ze)&&ze.get&&Re.spy.get(Ie,me[Ie]),me[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const Ke=ot.toPromise().then(G=>{const _e=G&&G[Ie];return"function"==typeof _e?_e.bind(G):_e&&_e.then?_e.then(Y=>dt.run(()=>Y)):dt.run(()=>_e)});return new Proxy(()=>{},{get:(G,_e)=>Ke[_e],apply:(G,_e,Y)=>Ke.then(ne=>{var oe;const ie=ne&&ne(...Y);return!(null===(oe=Re?.spy)||void 0===oe)&&oe.apply&&Re.spy.apply(Ie,Y,ie),ie})})})}),he=(me,ot)=>{ot.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(Re=>{Object.defineProperty(me.prototype,Re,Object.getOwnPropertyDescriptor(dt.prototype||dt,Re))})})};class ue{constructor(ot){return ot}}const fe=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function $(me,ot,dt){const we="object"==typeof dt&&dt||{};we.name=we.name||"string"==typeof dt&&dt||"[DEFAULT]";const ze=te.Z.apps.filter(Ke=>Ke&&Ke.name===we.name)[0]||ot.runOutsideAngular(()=>te.Z.initializeApp(me,we));try{JSON.stringify(me)!==JSON.stringify(ze.options)&&W("error",`${ze.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(ze)}const W=(me,...ot)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...ot)},J={provide:ue,useFactory:$,deps:[fe,d.R0b,[new d.FiY,ge]]};let Ge=(()=>{class me{constructor(dt){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",d.q4F.full,dt.toString())}static initializeApp(dt,Re){return{ngModule:me,providers:[{provide:fe,useValue:dt},{provide:ge,useValue:Re}]}}}return me.\u0275fac=function(dt){return new(dt||me)(d.LFG(d.Lbi))},me.\u0275mod=d.oAB({type:me}),me.\u0275inj=d.cJS({providers:[J]}),me})();function Pe(me,ot,dt,Re,we){const[,Ie,ze]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===me)||[];if(Ie)return function Ce(me,ot){try{return me.toString()===ot.toString()}catch{return me===ot}}(we,ze)||(ye("error",`${ot} was already initialized on the ${dt} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:we,was:ze})),Ie;{const Ke=Re();return globalThis.\u0275AngularfireInstanceCache.push([me,Ke,we]),Ke}}const ut=!!gt.hot,ye=(me,...ot)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,Ae,V)=>{V.d(Ae,{q4:()=>vi,iC:()=>_o,fc:()=>dh,HU:()=>Yn,vb:()=>ea,JM:()=>Tl});var d=V(4650),te=V(5867),L=V(5861),ae=V(9681),se=V(2090),he=V(4859),ue=V(1877),fe=V(8766);const ge="@firebase/installations",$="0.5.16",J=`w:${$}`,Ge="FIS_v2",ot=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function Re({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function we(I){return{token:I.token,requestStatus:2,expiresIn:ne(I.expiresIn),creationTime:Date.now()}}function Ie(I,S){return ze.apply(this,arguments)}function ze(){return(ze=(0,L.Z)(function*(I,S){const U=(yield S.json()).error;return ot.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ke({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function G(I,{refreshToken:S}){const x=Ke(I);return x.append("Authorization",function oe(I){return`${Ge} ${I}`}(S)),x}function _e(I){return Y.apply(this,arguments)}function Y(){return(Y=(0,L.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function ne(I){return Number(I.replace("s","000"))}function ie(I,S){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:x}){const U=Re(I),X=Ke(I),le=S.getImmediate({optional:!0});if(le){const St=yield le.getHeartbeatsHeader();St&&X.append("x-firebase-client",St)}const qe={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:Ge,appId:I.appId,sdkVersion:J})},_t=yield _e(()=>fetch(U,qe));if(_t.ok){const St=yield _t.json();return{fid:St.fid||x,registrationStatus:2,refreshToken:St.refreshToken,authToken:we(St.authToken)}}throw yield Ie("Create Installation",_t)})).apply(this,arguments)}function Ve(I){return new Promise(S=>{setTimeout(S,I)})}const cn=/^[cdef][\w-]{21}$/;function tt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function _n(I){return function vt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return cn.test(x)?x:""}catch{return""}}function xn(I){return`${I.appName}!${I.appId}`}const on=new Map;function dn(I,S){const x=xn(I);yn(x,S),function Ds(I,S){const x=function Jr(){return!Hi&&"BroadcastChannel"in self&&(Hi=new BroadcastChannel("[Firebase] FID Change"),Hi.onmessage=I=>{yn(I.data.key,I.data.fid)}),Hi}();x&&x.postMessage({key:I,fid:S}),function Xr(){0===on.size&&Hi&&(Hi.close(),Hi=null)}()}(x,S)}function yn(I,S){const x=on.get(I);if(x)for(const U of x)U(S)}let Hi=null;const hi="firebase-installations-store";let Ii=null;function ba(){return Ii||(Ii=(0,fe.X3)("firebase-installations-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(hi)}})),Ii}function rt(I,S){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,L.Z)(function*(I,S){const x=xn(I),X=(yield ba()).transaction(hi,"readwrite"),le=X.objectStore(hi),Se=yield le.get(x);return yield le.put(S,x),yield X.done,(!Se||Se.fid!==S.fid)&&dn(I,S.fid),S})).apply(this,arguments)}function to(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,L.Z)(function*(I){const S=xn(I),U=(yield ba()).transaction(hi,"readwrite");yield U.objectStore(hi).delete(S),yield U.done})).apply(this,arguments)}function Si(I,S){return as.apply(this,arguments)}function as(){return(as=(0,L.Z)(function*(I,S){const x=xn(I),X=(yield ba()).transaction(hi,"readwrite"),le=X.objectStore(hi),Se=yield le.get(x),qe=S(Se);return void 0===qe?yield le.delete(x):yield le.put(qe,x),yield X.done,qe&&(!Se||Se.fid!==qe.fid)&&dn(I,qe.fid),qe})).apply(this,arguments)}function Wn(I){return lr.apply(this,arguments)}function lr(){return(lr=(0,L.Z)(function*(I){let S;const x=yield Si(I.appConfig,U=>{const X=An(U),le=Dt(I,X);return S=le.registrationPromise,le.installationEntry});return""===x.fid?{installationEntry:yield S}:{installationEntry:x,registrationPromise:S}})).apply(this,arguments)}function An(I){return xt(I||{fid:tt(),registrationStatus:0})}function Dt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ot.create("app-offline"))};const x={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function mt(I,S){return gn.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Sr(I)}:{installationEntry:S}}function gn(){return(gn=(0,L.Z)(function*(I,S){try{const x=yield ie(I,S);return rt(I.appConfig,x)}catch(x){throw dt(x)&&409===x.customData.serverCode?yield to(I.appConfig):yield rt(I.appConfig,{fid:S.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Sr(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,L.Z)(function*(I){let S=yield fi(I.appConfig);for(;1===S.registrationStatus;)yield Ve(100),S=yield fi(I.appConfig);if(0===S.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Wn(I);return U||x}return S})).apply(this,arguments)}function fi(I){return Si(I,S=>{if(!S)throw ot.create("installation-not-found");return xt(S)})}function xt(I){return function Es(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function hn(I,S){return $i.apply(this,arguments)}function $i(){return($i=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},x){const U=fn(I,x),X=G(I,x),le=S.getImmediate({optional:!0});if(le){const St=yield le.getHeartbeatsHeader();St&&X.append("x-firebase-client",St)}const qe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:I.appId}})},_t=yield _e(()=>fetch(U,qe));if(_t.ok)return we(yield _t.json());throw yield Ie("Generate Auth Token",_t)})).apply(this,arguments)}function fn(I,{fid:S}){return`${Re(I)}/${S}/authTokens:generate`}function gr(I){return ei.apply(this,arguments)}function ei(){return(ei=(0,L.Z)(function*(I,S=!1){let x;const U=yield Si(I.appConfig,le=>{if(!Ut(le))throw ot.create("not-registered");const Se=le.authToken;if(!S&&z(Se))return le;if(1===Se.requestStatus)return x=lt(I,S),le;{if(!navigator.onLine)throw ot.create("app-offline");const qe=Q(le);return x=Nt(I,qe),qe}});return x?yield x:U.authToken})).apply(this,arguments)}function lt(I,S){return Me.apply(this,arguments)}function Me(){return(Me=(0,L.Z)(function*(I,S){let x=yield at(I.appConfig);for(;1===x.authToken.requestStatus;)yield Ve(100),x=yield at(I.appConfig);const U=x.authToken;return 0===U.requestStatus?gr(I,S):U})).apply(this,arguments)}function at(I){return Si(I,S=>{if(!Ut(S))throw ot.create("not-registered");return function Ee(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Nt(I,S){return It.apply(this,arguments)}function It(){return(It=(0,L.Z)(function*(I,S){try{const x=yield hn(I,S),U=Object.assign(Object.assign({},S),{authToken:x});return yield rt(I.appConfig,U),x}catch(x){if(!dt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield rt(I.appConfig,U)}else yield to(I.appConfig);throw x}})).apply(this,arguments)}function Ut(I){return void 0!==I&&2===I.registrationStatus}function z(I){return 2===I.requestStatus&&!function j(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function Q(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function Qe(){return(Qe=(0,L.Z)(function*(I){const S=I,{installationEntry:x,registrationPromise:U}=yield Wn(S);return U?U.catch(console.error):gr(S).catch(console.error),x.fid})).apply(this,arguments)}function an(){return(an=(0,L.Z)(function*(I,S=!1){const x=I;return yield Sn(x),(yield gr(x,S)).token})).apply(this,arguments)}function Sn(I){return en.apply(this,arguments)}function en(){return(en=(0,L.Z)(function*(I){const{registrationPromise:S}=yield Wn(I);S&&(yield S)})).apply(this,arguments)}function no(I){return ot.create("missing-app-config-values",{valueName:I})}const wa="installations",Ln=I=>{const S=I.getProvider("app").getImmediate(),x=function Rn(I){if(!I||!I.options)throw no("App Configuration");if(!I.name)throw no("App Name");const S=["projectId","apiKey","appId"];for(const x of S)if(!I.options[x])throw no(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Bo=I=>{const S=I.getProvider("app").getImmediate(),x=(0,ae._getProvider)(S,wa).getImmediate();return{getId:()=>function ee(I){return Qe.apply(this,arguments)}(x),getToken:X=>function yt(I){return an.apply(this,arguments)}(x,X)}};(function Kl(){(0,ae._registerComponent)(new he.wA(wa,Ln,"PUBLIC")),(0,ae._registerComponent)(new he.wA("installations-internal",Bo,"PRIVATE"))})(),(0,ae.registerVersion)(ge,$),(0,ae.registerVersion)(ge,$,"esm2017");const ls="@firebase/remote-config",cr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vf{constructor(S,x,U,X){this.client=S,this.storage=x,this.storageCache=U,this.logger=X}isCachedDataFresh(S,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,X=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var x=this;return(0,L.Z)(function*(){const[U,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(S.cacheMaxAgeMillis,U))return X;S.eTag=X&&X.eTag;const le=yield x.client.fetch(S),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Se),le})()}}function oo(I=navigator){return I.languages&&I.languages[0]||I.language}class yc{constructor(S,x,U,X,le,Se){this.firebaseInstallations=S,this.sdkVersion=x,this.namespace=U,this.projectId=X,this.apiKey=le,this.appId=Se}fetch(S){var x=this;return(0,L.Z)(function*(){var U,X,le;const[Se,qe]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Et={sdk_version:x.sdkVersion,app_instance_id:Se,app_instance_id_token:qe,app_id:x.appId,language_code:oo()},Bt={method:"POST",headers:kt,body:JSON.stringify(Et)},Jt=fetch(St,Bt),En=new Promise((kn,fs)=>{S.signal.addEventListener(()=>{const hh=new Error("The operation was aborted.");hh.name="AbortError",fs(hh)})});let Bn;try{yield Promise.race([Jt,En]),Bn=yield Jt}catch(kn){let fs="fetch-client-network";throw"AbortError"===(null===(U=kn)||void 0===U?void 0:U.name)&&(fs="fetch-timeout"),cr.create(fs,{originalErrorMessage:null===(X=kn)||void 0===X?void 0:X.message})}let bi=Bn.status;const hs=Bn.headers.get("ETag")||void 0;let yo,mn;if(200===Bn.status){let kn;try{kn=yield Bn.json()}catch(fs){throw cr.create("fetch-client-parse",{originalErrorMessage:null===(le=fs)||void 0===le?void 0:le.message})}yo=kn.entries,mn=kn.state}if("INSTANCE_STATE_UNSPECIFIED"===mn?bi=500:"NO_CHANGE"===mn?bi=304:("NO_TEMPLATE"===mn||"EMPTY_CONFIG"===mn)&&(yo={}),304!==bi&&200!==bi)throw cr.create("fetch-status",{httpStatus:bi});return{status:bi,eTag:hs,config:yo}})()}}class hm{constructor(S,x){this.client=S,this.storage=x}fetch(S){var x=this;return(0,L.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:x,backoffCount:U}){var X=this;return(0,L.Z)(function*(){yield function _r(I,S){return new Promise((x,U)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(x,X);I.addEventListener(()=>{clearTimeout(le),U(cr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,x);try{const le=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),le}catch(le){if(!function Wd(I){if(!(I instanceof se.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Se={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Se),X.attemptFetch(S,Se)}})()}}class zd{constructor(S,x,U,X,le){this.app=S,this._client=x,this._storageCache=U,this._storage=X,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vc(I,S){var x;const U=I.target.error||void 0;return cr.create(S,{originalErrorMessage:U&&(null===(x=U)||void 0===x?void 0:x.message)})}const ao="app_namespace_store";class mm{constructor(S,x,U,X=function gm(){return new Promise((I,S)=>{var x;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=X=>{S(vc(X,"storage-open"))},U.onsuccess=X=>{I(X.target.result)},U.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ao,{keyPath:"compositeKey"})}}catch(U){S(cr.create("storage-open",{originalErrorMessage:null===(x=U)||void 0===x?void 0:x.message}))}})}()){this.appId=S,this.appName=x,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var x=this;return(0,L.Z)(function*(){const U=yield x.openDbPromise;return new Promise((X,le)=>{var Se;const _t=U.transaction([ao],"readonly").objectStore(ao),St=x.createCompositeKey(S);try{const kt=_t.get(St);kt.onerror=Et=>{le(vc(Et,"storage-get"))},kt.onsuccess=Et=>{const Bt=Et.target.result;X(Bt?Bt.value:void 0)}}catch(kt){le(cr.create("storage-get",{originalErrorMessage:null===(Se=kt)||void 0===Se?void 0:Se.message}))}})})()}set(S,x){var U=this;return(0,L.Z)(function*(){const X=yield U.openDbPromise;return new Promise((le,Se)=>{var qe;const St=X.transaction([ao],"readwrite").objectStore(ao),kt=U.createCompositeKey(S);try{const Et=St.put({compositeKey:kt,value:x});Et.onerror=Bt=>{Se(vc(Bt,"storage-set"))},Et.onsuccess=()=>{le()}}catch(Et){Se(cr.create("storage-set",{originalErrorMessage:null===(qe=Et)||void 0===qe?void 0:qe.message}))}})})()}delete(S){var x=this;return(0,L.Z)(function*(){const U=yield x.openDbPromise;return new Promise((X,le)=>{var Se;const _t=U.transaction([ao],"readwrite").objectStore(ao),St=x.createCompositeKey(S);try{const kt=_t.delete(St);kt.onerror=Et=>{le(vc(Et,"storage-delete"))},kt.onsuccess=()=>{X()}}catch(kt){le(cr.create("storage-delete",{originalErrorMessage:null===(Se=kt)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Kd{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const x=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),le=yield x;le&&(S.lastFetchStatus=le);const Se=yield U;Se&&(S.lastSuccessfulFetchTimestampMillis=Se);const qe=yield X;qe&&(S.activeConfig=qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Ql(){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,L.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function lo(){(0,ae._registerComponent)(new he.wA("remote-config",function I(S,{instanceIdentifier:x}){const U=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw cr.create("registration-window");if(!(0,se.hl)())throw cr.create("indexed-db-unavailable");const{projectId:le,apiKey:Se,appId:qe}=U.options;if(!le)throw cr.create("registration-project-id");if(!Se)throw cr.create("registration-api-key");if(!qe)throw cr.create("registration-app-id");const _t=new mm(qe,U.name,x=x||"firebase"),St=new Kd(_t),kt=new ue.Yd(ls);kt.logLevel=ue.in.ERROR;const Et=new yc(X,ae.SDK_VERSION,x,le,Se,qe),Bt=new hm(Et,_t),Jt=new Vf(Bt,_t,St,kt),En=new zd(U,Jt,St,_t,kt);return function jn(I){const S=(0,se.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(En),En},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ls,"0.3.15"),(0,ae.registerVersion)(ls,"0.3.15","esm2017")}();const us="/firebase-messaging-sw.js",Ts="/firebase-cloud-messaging-push-scope",Is="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sl="google.c.a.c_id",Jl="google.c.a.c_l",bc="google.c.a.ts",Uf="google.c.a.e";var Ss=(()=>{return(I=Ss||(Ss={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ss;var I})();function Ai(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gi(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),X=new Uint8Array(U.length);for(let le=0;le<U.length;++le)X[le]=U.charCodeAt(le);return X}const Da="fcm_token_details_db",Ur="fcm_token_object_Store";function jf(I){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Da))return null;let S=null;return(yield(0,fe.X3)(Da,5,{upgrade:(U=(0,L.Z)(function*(X,le,Se,qe){var _t;if(le<2||!X.objectStoreNames.contains(Ur))return;const St=qe.objectStore(Ur),kt=yield St.index("fcmSenderId").get(I);if(yield St.clear(),kt)if(2===le){const Et=kt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;S={token:Et.fcmToken,createTime:null!==(_t=Et.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ai(Et.vapidKey)}}}else if(3===le){const Et=kt;S={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ai(Et.auth),p256dh:Ai(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ai(Et.vapidKey)}}}else if(4===le){const Et=kt;S={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ai(Et.auth),p256dh:Ai(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ai(Et.vapidKey)}}}}),function(le,Se,qe,_t){return U.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Da),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),zn(S)?S:null;var U}),Hf.apply(this,arguments)}function zn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Mi="firebase-messaging-store";let ni=null;function eu(){return ni||(ni=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Mi)}})),ni}function Ea(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(I){const S=zi(I),U=yield(yield eu()).transaction(Mi).objectStore(Mi).get(S);if(U)return U;{const X=yield jf(I.appConfig.senderId);if(X)return yield tn(I,X),X}})).apply(this,arguments)}function tn(I,S){return tu.apply(this,arguments)}function tu(){return(tu=(0,L.Z)(function*(I,S){const x=zi(I),X=(yield eu()).transaction(Mi,"readwrite");return yield X.objectStore(Mi).put(S,x),yield X.done,S})).apply(this,arguments)}function Ho(I){return nu.apply(this,arguments)}function nu(){return(nu=(0,L.Z)(function*(I){const S=zi(I),U=(yield eu()).transaction(Mi,"readwrite");yield U.objectStore(Mi).delete(S),yield U.done})).apply(this,arguments)}function zi({appConfig:I}){return I.appId}const Hn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rt(I,S){return iu.apply(this,arguments)}function iu(){return(iu=(0,L.Z)(function*(I,S){var x;const U=yield Ec(I),X=xe(S),le={method:"POST",headers:U,body:JSON.stringify(X)};let Se;try{Se=yield(yield fetch(As(I.appConfig),le)).json()}catch(qe){throw Hn.create("token-subscribe-failed",{errorInfo:null===(x=qe)||void 0===x?void 0:x.toString()})}if(Se.error)throw Hn.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw Hn.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function $f(I,S){return su.apply(this,arguments)}function su(){return(su=(0,L.Z)(function*(I,S){var x;const U=yield Ec(I),X=xe(S.subscriptionOptions),le={method:"PATCH",headers:U,body:JSON.stringify(X)};let Se;try{Se=yield(yield fetch(`${As(I.appConfig)}/${S.token}`,le)).json()}catch(qe){throw Hn.create("token-update-failed",{errorInfo:null===(x=qe)||void 0===x?void 0:x.toString()})}if(Se.error)throw Hn.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw Hn.create("token-update-no-token");return Se.token})).apply(this,arguments)}function ou(I,S){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,L.Z)(function*(I,S){var x;const X={method:"DELETE",headers:yield Ec(I)};try{const Se=yield(yield fetch(`${As(I.appConfig)}/${S}`,X)).json();if(Se.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(le){throw Hn.create("token-unsubscribe-failed",{errorInfo:null===(x=le)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function As({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ec(I){return ol.apply(this,arguments)}function ol(){return(ol=(0,L.Z)(function*({appConfig:I,installations:S}){const x=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function xe({p256dh:I,auth:S,endpoint:x,vapidKey:U}){const X={web:{endpoint:x,auth:S,p256dh:I}};return U!==Is&&(X.web.applicationPubKey=U),X}const Kt=6048e5;function au(I){return lu.apply(this,arguments)}function lu(){return(lu=(0,L.Z)(function*(I){const S=yield Cc(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ai(S.getKey("auth")),p256dh:Ai(S.getKey("p256dh"))},U=yield Ea(I.firebaseDependencies);if(U){if(Qd(U.subscriptionOptions,x))return Date.now()>=U.createTime+Kt?Ca(I,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield ou(I.firebaseDependencies,U.token)}catch(X){console.warn(X)}return al(I.firebaseDependencies,x)}return al(I.firebaseDependencies,x)})).apply(this,arguments)}function qn(I){return uu.apply(this,arguments)}function uu(){return(uu=(0,L.Z)(function*(I){const S=yield Ea(I.firebaseDependencies);S&&(yield ou(I.firebaseDependencies,S.token),yield Ho(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ca(I,S){return xi.apply(this,arguments)}function xi(){return(xi=(0,L.Z)(function*(I,S){try{const x=yield $f(I.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:x,createTime:Date.now()});return yield tn(I.firebaseDependencies,U),x}catch(x){throw yield qn(I),x}})).apply(this,arguments)}function al(I,S){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(I,S){const U={token:yield Rt(I,S),createTime:Date.now(),subscriptionOptions:S};return yield tn(I,U),U.token})).apply(this,arguments)}function Cc(I,S){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,L.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gi(S)})})).apply(this,arguments)}function Qd(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function ul(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Kn(I,S){if(!S.notification)return;I.notification={};const x=S.notification.title;x&&(I.notification.title=x);const U=S.notification.body;U&&(I.notification.body=U);const X=S.notification.image;X&&(I.notification.image=X);const le=S.notification.icon;le&&(I.notification.icon=le)}(S,I),function cs(I,S){!S.data||(I.data=S.data)}(S,I),function Ic(I,S){var x,U,X,le,Se;if(!(S.fcmOptions||null!==(x=S.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const qe=null!==(X=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==X?X:null===(le=S.notification)||void 0===le?void 0:le.click_action;qe&&(I.fcmOptions.link=qe);const _t=null===(Se=S.fcmOptions)||void 0===Se?void 0:Se.analytics_label;_t&&(I.fcmOptions.analyticsLabel=_t)}(S,I),S}function Go(I){return"object"==typeof I&&!!I&&sl in I}function Ms(I,S){const x=[];for(let U=0;U<I.length;U++)x.push(I.charAt(U)),U<S.length&&x.push(S.charAt(U));return x.join("")}function cl(I){return Hn.create("missing-app-config-values",{valueName:I})}Ms("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ms("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ym{constructor(S,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function _m(I){if(!I||!I.options)throw cl("App Configuration Object");if(!I.name)throw cl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const U of S)if(!x[U])throw cl(U);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Sc(I){return cu.apply(this,arguments)}function cu(){return(cu=(0,L.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(us,{scope:Ts}),I.swRegistration.update().catch(()=>{})}catch(x){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=x)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function dl(I,S){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,L.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Sc(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function hl(I,S){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,L.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Is)})).apply(this,arguments)}function hu(){return(hu=(0,L.Z)(function*(I,S){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield hl(I,S?.vapidKey),yield dl(I,S?.serviceWorkerRegistration),au(I)})).apply(this,arguments)}function Mc(I,S,x){return xc.apply(this,arguments)}function xc(){return(xc=(0,L.Z)(function*(I,S,x){const U=Rc(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[sl],message_name:x[Jl],message_time:x[bc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rc(I){switch(I){case Ss.NOTIFICATION_CLICKED:return"notification_open";case Ss.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $o(){return($o=(0,L.Z)(function*(I,S){const x=S.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===Ss.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ul(x)):I.onMessageHandler.next(ul(x)));const U=x.data;Go(U)&&"1"===U[Uf]&&(yield Mc(I,x.messageType,U))})).apply(this,arguments)}const Wo="@firebase/messaging",yr=I=>{const S=new ym(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Jd(I,S){return $o.apply(this,arguments)}(S,x)),S},mi=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:U=>function du(I,S){return hu.apply(this,arguments)}(S,U)}};function Xd(){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,L.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function On(){(0,ae._registerComponent)(new he.wA("messaging",yr,"PUBLIC")),(0,ae._registerComponent)(new he.wA("messaging-internal",mi,"PRIVATE")),(0,ae.registerVersion)(Wo,"0.10.0"),(0,ae.registerVersion)(Wo,"0.10.0","esm2017")}();const Ia="analytics",nh="firebase_id",qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Zn=new ue.Yd("@firebase/analytics");function _u(I){return Promise.all(I.map(S=>S.catch(x=>x)))}function yu(I,S){const x=document.createElement("script");x.src=`${mu}?l=${I}&id=${S}`,x.async=!0,document.head.appendChild(x)}function zf(I,S,x,U,X,le){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,L.Z)(function*(I,S,x,U,X,le){const Se=U[X];try{if(Se)yield S[Se];else{const _t=(yield _u(x)).find(St=>St.measurementId===X);_t&&(yield S[_t.appId])}}catch(qe){Zn.error(qe)}I("config",X,le)})).apply(this,arguments)}function Sa(I,S,x,U,X){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,L.Z)(function*(I,S,x,U,X){try{let le=[];if(X&&X.send_to){let Se=X.send_to;Array.isArray(Se)||(Se=[Se]);const qe=yield _u(x);for(const _t of Se){const St=qe.find(Et=>Et.measurementId===_t),kt=St&&S[St.appId];if(!kt){le=[];break}le.push(kt)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),I("event",U,X||{})}catch(le){Zn.error(le)}})).apply(this,arguments)}function ih(I){const S=window.document.getElementsByTagName("script");for(const x of Object.values(S))if(x.src&&x.src.includes(mu)&&x.src.includes(I))return x;return null}const xr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ml=new class ds{constructor(S={},x=1e3){this.throttleMetadata=S,this.intervalMillis=x}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,x){this.throttleMetadata[S]=x}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function oh(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function _l(I){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,L.Z)(function*(I){var S;const{appId:x,apiKey:U}=I,X={method:"GET",headers:oh(U)},le=qo.replace("{app-id}",x),Se=yield fetch(le,X);if(200!==Se.status&&304!==Se.status){let qe="";try{const _t=yield Se.json();null!==(S=_t.error)&&void 0!==S&&S.message&&(qe=_t.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:qe})}return Se.json()})).apply(this,arguments)}function nr(I){return qi.apply(this,arguments)}function qi(){return(qi=(0,L.Z)(function*(I,S=ml,x){const{appId:U,apiKey:X,measurementId:le}=I.options;if(!U)throw xr.create("no-app-id");if(!X){if(le)return{measurementId:le,appId:U};throw xr.create("no-api-key")}const Se=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Du;return setTimeout((0,L.Z)(function*(){qe.abort()}),void 0!==x?x:6e4),bu({appId:U,apiKey:X,measurementId:le},Se,qe,S)})).apply(this,arguments)}function bu(I,S,x){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,L.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:x},U,X=ml){var le,Se;const{appId:qe,measurementId:_t}=I;try{yield yl(U,S)}catch(St){if(_t)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null===(le=St)||void 0===le?void 0:le.message}]`),{appId:qe,measurementId:_t};throw St}try{const St=yield _l(I);return X.deleteThrottleMetadata(qe),St}catch(St){const kt=St;if(!wu(kt)){if(X.deleteThrottleMetadata(qe),_t)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${kt?.message}]`),{appId:qe,measurementId:_t};throw St}const Et=503===Number(null===(Se=kt?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,se.$s)(x,X.intervalMillis,30):(0,se.$s)(x,X.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+Et,backoffCount:x+1};return X.setThrottleMetadata(qe,Bt),Zn.debug(`Calling attemptFetch again in ${Et} millis`),bu(I,Bt,U,X)}})).apply(this,arguments)}function yl(I,S){return new Promise((x,U)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(x,X);I.addEventListener(()=>{clearTimeout(le),U(xr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wu(I){if(!(I instanceof se.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Du{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let ho,bl;function fo(){return(fo=(0,L.Z)(function*(I,S,x,U,X){if(X&&X.global)I("event",x,U);else{const le=yield S;I("event",x,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function Jo(I){bl=I}function Lc(I){ho=I}function Rs(){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,L.Z)(function*(){var I;if(!(0,se.hl)())return Zn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(S){return Zn.warn(xr.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Ma(){return(Ma=(0,L.Z)(function*(I,S,x,U,X,le,Se){var qe;const _t=nr(I);_t.then(Jt=>{x[Jt.measurementId]=Jt.appId,I.options.measurementId&&Jt.measurementId!==I.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Jt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Jt=>Zn.error(Jt)),S.push(_t);const St=Rs().then(Jt=>{if(Jt)return U.getId()}),[kt,Et]=yield Promise.all([_t,St]);ih(le)||yu(le,kt.measurementId),bl&&(X("consent","default",bl),Jo(void 0)),X("js",new Date);const Bt=null!==(qe=Se?.config)&&void 0!==qe?qe:{};return Bt.origin="firebase",Bt.update=!0,null!=Et&&(Bt[nh]=Et),X("config",kt.measurementId,Bt),ho&&(X("set",ho),Lc(void 0)),kt.measurementId})).apply(this,arguments)}class Iu{constructor(S){this.app=S}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},po=[];const xa={};let Oa,Xo,Ra="dataLayer",wl=!1;function tv(I,S,x){!function vm(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((U,X)=>`(${X+1}) ${U}`).join(" "),x=xr.create("invalid-analytics-context",{errorInfo:S});Zn.warn(x.message)}}();const U=I.options.appId;if(!U)throw xr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw xr.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_i[U])throw xr.create("already-exists",{id:U});if(!wl){!function rh(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Ra);const{wrappedGtag:le,gtagCore:Se}=function fl(I,S,x,U,X){let le=function(...Se){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(le=window[X]),window[X]=function vu(I,S,x,U){function le(){return(le=(0,L.Z)(function*(Se,qe,_t){try{"event"===Se?yield Sa(I,S,x,qe,_t):"config"===Se?yield zf(I,S,x,U,qe,_t):"consent"===Se?I("consent","update",_t):I("set",qe)}catch(St){Zn.error(St)}})).apply(this,arguments)}return function X(Se,qe,_t){return le.apply(this,arguments)}}(le,I,S,x),{gtagCore:le,wrappedGtag:window[X]}}(_i,po,xa,Ra,"gtag");Xo=le,Oa=Se,wl=!0}return _i[U]=function Aa(I,S,x,U,X,le,Se){return Ma.apply(this,arguments)}(I,po,xa,S,Oa,Ra,x),new Iu(I)}function rv(){return qf.apply(this,arguments)}function qf(){return(qf=(0,L.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const go="@firebase/analytics";!function Je(){(0,ae._registerComponent)(new he.wA(Ia,(S,{options:x})=>tv(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new he.wA("analytics-internal",function I(S){try{const x=S.getProvider(Ia).getImmediate();return{logEvent:(U,X,le)=>function rr(I,S,x,U){I=(0,se.m9)(I),function ah(I,S,x,U,X){return fo.apply(this,arguments)}(Xo,_i[I.app.options.appId],S,x,U).catch(X=>Zn.error(X))}(x,U,X,le)}}catch(x){throw xr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(go,"0.8.4"),(0,ae.registerVersion)(go,"0.8.4","esm2017")}();var nn=V(4408),Vn=V(7565);const yi=new class mo extends Vn.v{}(class Ki extends nn.o{constructor(S,x){super(S,x),this.scheduler=S,this.work=x}schedule(S,x=0){return x>0?super.schedule(S,x):(this.delay=x,this.state=S,this.scheduler.flush(this),this)}execute(S,x){return x>0||this.closed?super.execute(S,x):this._execute(S,x)}requestAsyncId(S,x,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,x,U):(S.flush(this),0)}});var Bc=V(4986),Nu=V(8505),Os=V(5363),Au=V(9468);const vi=new d.GfV("7.4.1"),Dl="__angularfire_symbol__analyticsIsSupportedValue",Gn="__angularfire_symbol__analyticsIsSupported",El="__angularfire_symbol__remoteConfigIsSupportedValue",Cl="__angularfire_symbol__remoteConfigIsSupported",Uc="__angularfire_symbol__messagingIsSupportedValue",jc="__angularfire_symbol__messagingIsSupported";function Tl(I,S,x){if(S){if(1===S.length)return S[0];const le=S.filter(Se=>Se.app===x);if(1===le.length)return le[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[Gn]||(globalThis[Gn]=rv().then(I=>globalThis[Dl]=I).catch(()=>globalThis[Dl]=!1)),globalThis[jc]||(globalThis[jc]=Xd().then(I=>globalThis[Uc]=I).catch(()=>globalThis[Uc]=!1)),globalThis[Cl]||(globalThis[Cl]=Ql().then(I=>globalThis[El]=I).catch(()=>globalThis[El]=!1));const ea=(I,S)=>{const x=S?[S]:(0,te.C6)(),U=[];return x.forEach(X=>{X.container.getProvider(I).instances.forEach(Se=>{U.includes(Se)||U.push(Se)})}),U};function vn(){}class Zi{constructor(S,x=yi){this.zone=S,this.delegate=x}now(){return this.delegate.now()}schedule(S,x,U){const X=this.zone;return this.delegate.schedule(function(Se){X.runGuarded(()=>{S.apply(this,[Se])})},x,U)}}class Hc{constructor(S){this.zone=S,this.task=null}call(S,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)),x.pipe((0,Nu.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yn=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Zi(Zone.current)),this.insideAngular=x.run(()=>new Zi(Zone.current,Bc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ps(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function dh(I){return I.pipe((0,Os.Q)(Ps().outsideAngular))}function _o(I){return Ps(),function na(I){return function(x){return(x=x.lift(new Hc(I.ngZone))).pipe((0,Au.R)(I.outsideAngular),(0,Os.Q)(I.insideAngular))}}(Ps())(I)}},2090:(gt,Ae,V)=>{V.d(Ae,{$s:()=>at,BH:()=>zt,DV:()=>hi,Dv:()=>Sr,G6:()=>Ie,GJ:()=>eo,L:()=>fe,LL:()=>on,Pz:()=>cn,Sg:()=>tt,UG:()=>Ce,UI:()=>ba,US:()=>he,Wj:()=>xt,Wl:()=>yn,Yr:()=>we,ZB:()=>W,ZR:()=>xn,aH:()=>vt,b$:()=>me,cI:()=>Vt,dS:()=>hn,eu:()=>Ke,g5:()=>L,gK:()=>tr,gQ:()=>Wn,h$:()=>ue,hl:()=>ze,hu:()=>te,jU:()=>ut,lb:()=>Es,m9:()=>Ut,ne:()=>lr,p$:()=>$,pd:()=>as,r3:()=>Gi,ru:()=>ye,tV:()=>ge,uI:()=>Pe,ug:()=>$i,vZ:()=>rt,w1:()=>dt,w9:()=>Xr,xO:()=>pr,xb:()=>Ii,z$:()=>Ge,zI:()=>G,zd:()=>Si});const te=function(z,j){if(!z)throw L(j)},L=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ae=function(z){const j=[];let Q=0;for(let Ee=0;Ee<z.length;Ee++){let ee=z.charCodeAt(Ee);ee<128?j[Q++]=ee:ee<2048?(j[Q++]=ee>>6|192,j[Q++]=63&ee|128):55296==(64512&ee)&&Ee+1<z.length&&56320==(64512&z.charCodeAt(Ee+1))?(ee=65536+((1023&ee)<<10)+(1023&z.charCodeAt(++Ee)),j[Q++]=ee>>18|240,j[Q++]=ee>>12&63|128,j[Q++]=ee>>6&63|128,j[Q++]=63&ee|128):(j[Q++]=ee>>12|224,j[Q++]=ee>>6&63|128,j[Q++]=63&ee|128)}return j},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,j){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ee=0;ee<z.length;ee+=3){const Qe=z[ee],yt=ee+1<z.length,an=yt?z[ee+1]:0,Sn=ee+2<z.length,en=Sn?z[ee+2]:0;let Gt=(15&an)<<2|en>>6,Nr=63&en;Sn||(Nr=64,yt||(Gt=64)),Ee.push(Q[Qe>>2],Q[(3&Qe)<<4|an>>4],Q[Gt],Q[Nr])}return Ee.join("")},encodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(z):this.encodeByteArray(ae(z),j)},decodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(z):function(z){const j=[];let Q=0,Ee=0;for(;Q<z.length;){const ee=z[Q++];if(ee<128)j[Ee++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Qe=z[Q++];j[Ee++]=String.fromCharCode((31&ee)<<6|63&Qe)}else if(ee>239&&ee<365){const Sn=((7&ee)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;j[Ee++]=String.fromCharCode(55296+(Sn>>10)),j[Ee++]=String.fromCharCode(56320+(1023&Sn))}else{const Qe=z[Q++],yt=z[Q++];j[Ee++]=String.fromCharCode((15&ee)<<12|(63&Qe)<<6|63&yt)}}return j.join("")}(this.decodeStringToByteArray(z,j))},decodeStringToByteArray(z,j){this.init_();const Q=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ee=0;ee<z.length;){const Qe=Q[z.charAt(ee++)],an=ee<z.length?Q[z.charAt(ee)]:0;++ee;const en=ee<z.length?Q[z.charAt(ee)]:64;++ee;const Ye=ee<z.length?Q[z.charAt(ee)]:64;if(++ee,null==Qe||null==an||null==en||null==Ye)throw Error();Ee.push(Qe<<2|an>>4),64!==en&&(Ee.push(an<<4&240|en>>2),64!==Ye&&Ee.push(en<<6&192|Ye))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ue=function(z){const j=ae(z);return he.encodeByteArray(j,!0)},fe=function(z){return ue(z).replace(/\./g,"")},ge=function(z){try{return he.decodeString(z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(z){return W(void 0,z)}function W(z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return j}for(const Q in j)!j.hasOwnProperty(Q)||!J(Q)||(z[Q]=W(z[Q],j[Q]));return z}function J(z){return"__proto__"!==z}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){const z=Ge();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!1}function Ie(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){return"object"==typeof indexedDB}function Ke(){return new Promise((z,j)=>{try{let Q=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(Ee);ee.onsuccess=()=>{ee.result.close(),Q||self.indexedDB.deleteDatabase(Ee),z(!0)},ee.onupgradeneeded=()=>{Q=!1},ee.onerror=()=>{var Qe;j((null===(Qe=ee.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(Q){j(Q)}})}function G(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function _e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=z&&ge(z[1]);return j&&JSON.parse(j)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},vt=()=>{var z;return null===(z=ie())||void 0===z?void 0:z.config},cn=z=>{var j;return null===(j=ie())||void 0===j?void 0:j[`_${z}`]};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Q)=>{this.resolve=j,this.reject=Q})}wrapCallback(j){return(Q,Ee)=>{Q?this.reject(Q):this.resolve(Ee),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Q):j(Q,Ee))}}}function tt(z,j){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=j||"demo-project",ee=z.iat||0,Qe=z.sub||z.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ee,exp:ee+3600,auth_time:ee,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(yt)),""].join(".")}class xn extends Error{constructor(j,Q,Ee){super(Q),this.code=j,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(j,Q,Ee){this.service=j,this.serviceName=Q,this.errors=Ee}create(j,...Q){const Ee=Q[0]||{},ee=`${this.service}/${j}`,Qe=this.errors[j],yt=Qe?function dn(z,j){return z.replace(Qr,(Q,Ee)=>{const ee=j[Ee];return null!=ee?String(ee):`<${Ee}?>`})}(Qe,Ee):"Error";return new xn(ee,`${this.serviceName}: ${yt} (${ee}).`,Ee)}}const Qr=/\{\$([^}]+)}/g;function Vt(z){return JSON.parse(z)}function yn(z){return JSON.stringify(z)}const Ds=function(z){let j={},Q={},Ee={},ee="";try{const Qe=z.split(".");j=Vt(ge(Qe[0])||""),Q=Vt(ge(Qe[1])||""),ee=Qe[2],Ee=Q.d||{},delete Q.d}catch{}return{header:j,claims:Q,data:Ee,signature:ee}},Xr=function(z){const Q=Ds(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},eo=function(z){const j=Ds(z).claims;return"object"==typeof j&&!0===j.admin};function Gi(z,j){return Object.prototype.hasOwnProperty.call(z,j)}function hi(z,j){if(Object.prototype.hasOwnProperty.call(z,j))return z[j]}function Ii(z){for(const j in z)if(Object.prototype.hasOwnProperty.call(z,j))return!1;return!0}function ba(z,j,Q){const Ee={};for(const ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&(Ee[ee]=j.call(Q,z[ee],ee,z));return Ee}function rt(z,j){if(z===j)return!0;const Q=Object.keys(z),Ee=Object.keys(j);for(const ee of Q){if(!Ee.includes(ee))return!1;const Qe=z[ee],yt=j[ee];if(Wr(Qe)&&Wr(yt)){if(!rt(Qe,yt))return!1}else if(Qe!==yt)return!1}for(const ee of Ee)if(!Q.includes(ee))return!1;return!0}function Wr(z){return null!==z&&"object"==typeof z}function pr(z){const j=[];for(const[Q,Ee]of Object.entries(z))Array.isArray(Ee)?Ee.forEach(ee=>{j.push(encodeURIComponent(Q)+"="+encodeURIComponent(ee))}):j.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ee));return j.length?"&"+j.join("&"):""}function Si(z){const j={};return z.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ee,Qe]=Ee.split("=");j[decodeURIComponent(ee)]=decodeURIComponent(Qe)}}),j}function as(z){const j=z.indexOf("?");if(!j)return"";const Q=z.indexOf("#",j);return z.substring(j,Q>0?Q:void 0)}class Wn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,Q){Q||(Q=0);const Ee=this.W_;if("string"==typeof j)for(let Ye=0;Ye<16;Ye++)Ee[Ye]=j.charCodeAt(Q)<<24|j.charCodeAt(Q+1)<<16|j.charCodeAt(Q+2)<<8|j.charCodeAt(Q+3),Q+=4;else for(let Ye=0;Ye<16;Ye++)Ee[Ye]=j[Q]<<24|j[Q+1]<<16|j[Q+2]<<8|j[Q+3],Q+=4;for(let Ye=16;Ye<80;Ye++){const Gt=Ee[Ye-3]^Ee[Ye-8]^Ee[Ye-14]^Ee[Ye-16];Ee[Ye]=4294967295&(Gt<<1|Gt>>>31)}let en,$e,ee=this.chain_[0],Qe=this.chain_[1],yt=this.chain_[2],an=this.chain_[3],Sn=this.chain_[4];for(let Ye=0;Ye<80;Ye++){Ye<40?Ye<20?(en=an^Qe&(yt^an),$e=1518500249):(en=Qe^yt^an,$e=1859775393):Ye<60?(en=Qe&yt|an&(Qe|yt),$e=2400959708):(en=Qe^yt^an,$e=3395469782);const Gt=(ee<<5|ee>>>27)+en+Sn+$e+Ee[Ye]&4294967295;Sn=an,an=yt,yt=4294967295&(Qe<<30|Qe>>>2),Qe=ee,ee=Gt}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Qe&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+an&4294967295,this.chain_[4]=this.chain_[4]+Sn&4294967295}update(j,Q){if(null==j)return;void 0===Q&&(Q=j.length);const Ee=Q-this.blockSize;let ee=0;const Qe=this.buf_;let yt=this.inbuf_;for(;ee<Q;){if(0===yt)for(;ee<=Ee;)this.compress_(j,ee),ee+=this.blockSize;if("string"==typeof j){for(;ee<Q;)if(Qe[yt]=j.charCodeAt(ee),++yt,++ee,yt===this.blockSize){this.compress_(Qe),yt=0;break}}else for(;ee<Q;)if(Qe[yt]=j[ee],++yt,++ee,yt===this.blockSize){this.compress_(Qe),yt=0;break}}this.inbuf_=yt,this.total_+=Q}digest(){const j=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&Q,Q/=256;this.compress_(this.buf_);let Ee=0;for(let ee=0;ee<5;ee++)for(let Qe=24;Qe>=0;Qe-=8)j[Ee]=this.chain_[ee]>>Qe&255,++Ee;return j}}function lr(z,j){const Q=new An(z,j);return Q.subscribe.bind(Q)}class An{constructor(j,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{j(this)}).catch(Ee=>{this.error(Ee)})}next(j){this.forEachObserver(Q=>{Q.next(j)})}error(j){this.forEachObserver(Q=>{Q.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Q,Ee){let ee;if(void 0===j&&void 0===Q&&void 0===Ee)throw new Error("Missing Observer.");ee=function mt(z,j){if("object"!=typeof z||null===z)return!1;for(const Q of j)if(Q in z&&"function"==typeof z[Q])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Q,complete:Ee},void 0===ee.next&&(ee.next=gn),void 0===ee.error&&(ee.error=gn),void 0===ee.complete&&(ee.complete=gn);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Qe}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,j)}sendOne(j,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Q(this.observers[j])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}const Sr=function(z,j,Q,Ee){let ee;if(Ee<j?ee="at least "+j:Ee>Q&&(ee=0===Q?"none":"no more than "+Q),ee)throw new Error(z+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+ee+".")};function tr(z,j){return`${z} failed: ${j} argument `}function xt(z,j,Q,Ee){if((!Ee||Q)&&"function"!=typeof Q)throw new Error(tr(z,j)+"must be a valid function.")}function Es(z,j,Q,Ee){if((!Ee||Q)&&("object"!=typeof Q||null===Q))throw new Error(tr(z,j)+"must be a valid context object.")}const hn=function(z){const j=[];let Q=0;for(let Ee=0;Ee<z.length;Ee++){let ee=z.charCodeAt(Ee);if(ee>=55296&&ee<=56319){const Qe=ee-55296;Ee++,te(Ee<z.length,"Surrogate pair missing trail surrogate."),ee=65536+(Qe<<10)+(z.charCodeAt(Ee)-56320)}ee<128?j[Q++]=ee:ee<2048?(j[Q++]=ee>>6|192,j[Q++]=63&ee|128):ee<65536?(j[Q++]=ee>>12|224,j[Q++]=ee>>6&63|128,j[Q++]=63&ee|128):(j[Q++]=ee>>18|240,j[Q++]=ee>>12&63|128,j[Q++]=ee>>6&63|128,j[Q++]=63&ee|128)}return j},$i=function(z){let j=0;for(let Q=0;Q<z.length;Q++){const Ee=z.charCodeAt(Q);Ee<128?j++:Ee<2048?j+=2:Ee>=55296&&Ee<=56319?(j+=4,Q++):j+=3}return j};function at(z,j=1e3,Q=2){const Ee=j*Math.pow(Q,z),ee=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+ee)}function Ut(z){return z&&z._delegate?z._delegate:z}},7555:(gt,Ae,V)=>{var d=V(4650);let te=null;function L(){return te}const ue=new d.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ge(){return(0,d.LFG)(W)}()},providedIn:"platform"}),n})();const $=new d.OlP("Location Initialized");let W=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new W((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ut(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(ot)},providedIn:"root"}),n})();const me=new d.OlP("appBaseHref");let ot=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ut(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+ut(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+ut(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+ut(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+ut(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ce(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ut(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ut,n.joinWithSlash=Pe,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(d.LFG(ye))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return new Re((0,d.LFG)(ye))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}class rl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ni=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rl(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,l),so(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{so(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function so(n,e){n.context.$implicit=e.item}let jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ar("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ar("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class mc{constructor(){this.$implicit=null,this.ngIf=null}}function Ar(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let oo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),n})(),Mr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Ur(n){return"server"===n}let Xl=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Gf((0,d.LFG)(ue),window)}),n})();class Gf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ni(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Mi(this.window.history)||Mi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Mi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $o extends class Jd extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){te||(te=n)}(new $o)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fu(){return Wo=Wo||document.querySelector("base"),Wo?Wo.getAttribute("href"):null}();return null==t?null:function mi(n){yr=yr||document.createElement("a"),yr.setAttribute("href",n);const e=yr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let yr,Wo=null;const On=new d.OlP("TRANSITION_ID"),Oc=[{provide:d.ip1,useFactory:function Xd(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[On,ue,d.zs3],multi:!0}];let kc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pu=new d.OlP("EventManagerPlugins");let eh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ta=(()=>{class n extends zo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(th),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(th))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function th(n){L().remove(n)}const Ia={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nh=/%COMP%/g;function yu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?yu(n,i,t):(i=i.replace(nh,n),t.push(i))}return t}function rh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ko=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Sa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ih(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new sh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=yu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(eh),d.LFG(Ta),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Sa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ia[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(fl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ia[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ia[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,rh(r)):this.eventManager.addEventListener(e,t,rh(r))}}function fl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ih extends Sa{constructor(e,t,r,i){super(e),this.component=r;const s=yu(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Zn(n){return"_ngcontent-%COMP%".replace(nh,n)}(i+"-"+r.id),this.hostAttr=function _u(n){return"_nghost-%COMP%".replace(nh,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sh extends Sa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=yu(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const c=document.createElement("style");c.textContent=s[l],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xr=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=["alt","control","meta","shift"],gl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ds={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ml=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),l="code."),pl.forEach(y=>{const D=r.indexOf(y);D>-1&&(r.splice(D,1),l+=y+".")}),l+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=gl[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),pl.forEach(l=>{l!==i&&(0,ds[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function bu(){$o.makeCurrent()},multi:!0},{provide:ue,useFactory:function yl(){return(0,d.RDi)(document),document},deps:[]}]),ho=new d.OlP(""),ah=[{provide:d.rWj,useClass:class Wf{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const c=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],fo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Yo(){return new d.qLn},deps:[]},{provide:pu,useClass:xr,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:pu,useClass:ml,multi:!0,deps:[ue]},{provide:Ko,useClass:Ko,deps:[eh,Ta,d.AFp]},{provide:d.FYo,useExisting:Ko},{provide:zo,useExisting:Ta},{provide:Ta,useClass:Ta,deps:[ue]},{provide:eh,useClass:eh,deps:[pu,d.R0b]},{provide:class Ea{},useClass:kc,deps:[]},[]];let Eu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:On,useExisting:d.AFp},Oc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ho,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...fo,...ah],imports:[Mr,d.hGG]}),n})(),xs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Na(){return new xs((0,d.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rr=V(9751),ri=V(515),go=V(3269),ln=V(8996);function Je(...n){const e=(0,go.yG)(n);return(0,ln.D)(n,e)}var nn=V(7579),Ki=V(8421),Vn=V(5577),mo=V(1144),yi=V(576),ct=V(4004);const{isArray:Bc}=Array;function Os(n){return(0,ct.U)(e=>function Nu(n,e){return Bc(e)?n(...e):n(e)}(n,e))}const Au=["addListener","removeListener"],vi=["addEventListener","removeEventListener"],Dl=["on","off"];function Gn(n,e,t,r){if((0,yi.m)(t)&&(r=t,t=void 0),r)return Gn(n,e,t).pipe(Os(r));const[i,s]=function jc(n){return(0,yi.m)(n.addEventListener)&&(0,yi.m)(n.removeEventListener)}(n)?vi.map(l=>c=>n[l](e,c,t)):function Cl(n){return(0,yi.m)(n.addListener)&&(0,yi.m)(n.removeListener)}(n)?Au.map(El(n,e)):function Uc(n){return(0,yi.m)(n.on)&&(0,yi.m)(n.off)}(n)?Dl.map(El(n,e)):[];if(!i&&(0,mo.z)(n))return(0,Vn.z)(l=>Gn(l,e,t))((0,Ki.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new rr.y(l=>{const c=(...p)=>l.next(1<p.length?p:p[0]);return i(c),()=>s(c)})}function El(n,e){return t=>r=>n[t](e,r)}var ks=V(4986),wm=V(3532);function ch(n=0,e,t=ks.P){let r=-1;return null!=e&&((0,wm.K)(e)?t=e:r=e),new rr.y(i=>{let s=function uh(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const{isArray:Tl}=Array;function ea(n){return 1===n.length&&Tl(n[0])?n[0]:n}var vn=V(5403);function Zi(...n){return 1===(n=ea(n)).length?(0,Ki.Xf)(n[0]):new rr.y(function Hc(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Ki.Xf)(n[r]).subscribe((0,vn.x)(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))}class Yn extends nn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Ps}=Array,{getPrototypeOf:Gc,prototype:Fs,keys:dh}=Object;function ta(n){if(1===n.length){const e=n[0];if(Ps(e))return{args:e,keys:null};if(function _o(n){return n&&"object"==typeof n&&Gc(n)===Fs}(e)){const t=dh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var na=V(4671);function Qn(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Kf=V(9672);function I(...n){const e=(0,go.yG)(n),t=(0,go.jO)(n),{args:r,keys:i}=ta(n);if(0===r.length)return(0,ln.D)([],e);const s=new rr.y(function S(n,e,t=na.y){return r=>{x(e,()=>{const{length:i}=n,s=new Array(i);let l=i,c=i;for(let p=0;p<i;p++)x(e,()=>{const y=(0,ln.D)(n[p],e);let D=!1;y.subscribe((0,vn.x)(r,C=>{s[p]=C,D||(D=!0,c--),c||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Qn(i,l):na.y));return t?s.pipe(Os(t)):s}function x(n,e,t){n?(0,Kf.f)(t,n,e):e()}var U=V(5032);function Se(...n){const e=(0,go.jO)(n),t=ea(n);return t.length?new rr.y(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let l=0;!r.closed&&l<t.length;l++)(0,Ki.Xf)(t[l]).subscribe((0,vn.x)(r,c=>{if(i[l].push(c),i.every(p=>p.length)){const p=i.map(y=>y.shift());r.next(e?e(...p):p),i.some((y,D)=>!y.length&&s[D])&&r.complete()}},()=>{s[l]=!0,!i[l].length&&r.complete()}));return()=>{i=s=null}}):ri.E}new rr.y(U.Z);var qe=V(6451),_t=V(8189);function kt(...n){return function St(){return(0,_t.J)(1)}()((0,ln.D)(n,(0,go.yG)(n)))}var Bt=V(4482);function Jt(n){return(0,Bt.e)((e,t)=>{(0,Ki.Xf)(n).subscribe((0,vn.x)(t,()=>t.complete(),U.Z)),!t.closed&&e.subscribe(t)})}function En(n,e){return(0,Bt.e)((t,r)=>{let i=0;t.subscribe((0,vn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Bn(n){return n<=0?()=>ri.E:(0,Bt.e)((e,t)=>{let r=0;e.subscribe((0,vn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bi(...n){const e=(0,go.yG)(n);return(0,Bt.e)((t,r)=>{(e?kt(n,t,e):kt(n,t)).subscribe(r)})}function hs(n,e=na.y){return n=n??yo,(0,Bt.e)((t,r)=>{let i,s=!0;t.subscribe((0,vn.x)(r,l=>{const c=e(l);(s||!n(i,c))&&(s=!1,i=c,r.next(l))}))})}function yo(n,e){return n===e}function mn(n,e){return(0,Bt.e)((t,r)=>{let i=null,s=0,l=!1;const c=()=>l&&!i&&r.complete();t.subscribe((0,vn.x)(r,p=>{i?.unsubscribe();let y=0;const D=s++;(0,Ki.Xf)(n(p,D)).subscribe(i=(0,vn.x)(r,C=>r.next(e?e(p,C,D,y++):C),()=>{i=null,c()}))},()=>{l=!0,c()}))})}var kn=V(8505);function fs(...n){const e=(0,go.jO)(n);return(0,Bt.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),c=!1;for(let p=0;p<i;p++)(0,Ki.Xf)(n[p]).subscribe((0,vn.x)(r,y=>{s[p]=y,!c&&!l[p]&&(l[p]=!0,(c=l.every(na.y))&&(l=null))},U.Z));t.subscribe((0,vn.x)(r,p=>{if(c){const y=[p,...s];r.next(e?e(...y):y)}}))})}function Zf(n){return(0,ct.U)(()=>n)}function Dm(n,e){return e?t=>kt(e.pipe(Bn(1),function hh(){return(0,Bt.e)((n,e)=>{n.subscribe((0,vn.x)(e,U.Z))})}()),t.pipe(Dm(n))):(0,Vn.z)((t,r)=>n(t,r).pipe(Bn(1),Zf(t)))}function Em(n,e=ks.z){const t=ch(n,e);return Dm(()=>t)}var Mu=V(3099);let Tm=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ka=(()=>{class n extends Tm{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const ra=new d.OlP("NgValueAccessor"),Yf={provide:ra,useExisting:(0,d.Gpc)(()=>ia),multi:!0},Sm=new d.OlP("CompositionEventMode");let ia=(()=>{class n extends Tm{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function av(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Sm,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[d._Bn([Yf]),d.qOj]}),n})();const ii=new d.OlP("NgValidators"),Il=new d.OlP("NgAsyncValidators");function ep(n){return function Yi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function ph(n){return null}function Ls(n){return null!=n}function xu(n){return(0,d.QGY)(n)?(0,ln.D)(n):n}function np(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rm(n,e){return e.map(t=>t(n))}function lv(n){return n.map(e=>function DD(n){return!n.validate}(e)?e:t=>e.validate(t))}function Om(n){return null!=n?function uv(n){if(!n)return null;const e=n.filter(Ls);return 0==e.length?null:function(t){return np(Rm(t,e))}}(lv(n)):null}function gh(n){return null!=n?function rp(n){if(!n)return null;const e=n.filter(Ls);return 0==e.length?null:function(t){return function $c(...n){const e=(0,go.jO)(n),{args:t,keys:r}=ta(n),i=new rr.y(s=>{const{length:l}=t;if(!l)return void s.complete();const c=new Array(l);let p=l,y=l;for(let D=0;D<l;D++){let C=!1;(0,Ki.Xf)(t[D]).subscribe((0,vn.x)(s,M=>{C||(C=!0,y--),c[D]=M},()=>p--,void 0,()=>{(!p||!C)&&(y||s.next(r?Qn(r,c):c),s.complete())}))}});return e?i.pipe(Os(e)):i}(Rm(t,e).map(xu)).pipe((0,ct.U)(np))}}(lv(n)):null}function km(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cv(n){return n._rawValidators}function Pa(n){return n._rawAsyncValidators}function qc(n){return n?Array.isArray(n)?n:[n]:[]}function ps(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fa(n,e){const t=qc(e);return qc(n).forEach(i=>{ps(t,i)||t.push(i)}),t}function ip(n,e){return qc(e).filter(t=>!ps(n,t))}class Kc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Om(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class si extends Kc{get formDirective(){return null}get path(){return null}}class Sl extends Kc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sp{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ru=(()=>{class n extends sp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Sl,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),dv=(()=>{class n extends sp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(si,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Yc="VALID",yh="INVALID",Ou="PENDING",La="DISABLED";function Gm(n){return(Jc(n)?n.validators:n)||null}function Nl(n){return Array.isArray(n)?Om(n):n||null}function Qc(n,e){return(Jc(e)?e.asyncValidators:n)||null}function cp(n){return Array.isArray(n)?gh(n):n||null}function Jc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function dp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function hp(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class Al{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Nl(this._rawValidators),this._composedAsyncValidatorFn=cp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yc}get invalid(){return this.status===yh}get pending(){return this.status==Ou}get disabled(){return this.status===La}get enabled(){return this.status!==La}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Nl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cp(e)}addValidators(e){this.setValidators(Fa(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fa(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ip(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ip(e,this._rawAsyncValidators))}hasValidator(e){return ps(this._rawValidators,e)}hasAsyncValidator(e){return ps(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ou,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=La,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yc||this.status===Ou)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?La:Yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ou,this._hasOwnPendingAsyncValidator=!0;const t=xu(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?La:this.errors?yh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ou)?Ou:this._anyControlsHaveStatus(yh)?yh:Yc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Va extends Al{constructor(e,t,r){super(Gm(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hp(this,0,e),Object.keys(e).forEach(r=>{dp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class vh extends Va{}function vo(n,e){Ba(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Dh(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wi(n,e)})}(n,e),function pp(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Eh(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wi(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Xc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Vs(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ba(n,e){const t=cv(n);null!==e.validator?n.setValidators(km(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Pa(n);null!==e.asyncValidator?n.setAsyncValidators(km(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();bh(e._rawValidators,i),bh(e._rawAsyncValidators,i)}function wh(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=cv(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Pa(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return bh(e._rawValidators,r),bh(e._rawAsyncValidators,r),t}function wi(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Zm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ku(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const td=class extends Al{constructor(e=null,t,r){super(Gm(t),Qc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ku(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ku(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let br=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ym=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const nd=new d.OlP("NgModelWithFormControlWarning"),Nh={provide:si,useExisting:(0,d.Gpc)(()=>rd)};let rd=(()=>{class n extends si{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return vo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Vs(t.control||null,t,!1),function zm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function bo(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Vs(r||null,t),(n=>n instanceof td)(i)&&(vo(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ch(n,e){Ba(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function pv(n,e){return wh(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ba(this.form,this),this._oldForm&&wh(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ii,10),d.Y36(Il,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Nh]),d.qOj,d.TTD]}),n})();const O1={provide:Sl,useExisting:(0,d.Gpc)(()=>bv)};let bv=(()=>{class n extends Sl{constructor(t,r,i,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function sa(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ia?t=s:function gv(n){return Object.getPrototypeOf(n.constructor)===ka}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ed(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function qr(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(si,13),d.Y36(ii,10),d.Y36(Il,10),d.Y36(ra,10),d.Y36(nd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([O1]),d.qOj,d.TTD]}),n})(),kr=(()=>{class n{constructor(){this._validator=ph}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ph,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const bp={provide:ii,useExisting:(0,d.Gpc)(()=>Xm),multi:!0};let Xm=(()=>{class n extends kr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>ep}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([bp]),d.qOj]}),n})(),ja=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ym]}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ja]}),n})(),VD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nd,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ja]}),n})();class j1 extends Al{constructor(e,t,r){super(Gm(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hp(this,0,e),e.forEach((r,i)=>{dp(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function G1(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Ha=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return G1(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Va(i,s)}record(t,r=null){const i=this._reduceControls(t);return new vh(i,r)}control(t,r,i){let s={};return this.useNonNullable?(G1(r)?s=r:(s.validators=r,s.asyncValidators=i),new td(t,{...s,nonNullable:!0})):new td(t,r,i)}array(t,r,i){const s=t.map(l=>this._createControl(l));return new j1(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof td||t instanceof Al?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:VD}),n})();var jD={left:"right",right:"left",bottom:"top",top:"bottom"};function e_(n){return n.replace(/left|right|bottom|top/g,function(e){return jD[e]})}function gs(n){return n.split("-")[0]}var $1={start:"end",end:"start"};function HD(n){return n.replace(/start|end/g,function(e){return $1[e]})}var Ji="top",Bs="bottom",wo="right",Do="left",Pu="auto",id=[Ji,Bs,wo,Do],sd="start",Dp="end",GD="viewport",Ep="popper",$D=id.reduce(function(n,e){return n.concat([e+"-"+sd,e+"-"+Dp])},[]),WD=[].concat(id,[Pu]).reduce(function(n,e){return n.concat([e,e+"-"+sd,e+"-"+Dp])},[]),od=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Us(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Fu(n){return n instanceof Us(n).Element||n instanceof Element}function Eo(n){return n instanceof Us(n).HTMLElement||n instanceof HTMLElement}function YD(n){return!(typeof ShadowRoot>"u")&&(n instanceof Us(n).ShadowRoot||n instanceof ShadowRoot)}function oa(n){return((Fu(n)?n.ownerDocument:n.document)||window.document).documentElement}var ad=Math.max,Cp=Math.min,ld=Math.round;function t_(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function n_(){return!/^((?!chrome|android).)*safari/i.test(t_())}function ud(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,s=1;e&&Eo(n)&&(i=n.offsetWidth>0&&ld(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&ld(r.height)/n.offsetHeight||1);var c=(Fu(n)?Us(n):window).visualViewport,p=!n_()&&t,y=(r.left+(p&&c?c.offsetLeft:0))/i,D=(r.top+(p&&c?c.offsetTop:0))/s,C=r.width/i,M=r.height/s;return{width:C,height:M,top:D,right:y+C,bottom:D+M,left:y,x:y,y:D}}function Mh(n){var e=Us(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function xh(n){return ud(oa(n)).left+Mh(n).scrollLeft}function aa(n){return Us(n).getComputedStyle(n)}function Co(n){return n?(n.nodeName||"").toLowerCase():null}function Lu(n){return"html"===Co(n)?n:n.assignedSlot||n.parentNode||(YD(n)?n.host:null)||oa(n)}function Mv(n){var e=aa(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function xv(n){return["html","body","#document"].indexOf(Co(n))>=0?n.ownerDocument.body:Eo(n)&&Mv(n)?n:xv(Lu(n))}function Tp(n,e){var t;void 0===e&&(e=[]);var r=xv(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),s=Us(r),l=i?[s].concat(s.visualViewport||[],Mv(r)?r:[]):r,c=e.concat(l);return i?c:c.concat(Tp(Lu(l)))}function Z1(n){return["table","td","th"].indexOf(Co(n))>=0}function Rv(n){return Eo(n)&&"fixed"!==aa(n).position?n.offsetParent:null}function Rh(n){for(var e=Us(n),t=Rv(n);t&&Z1(t)&&"static"===aa(t).position;)t=Rv(t);return t&&("html"===Co(t)||"body"===Co(t)&&"static"===aa(t).position)?e:t||function Ov(n){var e=/firefox/i.test(t_());if(/Trident/i.test(t_())&&Eo(n)&&"fixed"===aa(n).position)return null;var i=Lu(n);for(YD(i)&&(i=i.host);Eo(i)&&["html","body"].indexOf(Co(i))<0;){var s=aa(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(n)||e}function Y1(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&YD(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function r_(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function kv(n,e,t){return e===GD?r_(function QD(n,e){var t=Us(n),r=oa(n),i=t.visualViewport,s=r.clientWidth,l=r.clientHeight,c=0,p=0;if(i){s=i.width,l=i.height;var y=n_();(y||!y&&"fixed"===e)&&(c=i.offsetLeft,p=i.offsetTop)}return{width:s,height:l,x:c+xh(n),y:p}}(n,t)):Fu(e)?function Q1(n,e){var t=ud(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):r_(function JD(n){var e,t=oa(n),r=Mh(n),i=null==(e=n.ownerDocument)?void 0:e.body,s=ad(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=ad(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-r.scrollLeft+xh(n),p=-r.scrollTop;return"rtl"===aa(i||t).direction&&(c+=ad(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:l,x:c,y:p}}(oa(n)))}function Ri(n){return n.split("-")[1]}function Pv(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Fv(n){var p,e=n.reference,t=n.element,r=n.placement,i=r?gs(r):null,s=r?Ri(r):null,l=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2;switch(i){case Ji:p={x:l,y:e.y-t.height};break;case Bs:p={x:l,y:e.y+e.height};break;case wo:p={x:e.x+e.width,y:c};break;case Do:p={x:e.x-t.width,y:c};break;default:p={x:e.x,y:e.y}}var y=i?Pv(i):null;if(null!=y){var D="y"===y?"height":"width";switch(s){case sd:p[y]=p[y]-(e[D]/2-t[D]/2);break;case Dp:p[y]=p[y]+(e[D]/2-t[D]/2)}}return p}function eE(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function tE(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function Lv(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,s=e.strategy,l=void 0===s?n.strategy:s,c=e.boundary,p=void 0===c?"clippingParents":c,y=e.rootBoundary,D=void 0===y?GD:y,C=e.elementContext,M=void 0===C?Ep:C,R=e.altBoundary,F=void 0!==R&&R,H=e.padding,K=void 0===H?0:H,ve=eE("number"!=typeof K?K:tE(K,id)),ke=n.rects.popper,Ne=n.elements[F?M===Ep?"reference":Ep:M],je=function X1(n,e,t,r){var i="clippingParents"===e?function J1(n){var e=Tp(Lu(n)),r=["absolute","fixed"].indexOf(aa(n).position)>=0&&Eo(n)?Rh(n):n;return Fu(r)?e.filter(function(i){return Fu(i)&&Y1(i,r)&&"body"!==Co(i)}):[]}(n):[].concat(e),s=[].concat(i,[t]),c=s.reduce(function(p,y){var D=kv(n,y,r);return p.top=ad(D.top,p.top),p.right=Cp(D.right,p.right),p.bottom=Cp(D.bottom,p.bottom),p.left=ad(D.left,p.left),p},kv(n,s[0],r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}(Fu(Ne)?Ne:Ne.contextElement||oa(n.elements.popper),p,D,l),We=ud(n.elements.reference),ht=Fv({reference:We,element:ke,strategy:"absolute",placement:i}),Lt=r_(Object.assign({},ke,ht)),In=M===Ep?Lt:We,Un={top:je.top-In.top+ve.top,bottom:In.bottom-je.bottom+ve.bottom,left:je.left-In.left+ve.left,right:In.right-je.right+ve.right},Ir=n.modifiersData.offset;if(M===Ep&&Ir){var os=Ir[i];Object.keys(Un).forEach(function(Lr){var hc=[wo,Bs].indexOf(Lr)>=0?1:-1,fc=[Ji,Bs].indexOf(Lr)>=0?"y":"x";Un[Lr]+=os[fc]*hc})}return Un}const nN={name:"flip",enabled:!0,phase:"main",fn:function tN(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=void 0===i||i,l=t.altAxis,c=void 0===l||l,p=t.fallbackPlacements,y=t.padding,D=t.boundary,C=t.rootBoundary,M=t.altBoundary,R=t.flipVariations,F=void 0===R||R,H=t.allowedAutoPlacements,K=e.options.placement,ve=gs(K),ke=p||(ve!==K&&F?function eN(n){if(gs(n)===Pu)return[];var e=e_(n);return[HD(n),e,HD(e)]}(K):[e_(K)]),Ne=[K].concat(ke).reduce(function(Fn,ql){return Fn.concat(gs(ql)===Pu?function nE(n,e){void 0===e&&(e={});var i=e.boundary,s=e.rootBoundary,l=e.padding,c=e.flipVariations,p=e.allowedAutoPlacements,y=void 0===p?WD:p,D=Ri(e.placement),C=D?c?$D:$D.filter(function(F){return Ri(F)===D}):id,M=C.filter(function(F){return y.indexOf(F)>=0});0===M.length&&(M=C);var R=M.reduce(function(F,H){return F[H]=Lv(n,{placement:H,boundary:i,rootBoundary:s,padding:l})[gs(H)],F},{});return Object.keys(R).sort(function(F,H){return R[F]-R[H]})}(e,{placement:ql,boundary:D,rootBoundary:C,padding:y,flipVariations:F,allowedAutoPlacements:H}):ql)},[]),je=e.rects.reference,We=e.rects.popper,ht=new Map,Lt=!0,In=Ne[0],Un=0;Un<Ne.length;Un++){var Ir=Ne[Un],os=gs(Ir),Lr=Ri(Ir)===sd,hc=[Ji,Bs].indexOf(os)>=0,fc=hc?"width":"height",it=Lv(e,{placement:Ir,boundary:D,rootBoundary:C,altBoundary:M,padding:y}),pt=hc?Lr?wo:Do:Lr?Bs:Ji;je[fc]>We[fc]&&(pt=e_(pt));var At=e_(pt),Qt=[];if(s&&Qt.push(it[os]<=0),c&&Qt.push(it[pt]<=0,it[At]<=0),Qt.every(function(Fn){return Fn})){In=Ir,Lt=!1;break}ht.set(Ir,Qt)}if(Lt)for(var Lo=function(ql){var um=Ne.find(function(Yr){var Xs=ht.get(Yr);if(Xs)return Xs.slice(0,ql).every(function(ws){return ws})});if(um)return In=um,"break"},Ti=F?3:1;Ti>0&&"break"!==Lo(Ti);Ti--);e.placement!==In&&(e.modifiersData[r]._skip=!0,e.placement=In,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Oh(n,e,t){return ad(n,Cp(e,t))}function i_(n){var e=ud(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}const iN={name:"preventOverflow",enabled:!0,phase:"main",fn:function rN(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=void 0===i||i,l=t.altAxis,c=void 0!==l&&l,M=t.tether,R=void 0===M||M,F=t.tetherOffset,H=void 0===F?0:F,K=Lv(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),ve=gs(e.placement),Te=Ri(e.placement),ke=!Te,Ne=Pv(ve),je=function Ht(n){return"x"===n?"y":"x"}(Ne),We=e.modifiersData.popperOffsets,ht=e.rects.reference,Lt=e.rects.popper,In="function"==typeof H?H(Object.assign({},e.rects,{placement:e.placement})):H,Un="number"==typeof In?{mainAxis:In,altAxis:In}:Object.assign({mainAxis:0,altAxis:0},In),Ir=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,os={x:0,y:0};if(We){if(s){var Lr,hc="y"===Ne?Ji:Do,fc="y"===Ne?Bs:wo,it="y"===Ne?"height":"width",pt=We[Ne],At=pt+K[hc],Qt=pt-K[fc],Vr=R?-Lt[it]/2:0,Lo=Te===sd?ht[it]:Lt[it],Ti=Te===sd?-Lt[it]:-ht[it],va=e.elements.arrow,Fn=R&&va?i_(va):{width:0,height:0},ql=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},um=ql[hc],Yr=ql[fc],Xs=Oh(0,ht[it],Fn[it]),ws=ke?ht[it]/2-Vr-Xs-um-Un.mainAxis:Lo-Xs-um-Un.mainAxis,ev=ke?-ht[it]/2+Vr+Xs+Yr+Un.mainAxis:Ti+Xs+Yr+Un.mainAxis,cm=e.elements.arrow&&Rh(e.elements.arrow),IW=null!=(Lr=Ir?.[Ne])?Lr:0,uee=pt+ev-IW,SW=Oh(R?Cp(At,pt+ws-IW-(cm?"y"===Ne?cm.clientTop||0:cm.clientLeft||0:0)):At,pt,R?ad(Qt,uee):Qt);We[Ne]=SW,os[Ne]=SW-pt}if(c){var NW,dm=We[je],A1="y"===je?"height":"width",AW=dm+K["x"===Ne?Ji:Do],MW=dm-K["x"===Ne?Bs:wo],_F=-1!==[Ji,Do].indexOf(ve),xW=null!=(NW=Ir?.[je])?NW:0,RW=_F?AW:dm-ht[A1]-Lt[A1]-xW+Un.altAxis,OW=_F?dm+ht[A1]+Lt[A1]-xW-Un.altAxis:MW,kW=R&&_F?function rE(n,e,t){var r=Oh(n,e,t);return r>t?t:r}(RW,dm,OW):Oh(R?RW:AW,dm,R?OW:MW);We[je]=kW,os[je]=kW-dm}e.modifiersData[r]=os}},requiresIfExists:["offset"]},oN={name:"arrow",enabled:!0,phase:"main",fn:function sN(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,l=t.modifiersData.popperOffsets,c=gs(t.placement),p=Pv(c),D=[Do,wo].indexOf(c)>=0?"height":"width";if(s&&l){var C=function(e,t){return eE("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:tE(e,id))}(i.padding,t),M=i_(s),R="y"===p?Ji:Do,F="y"===p?Bs:wo,H=t.rects.reference[D]+t.rects.reference[p]-l[p]-t.rects.popper[D],K=l[p]-t.rects.reference[p],ve=Rh(s),Te=ve?"y"===p?ve.clientHeight||0:ve.clientWidth||0:0,We=Te/2-M[D]/2+(H/2-K/2),ht=Oh(C[R],We,Te-M[D]-C[F]);t.modifiersData[r]=((e={})[p]=ht,e.centerOffset=ht-We,e)}},effect:function sE(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||!Y1(e.elements.popper,i)||(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function aE(n,e,t){void 0===t&&(t=!1);var r=Eo(e),i=Eo(e)&&function oE(n){var e=n.getBoundingClientRect(),t=ld(e.width)/n.offsetWidth||1,r=ld(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),s=oa(e),l=ud(n,i,t),c={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!t)&&(("body"!==Co(e)||Mv(s))&&(c=function DF(n){return n!==Us(n)&&Eo(n)?function aN(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):Mh(n)}(e)),Eo(e)?((p=ud(e,!0)).x+=e.clientLeft,p.y+=e.clientTop):s&&(p.x=xh(s))),{x:l.left+c.scrollLeft-p.x,y:l.top+c.scrollTop-p.y,width:l.width,height:l.height}}function cd(n){var e=new Map,t=new Set,r=[];function i(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(c){if(!t.has(c)){var p=e.get(c);p&&i(p)}}),r.push(s)}return n.forEach(function(s){e.set(s.name,s)}),n.forEach(function(s){t.has(s.name)||i(s)}),r}function Vv(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var uN={placement:"bottom",modifiers:[],strategy:"absolute"};function cN(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function dN(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,s=void 0===i?uN:i;return function(c,p,y){void 0===y&&(y=s);var D={placement:"bottom",orderedModifiers:[],options:Object.assign({},uN,s),modifiersData:{},elements:{reference:c,popper:p},attributes:{},styles:{}},C=[],M=!1,R={state:D,setOptions:function(ve){var Te="function"==typeof ve?ve(D.options):ve;H(),D.options=Object.assign({},s,D.options,Te),D.scrollParents={reference:Fu(c)?Tp(c):c.contextElement?Tp(c.contextElement):[],popper:Tp(p)};var ke=function lN(n){var e=cd(n);return od.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function Bv(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,D.options.modifiers)));return D.orderedModifiers=ke.filter(function(Ir){return Ir.enabled}),function F(){D.orderedModifiers.forEach(function(K){var Te=K.options,Ne=K.effect;if("function"==typeof Ne){var je=Ne({state:D,name:K.name,instance:R,options:void 0===Te?{}:Te});C.push(je||function(){})}})}(),R.update()},forceUpdate:function(){if(!M){var ve=D.elements,Te=ve.reference,ke=ve.popper;if(cN(Te,ke)){D.rects={reference:aE(Te,Rh(ke),"fixed"===D.options.strategy),popper:i_(ke)},D.reset=!1,D.placement=D.options.placement,D.orderedModifiers.forEach(function(Ir){return D.modifiersData[Ir.name]=Object.assign({},Ir.data)});for(var je=0;je<D.orderedModifiers.length;je++)if(!0!==D.reset){var We=D.orderedModifiers[je],ht=We.fn,Lt=We.options;"function"==typeof ht&&(D=ht({state:D,options:void 0===Lt?{}:Lt,name:We.name,instance:R})||D)}else D.reset=!1,je=-1}}},update:Vv(function(){return new Promise(function(K){R.forceUpdate(),K(D)})}),destroy:function(){H(),M=!0}};if(!cN(c,p))return R;function H(){C.forEach(function(K){return K()}),C=[]}return R.setOptions(y).then(function(K){!M&&y.onFirstUpdate&&y.onFirstUpdate(K)}),R}}var Uv={passive:!0};const kh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function fN(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=void 0===i||i,l=r.resize,c=void 0===l||l,p=Us(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&y.forEach(function(D){D.addEventListener("scroll",t.update,Uv)}),c&&p.addEventListener("resize",t.update,Uv),function(){s&&y.forEach(function(D){D.removeEventListener("scroll",t.update,Uv)}),c&&p.removeEventListener("resize",t.update,Uv)}},data:{}},lE={name:"popperOffsets",enabled:!0,phase:"read",fn:function pN(n){var e=n.state;e.modifiersData[n.name]=Fv({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var s_={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jv(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,l=n.offsets,c=n.position,p=n.gpuAcceleration,y=n.adaptive,D=n.roundOffsets,C=n.isFixed,M=l.x,R=void 0===M?0:M,F=l.y,H=void 0===F?0:F,K="function"==typeof D?D({x:R,y:H}):{x:R,y:H};R=K.x,H=K.y;var ve=l.hasOwnProperty("x"),Te=l.hasOwnProperty("y"),ke=Do,Ne=Ji,je=window;if(y){var We=Rh(t),ht="clientHeight",Lt="clientWidth";We===Us(t)&&"static"!==aa(We=oa(t)).position&&"absolute"===c&&(ht="scrollHeight",Lt="scrollWidth"),(i===Ji||(i===Do||i===wo)&&s===Dp)&&(Ne=Bs,H-=(C&&We===je&&je.visualViewport?je.visualViewport.height:We[ht])-r.height,H*=p?1:-1),i!==Do&&(i!==Ji&&i!==Bs||s!==Dp)||(ke=wo,R-=(C&&We===je&&je.visualViewport?je.visualViewport.width:We[Lt])-r.width,R*=p?1:-1)}var Lr,Ir=Object.assign({position:c},y&&s_),os=!0===D?function gN(n){var t=n.y,i=window.devicePixelRatio||1;return{x:ld(n.x*i)/i||0,y:ld(t*i)/i||0}}({x:R,y:H}):{x:R,y:H};return R=os.x,H=os.y,Object.assign({},Ir,p?((Lr={})[Ne]=Te?"0":"",Lr[ke]=ve?"0":"",Lr.transform=(je.devicePixelRatio||1)<=1?"translate("+R+"px, "+H+"px)":"translate3d("+R+"px, "+H+"px, 0)",Lr):((e={})[Ne]=Te?H+"px":"",e[ke]=ve?R+"px":"",e.transform="",e))}const _N={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function mN(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,s=t.adaptive,l=void 0===s||s,c=t.roundOffsets,p=void 0===c||c,D={placement:gs(e.placement),variation:Ri(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,jv(Object.assign({},D,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:p})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,jv(Object.assign({},D,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var uE=[kh,lE,_N,{name:"applyStyles",enabled:!0,phase:"write",fn:function yN(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Eo(s)||!Co(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(l){var c=i[l];!1===c?s.removeAttribute(l):s.setAttribute(l,!0===c?"":c)}))})},effect:function vN(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},c=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(p,y){return p[y]="",p},{});!Eo(i)||!Co(i)||(Object.assign(i.style,c),Object.keys(s).forEach(function(p){i.removeAttribute(p)}))})}},requires:["computeStyles"]}],bN=dN({defaultModifiers:uE});const Hv={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function dE(n){var e=n.state,r=n.name,i=n.options.offset,s=void 0===i?[0,0]:i,l=WD.reduce(function(D,C){return D[C]=function cE(n,e,t){var r=gs(n),i=[Do,Ji].indexOf(r)>=0?-1:1,s="function"==typeof t?t(Object.assign({},e,{placement:n})):t,l=s[0],c=s[1];return l=l||0,c=(c||0)*i,[Do,wo].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}(C,e.rects,s),D},{}),c=l[e.placement],y=c.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c.x,e.modifiersData.popperOffsets.y+=y),e.modifiersData[r]=l}},To=["*"],PF=["dialog"];function UF(n,e){if(1&n&&d._uU(0),2&n){const t=d.oxw(2);d.Oqu(t.title)}}function PN(n,e){}function SE(n,e){if(1&n&&(d.TgZ(0,"h3",3),d.YNc(1,UF,1,1,"ng-template",null,4,d.W1O),d.YNc(3,PN,0,0,"ng-template",5),d.qZA()),2&n){const t=d.MAs(2),r=d.oxw();d.xp6(3),d.Q6J("ngTemplateOutlet",r.isTitleTemplate()?r.title:t)("ngTemplateOutletContext",r.context)}}function c_(n){return"string"==typeof n}function dd(n){return null!=n}function Uu(n){return(n||document.body).getBoundingClientRect()}const l0={animation:!0,transitionTimerDelayMs:5},FE=()=>{},{transitionTimerDelayMs:u0}=l0,js=new Map,oi=(n,e,t,r)=>{let i=r.context||{};const s=js.get(e);if(s)switch(r.runningTransition){case"continue":return ri.E;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),js.delete(e)}const l=t(e,r.animation,i)||FE;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>l()),Je(void 0).pipe(function JF(n){return e=>new rr.y(t=>e.subscribe({next:l=>n.run(()=>t.next(l)),error:l=>n.run(()=>t.error(l)),complete:()=>n.run(()=>t.complete())}))}(n));const c=new nn.x,p=new nn.x,y=c.pipe(function Et(...n){return e=>kt(e,Je(...n))}(!0));js.set(e,{transition$:c,complete:()=>{p.next(),p.complete()},context:i});const D=function PE(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const C=Gn(e,"transitionend").pipe(Jt(y),En(({target:R})=>R===e));Zi(ch(D+u0).pipe(Jt(y)),C,p).pipe(Jt(y)).subscribe(()=>{js.delete(e),n.run(()=>{l(),c.next(),c.complete()})})}),c.asObservable()};let hd=(()=>{class n{constructor(){this.animation=l0.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),h_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),g_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),Bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var wr=(()=>{return(n=wr||(wr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",wr;var n})();const Gh=(n,e)=>!!e&&e.some(t=>t.contains(n)),f0=(n,e)=>!e||null!=function QF(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}(n,e),XE=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const m0=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function m_(n){const e=Array.from(n.querySelectorAll(m0)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const oA=/\s+/,tC=/  +/gi,nC={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},iC=/^left/,aA=/^right/,sC=/^start/,oC=/^end/;function Vp({placement:n,baseClass:e},t){let r=Array.isArray(n)?n:n.split(oA),s=r.findIndex(y=>"auto"===y);s>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(y){null==r.find(D=>-1!==D.search("^"+y))&&r.splice(s++,1,y)});const l=r.map(y=>function rC(n,e){const[t,r]=nC[n];return e&&r||t}(y,t.isRTL()));return{placement:l.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:y}){const D=new RegExp(e+"(-[a-z]+)*","gi"),C=y.elements.popper,M=y.placement;let R=C.className;R=R.replace(D,""),R+=` ${function _0(n,e){let[t,r]=e.split("-");const i=t.replace(iC,"start").replace(aA,"end");let s=[i];if(r){let l=r;("left"===t||"right"===t)&&(l=l.replace(sC,"top").replace(oC,"bottom")),s.push(`${i}-${l}`)}return n&&(s=s.map(l=>`${n}-${l}`)),s.join(" ")}(e,M)}`,R=R.trim().replace(tC," "),C.className=R}},nN,iN,oN,{enabled:!0,name:"flip",options:{fallbackPlacements:l}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function y0(n){return n}let w0=(()=>{class n{constructor(t){this._element=t.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new Date(1882,10,12),new Date(2174,10,25);let hC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr,U1]}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),gC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class md{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class mC{constructor(e,t,r,i,s,l){this._componentType=e,this._injector=t,this._viewContainerRef=r,this._renderer=i,this._ngZone=s,this._applicationRef=l,this._windowRef=null,this._contentRef=null}open(e,t,r=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:i}=this._windowRef.location,s=this._ngZone.onStable.pipe(Bn(1),(0,Vn.z)(()=>oi(this._ngZone,i,({classList:l})=>l.add("show"),{animation:r,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?oi(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe((0,kn.b)(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Je(void 0)}_getContentRef(e,t){if(e){if(e instanceof d.Rgc){const r=e.createEmbeddedView(t);return this._applicationRef.attachView(r),new md([r.rootNodes],r)}return new md([[this._renderer.createText(`${e}`)]])}return new md([])}}let _C=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{oi(this._zone,this._el.nativeElement,(t,r)=>{r&&Uu(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return oi(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class T0{close(e){}dismiss(e){}}class yC{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new nn.x,this._dismissed=new nn.x,this._hidden=new nn.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,l)=>{this._resolve=s,this._reject=l}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Jt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Jt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function OE(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Je(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Se(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var $h=(()=>{return(n=$h||($h={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",$h;var n})();let vC=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new nn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new nn.x,this.hidden=new nn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":c_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},l=Se(oi(this._zone,t,()=>t.classList.remove("show"),r),oi(this._zone,this._dialogEl.nativeElement,()=>{},r));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const t={animation:this.animation,runningTransition:"continue"};Se(oi(this._zone,this._elRef.nativeElement,(s,l)=>{l&&Uu(s),s.classList.add("show")},t),oi(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Gn(t,"keydown").pipe(Jt(this._closed$),En(i=>i.which===wr.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss($h.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Gn(this._dialogEl.nativeElement,"mousedown").pipe(Jt(this._closed$),(0,kn.b)(()=>r=!1),mn(()=>Gn(t,"mouseup").pipe(Jt(this._closed$),Bn(1))),En(({target:i})=>t===i)).subscribe(()=>{r=!0}),Gn(t,"click").pipe(Jt(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss($h.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=m_(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&oi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ue),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(PF,7),2&t){let i;d.iGM(i=d.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:To,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1)(2,"div",2),d.Hsn(3),d.qZA()()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),bC=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:l}=i;if(t>0){const c=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${c+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=l),i.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wC=(()=>{class n{constructor(t,r,i,s,l,c){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=s,this._rendererFactory=l,this._ngZone=c,this._activeWindowCmptHasChanged=new nn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const p=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Gn(e,"focusin").pipe(Jt(t),(0,ct.U)(s=>s.target));Gn(e,"keydown").pipe(Jt(t),En(s=>s.which===wr.Tab),fs(i)).subscribe(([s,l])=>{const[c,p]=m_(e);(l===c||l===e)&&s.shiftKey&&(p.focus(),s.preventDefault()),l===p&&!s.shiftKey&&(c.focus(),s.preventDefault())}),r&&Gn(e,"click").pipe(Jt(t),fs(i),(0,ct.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,p.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(p.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:dd(i.container)?this._document.querySelector(i.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const c=new T0,p=this._getContentRef(i.injector||t,r,c,i);let y=!1!==i.backdrop?this._attachBackdrop(s):void 0,D=this._attachWindowComponent(s,p.nodes),C=new yC(D,p,y,i.beforeDismiss);return this._registerModalRef(C),this._registerWindowCmpt(D),C.hidden.pipe(Bn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),c.close=M=>{C.close(M)},c.dismiss=M=>{C.dismiss(M)},this._applyWindowOptions(D.instance,i),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,i),y.changeDetectorRef.detectChanges()),D.changeDetectorRef.detectChanges(),C}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,d.LMc)(_C,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,d.LMc)(vC,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{dd(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{dd(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,s){return r?r instanceof d.Rgc?this._createFromTemplateRef(r,i):c_(r)?this._createFromString(r):this._createFromComponent(t,r,i,s):new md([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(l){r.close(l)},dismiss(l){r.dismiss(l)}});return this._applicationRef.attachView(s),new md([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new md([[r]])}_createFromComponent(t,r,i,s){const l=d.zs3.create({providers:[{provide:T0,useValue:i}],parent:t}),c=(0,d.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:l}),p=c.location.nativeElement;return s.scrollable&&p.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new md([[p]],c.hostView,c)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(ue),d.LFG(bC),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DC=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hd))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I0=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(wC),d.LFG(DC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[I0]}),n})(),NC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),A0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})();class MC{constructor(e,t){this.open=e,this.close=t,t||(this.close=e)}isManual(){return"manual"===this.open||"manual"===this.close}}const xC={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},OC=n=>n>0?Em(n):e=>e;let VA=(()=>{class n{constructor(t){this._ngbConfig=t,this.autoClose=!0,this.placement="auto",this.popperOptions=r=>r,this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hd))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BA=0,UA=(()=>{class n{isTitleTemplate(){return this.title instanceof d.Rgc}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(t,r){2&t&&(d.Ikx("id",r.id),d.Tol("popover"+(r.popoverClass?" "+r.popoverClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:To,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(d.F$t(),d._UZ(0,"div",0),d.YNc(1,SE,4,2,"h3",1),d.TgZ(2,"div",2),d.Hsn(3),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.title))},dependencies:[jn,oo],encapsulation:2,changeDetection:0}),n})(),E_=(()=>{class n{constructor(t,r,i,s,l,c,p,y,D,C){this._elementRef=t,this._renderer=i,this._ngZone=p,this._document=y,this._changeDetector=D,this.shown=new d.vpe,this.hidden=new d.vpe,this._ngbPopoverWindowId="ngb-popover-"+BA++,this._windowRef=null,this.animation=c.animation,this.autoClose=c.autoClose,this.placement=c.placement,this.popperOptions=c.popperOptions,this.triggers=c.triggers,this.container=c.container,this.disablePopover=c.disablePopover,this.popoverClass=c.popoverClass,this.openDelay=c.openDelay,this.closeDelay=c.closeDelay,this._positioning=function v0(n){let e=null;return{createPopper(t){if(!e){let i=(t.updatePopperOptions||y0)(Vp(t,n));e=bN(t.hostElement,t.targetElement,i)}},update(){e&&e.update()},setOptions(t){if(e){let i=(t.updatePopperOptions||y0)(Vp(t,n));e.setOptions(i)}},destroy(){e&&(e.destroy(),e=null)}}}(r),this._popupService=new mC(UA,s,l,i,this._ngZone,C)}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(t){if(!this._windowRef&&!this._isDisabled()){const{windowRef:r,transition$:i}=this._popupService.open(this.ngbPopover,t,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",t),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._renderer.setAttribute(this._getPositionTargetElement(),"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:s=>this.popperOptions(function b0(n){return e=>(e.modifiers.push(Hv,{name:"offset",options:{offset:()=>n}}),e)}([0,8])(s))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),function g0(n,e,t,r,i,s,l,c){t&&n.runOutsideAngular((n=>XE?()=>setTimeout(()=>n(),100):n)(()=>{const y=Gn(e,"keydown").pipe(Jt(i),En(M=>M.which===wr.Escape),(0,kn.b)(M=>M.preventDefault())),D=Gn(e,"mousedown").pipe((0,ct.U)(M=>{const R=M.target;return 2!==M.button&&!Gh(R,l)&&("inside"===t?Gh(R,s)&&f0(R,c):"outside"===t?!Gh(R,s):f0(R,c)||!Gh(R,s))}),Jt(i)),C=Gn(e,"mouseup").pipe(fs(D),En(([M,R])=>R),Em(0),Jt(i));Zi([y.pipe((0,ct.U)(M=>0)),C.pipe((0,ct.U)(M=>1))]).subscribe(M=>n.run(()=>r(M)))}))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),i.subscribe(()=>this.shown.emit())}}close(t=this.animation){this._windowRef&&(this._renderer.removeAttribute(this._getPositionTargetElement(),"aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function qp(n,e,t,r,i,s,l=0,c=0){const p=function RC(n,e=xC){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(s=>s.split(":")).map(s=>{let l=e[s[0]]||s;return new MC(l[0],l[1])}),i=r.filter(s=>s.isManual());if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===i.length&&r.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r}(t);if(1===p.length&&p[0].isManual())return()=>{};const y=function FA(n,e,t,r){return new rr.y(i=>{const s=[],l=()=>i.next(!0),c=()=>i.next(!1),p=()=>i.next(!r());return t.forEach(y=>{y.open===y.close?s.push(n.listen(e,y.open,p)):s.push(n.listen(e,y.open,l),n.listen(e,y.close,c))}),()=>{s.forEach(y=>y())}})}(n,e,p,r).pipe(function LA(n,e,t){return r=>{let i=null;const s=r.pipe((0,ct.U)(p=>({open:p})),En(p=>{const y=t();return y===p.open||i&&i.open!==y?(i&&i.open!==p.open&&(i=null),!1):(i=p,!0)}),(0,Mu.B)()),l=s.pipe(En(p=>p.open),OC(n)),c=s.pipe(En(p=>!p.open),OC(e));return(0,qe.T)(l,c).pipe(En(p=>p===i&&(i=null,p.open!==t())),(0,ct.U)(p=>p.open))}}(l,c,r)).subscribe(D=>D?i():s());return()=>y.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:t,popoverTitle:r,disablePopover:i,popoverClass:s}){s&&this.isOpen()&&(this._windowRef.instance.popoverClass=s.currentValue),(t||r||i)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(c_(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(w0),d.Y36(d.Qsj),d.Y36(d.zs3),d.Y36(d.s_b),d.Y36(VA),d.Y36(d.R0b),d.Y36(ue),d.Y36(d.sBO),d.Y36(d.z2F))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[d.TTD]}),n})(),M0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),kC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),PC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),qA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),LC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),VC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function QA(){return 100}});let R0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mr]}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const nM=[HE,h_,g_,Bh,hC,gC,S0,NC,UC,A0,M0,kC,PC,qA,LC,VC,R0];let O0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[nM,HE,h_,g_,Bh,hC,gC,S0,NC,UC,A0,M0,kC,PC,qA,LC,VC,R0]}),n})();const Kp=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function jC(n){return new rr.y(e=>{(0,Ki.Xf)(n()).subscribe(e)})}var iM=V(9635);function Zp(n,e){const t=(0,yi.m)(n)?n:()=>n,r=i=>i.error(t());return new rr.y(e?i=>e.schedule(r,0,i):r)}var HC=V(727);function k0(){return(0,Bt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class GC extends rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new HC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=HC.w0.EMPTY)}return e}refCount(){return k0()(this)}}function N_(n){return(0,Bt.e)((e,t)=>{let r=!1;e.subscribe((0,vn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $C(n=WC){return(0,Bt.e)((e,t)=>{let r=!1;e.subscribe((0,vn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function WC(){return new Kp}function Ga(n,e){const t=arguments.length>=2;return r=>r.pipe(n?En((i,s)=>n(i,s,r)):na.y,Bn(1),t?N_(e):$C(()=>new Kp))}function $u(n,e){return(0,yi.m)(e)?(0,Vn.z)(n,e,1):(0,Vn.z)(n,1)}function Wu(n){return(0,Bt.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,vn.x)(t,void 0,void 0,l=>{s=(0,Ki.Xf)(n(l,Wu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function P0(n,e,t,r,i){return(s,l)=>{let c=t,p=e,y=0;s.subscribe((0,vn.x)(l,D=>{const C=y++;p=c?n(p,D,C):(c=!0,D),r&&l.next(p)},i&&(()=>{c&&l.next(p),l.complete()})))}}function zu(n,e){return(0,Bt.e)(P0(n,e,arguments.length>=2,!0))}function F0(n){return n<=0?()=>ri.E:(0,Bt.e)((e,t)=>{let r=[];e.subscribe((0,vn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?En((i,s)=>n(i,s,r)):na.y,F0(1),t?N_(e):$C(()=>new Kp))}function Yp(n){return(0,Bt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",bd=Symbol("RouteTitle");class sM{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wh(n){return new sM(n)}function V0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],c=n[s];if(l.startsWith(":"))i[l.substring(1)]=c;else if(l!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ua(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!wd(n[i],e[i]))return!1;return!0}function wd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function B0(n){return Array.prototype.concat.apply([],n)}function qC(n){return n.length>0?n[n.length-1]:null}function li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $a(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,ln.D)(Promise.resolve(n)):Je(n)}const aM={exact:function G0(n,e,t){if(!qu(n.segments,e.segments)||!M_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!G0(n.children[r],e.children[r],t))return!1;return!0},subset:$0},H0={exact:function KC(n,e){return ua(n,e)},subset:function ZC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wd(n[t],e[t]))},ignored:()=>!0};function A_(n,e,t){return aM[t.paths](n.root,e.root,t.matrixParams)&&H0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $0(n,e,t){return YC(n,e,e.segments,t)}function YC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qu(i,t)||e.hasChildren()||!M_(i,t,r))}if(n.segments.length===t.length){if(!qu(n.segments,t)||!M_(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!$0(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(qu(n.segments,i)&&M_(n.segments,i,r)&&n.children[Zt])&&YC(n.children[Zt],e,s,r)}}function M_(n,e,t){return e.every((r,i)=>H0[t](n[i].parameters,r.parameters))}class Dd{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wh(this.queryParams)),this._queryParamMap}toString(){return $L.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x_(this)}}class zh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wh(this.parameters)),this._parameterMap}toString(){return nT(this)}}function qu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let QC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new JC},providedIn:"root"}),n})();class JC{parse(e){const t=new aT(e);return new Dd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qp(e.root,!0)}`,r=function cM(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Jp(t)}=${Jp(i)}`).join("&"):`${Jp(t)}=${Jp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function eT(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $L=new JC;function x_(n){return n.segments.map(e=>nT(e)).join("/")}function Qp(n,e){if(!n.hasChildren())return x_(n);if(e){const t=n.children[Zt]?Qp(n.children[Zt],!1):"",r=[];return li(n.children,(i,s)=>{s!==Zt&&r.push(`${s}:${Qp(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lM(n,e){let t=[];return li(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),li(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Qp(n.children[Zt],!1)]:[`${i}:${Qp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${x_(n)}/${t[0]}`:`${x_(n)}/(${t.join("//")})`}}function XC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jp(n){return XC(n).replace(/%3B/gi,";")}function R_(n){return XC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function O_(n){return decodeURIComponent(n)}function tT(n){return O_(n.replace(/\+/g,"%20"))}function nT(n){return`${R_(n.path)}${function uM(n){return Object.keys(n).map(e=>`;${R_(e)}=${R_(n[e])}`).join("")}(n.parameters)}`}const dM=/^[^\/()?;=#]+/;function Ku(n){const e=n.match(dM);return e?e[0]:""}const rT=/^[^=?&#]+/,sT=/^[^&#]+/;class aT{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Xt(e,t)),r}parseSegment(){const e=Ku(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new zh(O_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ku(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ku(this.remaining);i&&(r=i,this.capture(r))}e[O_(t)]=O_(r)}parseQueryParam(e){const t=function iT(n){const e=n.match(rT);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function oT(n){const e=n.match(sT);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=tT(t),s=tT(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ku(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Zt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function W0(n){return n.segments.length>0?new Xt([],{[Zt]:n}):n}function k_(n){const e={};for(const r of Object.keys(n.children)){const s=k_(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function WL(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Ed(n){return n instanceof Dd}function Xp(n,e,t,r,i){if(0===t.length)return Xi(e.root,e.root,e.root,r,i);const s=function qh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new P_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return li(s.outlets,(p,y)=>{c[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((c,p)=>{0==p&&"."===c||(0==p&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new P_(t,e,r)}(t);return s.toRoot()?Xi(e.root,e.root,new Xt([],{}),r,i):function l(p){const y=function gM(n,e,t,r){if(n.isAbsolute)return new Kh(e.root,!0,0);if(-1===r)return new Kh(t,t===e.root,0);return function tg(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Kh(r,!1,i-s)}(t,r+(eg(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),D=y.processChildren?ng(y.segmentGroup,y.index,s.commands):q0(y.segmentGroup,y.index,s.commands);return Xi(e.root,y.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function eg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cd(n){return"object"==typeof n&&null!=n&&n.outlets}function Xi(n,e,t,r,i){let l,s={};r&&li(r,(p,y)=>{s[y]=Array.isArray(p)?p.map(D=>`${D}`):`${p}`}),l=n===e?t:lT(n,e,t);const c=W0(k_(l));return new Dd(c,s,i)}function lT(n,e,t){const r={};return li(n.children,(i,s)=>{r[s]=i===e?t:lT(i,e,t)}),new Xt(n.segments,r)}class P_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eg(r[0]))throw new d.vHH(4003,!1);const i=r.find(Cd);if(i&&i!==qC(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function q0(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return ng(n,e,t);const r=function uT(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],c=t[r];if(Cd(c))break;const p=`${c}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!cT(p,y,l))return s;r+=2}else{if(!cT(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Xt(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new Xt(n.segments.slice(r.pathIndex),n.children),ng(s,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?L_(n,e,t):r.match?ng(n,0,i):L_(n,e,t)}function ng(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function F_(n){return Cd(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return li(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=q0(n.children[l],e,s))}),li(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new Xt(n.segments,i)}}function L_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Cd(s)){const p=K0(s.outlets);return new Xt(r,p)}if(0===i&&eg(t[0])){r.push(new zh(n.segments[e].path,Z0(t[0]))),i++;continue}const l=Cd(s)?s.outlets[Zt]:`${s}`,c=i<t.length-1?t[i+1]:null;l&&c&&eg(c)?(r.push(new zh(l,Z0(c))),i+=2):(r.push(new zh(l,{})),i++)}return new Xt(r,{})}function K0(n){const e={};return li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=L_(new Xt([],{}),0,t))}),e}function Z0(n){const e={};return li(n,(t,r)=>e[r]=`${t}`),e}function cT(n,e,t){return n==t.path&&ua(e,t.parameters)}class Fl{constructor(e,t){this.id=e,this.url=t}}class dT extends Fl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ll extends Fl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zh extends Fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y0 extends Fl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q0 extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J0 extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mM extends Fl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _M extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yM extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vM{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class X0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pT{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=V_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=V_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nb(e,this._root).map(t=>t.value)}}function V_(n,e){if(n===e.value)return e;for(const t of e.children){const r=V_(n,t);if(r)return r}return null}function nb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=nb(n,t);if(r.length)return r.unshift(e),r}return[]}class Wa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Td(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Oi extends tb{constructor(e,t){super(e),this.snapshot=t,Sd(this,e)}toString(){return this.snapshot.toString()}}function Id(n,e){const t=function wM(n,e){const l=new rg([],{},{},"",{},Zt,e,null,n.root,-1,{});return new rb("",new Wa(l,[]))}(n,e),r=new Yn([new zh("",{})]),i=new Yn({}),s=new Yn({}),l=new Yn({}),c=new Yn(""),p=new Zu(r,i,l,c,s,Zt,e,t.root);return p.snapshot=t.root,new Oi(new Wa(p,[]),t)}class Zu{constructor(e,t,r,i,s,l,c,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=c,this.title=this.data?.pipe((0,ct.U)(y=>y[bd]))??Je(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(e=>Wh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(e=>Wh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function qL(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rg{constructor(e,t,r,i,s,l,c,p,y,D,C,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=c,this.title=this.data?.[bd],this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=D,this._correctedLastPathIndex=M??D,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rb extends tb{constructor(e,t){super(t),this.url=e,Sd(this,t)}toString(){return mT(this._root)}}function Sd(n,e){e.value._routerState=n,e.children.forEach(t=>Sd(n,t))}function mT(n){const e=n.children.length>0?` { ${n.children.map(mT).join(", ")} } `:"";return`${n.value}${e}`}function ig(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ua(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ua(e.params,t.params)||n.params.next(t.params),function oM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ua(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ua(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ib(n,e){const t=ua(n.params,e.params)&&function GL(n,e){return qu(n,e)&&n.every((t,r)=>ua(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ib(n.parent,e.parent))}function sg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function EM(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sg(n,r,i);return sg(n,r)})}(n,e,t);return new Wa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(c=>sg(n,c)),l}}const r=function CM(n){return new Zu(new Yn(n.url),new Yn(n.params),new Yn(n.queryParams),new Yn(n.fragment),new Yn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>sg(n,s));return new Wa(r,i)}}const og="ngNavigationCancelingError";function sb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ed(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ob(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ob(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[og]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ag(n){return B_(n)&&Ed(n.url)}function B_(n){return n&&n[og]}class KL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Yh,this.attachRef=null}}let Yh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new KL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const U_=!1;let j_=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,U_);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,U_);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,U_);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,U_);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,p=new Qh(t,c,i.injector);if(r&&function TM(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yh),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Qh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zu?this.route:e===Yh?this.childContexts:this.parent.get(e,t)}}let H_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[j_],encapsulation:2}),n})();function G_(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lb(n){const e=n.children&&n.children.map(lb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=H_),t}function Gs(n){return n.outlet||Zt}function ub(n,e){const t=n.filter(r=>Gs(r)===e);return t.push(...n.filter(r=>Gs(r)!==e)),t}function lg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class bT{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ig(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Td(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),li(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Td(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Td(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Td(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gT(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ig(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),ig(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=lg(i.snapshot),p=c?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=c,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class wT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ug{constructor(e,t){this.component=e,this.route=t}}function DT(n,e,t){const r=n._root;return cg(r,e?e._root:null,t,[r.value])}function Nd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function cg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Td(e);return n.children.forEach(l=>{(function NM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function QL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qu(n.url,e.url)||!ua(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ib(n,e)||!ua(n.queryParams,e.queryParams);default:return!ib(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new wT(r)):(s.data=l.data,s._resolvedData=l._resolvedData),cg(n,e,s.component?c?c.children:null:t,r,i),p&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ug(c.outlet.component,l))}else l&&Jh(e,c,i),i.canActivateChecks.push(new wT(r)),cg(n,null,s.component?c?c.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),li(s,(l,c)=>Jh(l,t.getContext(c),i)),i}function Jh(n,e,t){const r=Td(n),i=n.value;li(r,(s,l)=>{Jh(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ug(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $_(n){return"function"==typeof n}function CT(n){return n instanceof Kp||"EmptyError"===n?.name}const dg=Symbol("INITIAL_VALUE");function Vl(){return mn(n=>I(n.map(e=>e.pipe(Bn(1),bi(dg)))).pipe((0,ct.U)(e=>{for(const t of e)if(!0!==t){if(t===dg)return dg;if(!1===t||t instanceof Dd)return t}return!0}),En(e=>e!==dg),Bn(1)))}function AT(n){return(0,iM.z)((0,kn.b)(e=>{if(Ed(e))throw sb(0,e)}),(0,ct.U)(e=>!0===e))}const Xh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MT(n,e,t,r,i){const s=xT(n,e,t);return s.matched?function xM(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(l=>{const c=Nd(l,n);return $a(function rV(n){return n&&$_(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))})).pipe(Vl(),AT()):Je(!0)}(r=G_(e,r),e,t).pipe((0,ct.U)(l=>!0===l?s:{...Xh})):Je(s)}function xT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Xh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||V0)(t,n,e);if(!i)return{...Xh};const s={};li(i.posParams,(c,p)=>{s[p]=c.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function db(n,e,t,r,i="corrected"){if(t.length>0&&function OM(n,e,t){return t.some(r=>hb(n,e,r)&&Gs(r)!==Zt)}(n,t,r)){const l=new Xt(e,function RM(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Gs(s)!==Zt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Gs(s)]=l}return i}(n,e,r,new Xt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function kM(n,e,t){return t.some(r=>hb(n,e,r))}(n,t,r)){const l=new Xt(n.segments,function oV(n,e,t,r,i,s){const l={};for(const c of r)if(hb(n,t,c)&&!i[Gs(c)]){const p=new Xt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Gs(c)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new Xt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function hb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RT(n,e,t,r){return!!(Gs(n)===r||r!==Zt&&hb(e,t,n))&&("**"===n.path||xT(e,n,t).matched)}function fb(n,e,t){return 0===e.length&&!n.children[t]}const hg=!1;class pb{constructor(e){this.segmentGroup=e||null}}class Mo{constructor(e){this.urlTree=e}}function fg(n){return Zp(new pb(n))}function z_(n){return Zp(new Mo(n))}class gb{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=db(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,ct.U)(s=>this.createUrlTree(k_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wu(s=>{if(s instanceof Mo)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof pb?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,ct.U)(i=>this.createUrlTree(k_(i),e.queryParams,e.fragment))).pipe(Wu(i=>{throw i instanceof pb?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,hg)}createUrlTree(e,t,r){const i=W0(e);return new Dd(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ct.U)(s=>new Xt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,ln.D)(i).pipe($u(s=>{const l=r.children[s],c=ub(t,s);return this.expandSegmentGroup(e,c,l,s).pipe((0,ct.U)(p=>({segment:p,outlet:s})))}),zu((s,l)=>(s[l.outlet]=l.segment,s),{}),zC())}expandSegment(e,t,r,i,s,l){return(0,ln.D)(r).pipe($u(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,s,l).pipe(Wu(y=>{if(y instanceof pb)return Je(null);throw y}))),Ga(c=>!!c),Wu((c,p)=>{if(CT(c))return fb(t,i,s)?Je(new Xt([],{})):fg(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,s,l,c){return RT(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):fg(t):fg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?z_(s):this.lineralizeSegments(r,s).pipe((0,Vn.z)(l=>{const c=new Xt(l,{});return this.expandSegment(e,c,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:c,consumedSegments:p,remainingSegments:y,positionalParamSegments:D}=xT(t,i,s);if(!c)return fg(t);const C=this.applyRedirectCommands(p,i.redirectTo,D);return i.redirectTo.startsWith("/")?z_(C):this.lineralizeSegments(i,C).pipe((0,Vn.z)(M=>this.expandSegment(e,t,r,M.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=G_(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ct.U)(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new Xt(i,{})))):Je(new Xt(i,{}))):MT(t,r,i,e).pipe(mn(({matched:l,consumedSegments:c,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Vn.z)(D=>{const C=D.injector??e,M=D.routes,{segmentGroup:R,slicedSegments:F}=db(t,c,p,M),H=new Xt(R.segments,R.children);if(0===F.length&&H.hasChildren())return this.expandChildren(C,M,H).pipe((0,ct.U)(ke=>new Xt(c,ke)));if(0===M.length&&0===F.length)return Je(new Xt(c,{}));const K=Gs(r)===s;return this.expandSegment(C,H,M,F,K?Zt:s,!0).pipe((0,ct.U)(Te=>new Xt(c.concat(Te.segments),Te.children)))})):fg(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function MM(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(l=>{const c=Nd(l,n);return $a(function XL(n){return n&&$_(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))})).pipe(Vl(),AT())}(e,t,r).pipe((0,Vn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,kn.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function xo(n){return Zp(ob(hg,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[Zt])return Zp(new d.vHH(4e3,hg));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Dd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return li(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[s]=t[c]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return li(t.children,(c,p)=>{l[p]=this.createSegmentGroup(e,c,r,i)}),new Xt(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,hg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class mb{}class VM{constructor(e,t,r,i,s,l,c,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=c,this.urlSerializer=p}recognize(){const e=db(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,ct.U)(t=>{if(null===t)return null;const r=new rg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Wa(r,t),s=new rb(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=DM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe($u(i=>{const s=r.children[i],l=ub(t,i);return this.processSegmentGroup(e,l,s,i)}),zu((i,s)=>i&&s?(i.push(...s),i):null),function L0(n,e=!1){return(0,Bt.e)((t,r)=>{let i=0;t.subscribe((0,vn.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),N_(null),zC(),(0,ct.U)(i=>{if(null===i)return null;const s=_b(i);return function PT(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,ln.D)(t).pipe($u(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),Ga(l=>!!l),Wu(l=>{if(CT(l))return fb(r,i,s)?Je([]):Je(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!RT(t,r,i,s))return Je(null);let l;if("**"===t.path){const c=i.length>0?qC(i).parameters:{},p=Bl(r)+i.length;l=Je({snapshot:new rg(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Z_(t),Gs(t),t.component??t._loadedComponent??null,t,K_(r),p,za(t),p),consumedSegments:[],remainingSegments:[]})}else l=MT(r,t,i,e).pipe((0,ct.U)(({matched:c,consumedSegments:p,remainingSegments:y,parameters:D})=>{if(!c)return null;const C=Bl(r)+p.length;return{snapshot:new rg(p,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Z_(t),Gs(t),t.component??t._loadedComponent??null,t,K_(r),C,za(t),C),consumedSegments:p,remainingSegments:y}}));return l.pipe(mn(c=>{if(null===c)return Je(null);const{snapshot:p,consumedSegments:y,remainingSegments:D}=c;e=t._injector??e;const C=t._loadedInjector??e,M=function FT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:R,slicedSegments:F}=db(r,y,D,M.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===F.length&&R.hasChildren())return this.processChildren(C,M,R).pipe((0,ct.U)(K=>null===K?null:[new Wa(p,K)]));if(0===M.length&&0===F.length)return Je([new Wa(p,[])]);const H=Gs(t)===s;return this.processSegment(C,M,R,F,H?Zt:s).pipe((0,ct.U)(K=>null===K?null:[new Wa(p,K)]))}))}}function BM(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _b(n){const e=[],t=new Set;for(const r of n){if(!BM(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=_b(r.children);e.push(new Wa(r.value,i))}return e.filter(r=>!t.has(r))}function K_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Bl(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Z_(n){return n.data||{}}function za(n){return n.resolve||{}}function vb(n){return"string"==typeof n.title||null===n.title}function LT(n){return mn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,ct.U)(()=>e)):Je(e)})}let bb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[bd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(VT)},providedIn:"root"}),n})(),VT=(()=>{class n extends bb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xs))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lV{}class BT extends class wb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pg=new d.OlP("",{providedIn:"root",factory:()=>({})}),Y_=new d.OlP("ROUTES");let ef=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=$a(t.loadComponent()).pipe((0,kn.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Yp(()=>{this.componentLoaders.delete(t)})),i=new GC(r,()=>new nn.x).pipe(k0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ct.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,D=!1;Array.isArray(c)?y=c:(p=c.create(t).injector,y=B0(p.get(Y_,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(lb),injector:p}}),Yp(()=>{this.childrenLoaders.delete(r)})),l=new GC(s,()=>new nn.x).pipe(k0());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return $a(t()).pipe((0,Vn.z)(r=>r instanceof d.YKP||Array.isArray(r)?Je(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Q_{}class jT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function HT(n){throw n}function GT(n,e,t){return e.parse("/")}const qM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ZM(){const n=(0,d.f3M)(QC),e=(0,d.f3M)(Yh),t=(0,d.f3M)(Re),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),s=(0,d.f3M)(Y_,{optional:!0})??[],l=(0,d.f3M)(pg,{optional:!0})??{},c=(0,d.f3M)(VT),p=(0,d.f3M)(bb,{optional:!0}),y=(0,d.f3M)(Q_,{optional:!0}),D=(0,d.f3M)(lV,{optional:!0}),C=new ui(null,n,e,t,r,i,B0(s));return y&&(C.urlHandlingStrategy=y),D&&(C.routeReuseStrategy=D),C.titleStrategy=p??c,function uV(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,C),C}let ui=(()=>{class n{constructor(t,r,i,s,l,c,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn.x,this.errorHandler=HT,this.malformedUriErrorHandler=GT,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new jT,this.routeReuseStrategy=new BT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ef),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new hT(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new vM(M)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const C=l.get(d.R0b);this.isNgZoneEnabled=C instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function j0(){return new Dd(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Id(this.currentUrlTree,this.rootComponentType),this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(En(i=>0!==i.id),(0,ct.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mn(i=>{let s=!1,l=!1;return Je(i).pipe((0,kn.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mn(c=>{const p=this.browserUrlTree.toString(),y=!this.navigated||c.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return $T(c.source)&&(this.browserUrlTree=c.extractedUrl),Je(c).pipe(mn(C=>{const M=this.transitions.getValue();return r.next(new dT(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),M!==this.transitions.getValue()?ri.E:Promise.resolve(C)}),function LM(n,e,t,r){return mn(i=>function FM(n,e,t,r,i){return new gb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ct.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kn.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},i.urlAfterRedirects=C.urlAfterRedirects}),function jM(n,e,t,r,i,s){return(0,Vn.z)(l=>function kT(n,e,t,r,i,s,l="emptyOnly",c="legacy"){return new VM(n,e,t,r,i,l,c,s).recognize().pipe(mn(p=>null===p?function OT(n){return new rr.y(e=>e.error(n))}(new mb):Je(p)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,s).pipe((0,ct.U)(c=>({...l,targetSnapshot:c}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kn.b)(C=>{if(i.targetSnapshot=C.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!C.extras.skipLocationChange){const R=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.setBrowserUrl(R,C)}this.browserUrlTree=C.urlAfterRedirects}const M=new Q0(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);r.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:R,source:F,restoredState:H,extras:K}=c,ve=new dT(M,this.serializeUrl(R),F,H);r.next(ve);const Te=Id(R,this.rootComponentType).snapshot;return Je(i={...c,targetSnapshot:Te,urlAfterRedirects:R,extras:{...K,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),ri.E}),(0,kn.b)(c=>{const p=new J0(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(p)}),(0,ct.U)(c=>i={...c,guards:DT(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function TT(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Je({...t,guardsResult:!0}):function IT(n,e,t,r){return(0,ln.D)(n).pipe((0,Vn.z)(i=>function sV(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Je(s.map(c=>{const p=lg(e)??i,y=Nd(c,p);return $a(function nV(n){return n&&$_(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(Ga())})).pipe(Vl()):Je(!0)}(i.component,i.route,t,e,r)),Ga(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Vn.z)(c=>c&&function JL(n){return"boolean"==typeof n}(c)?function iV(n,e,t,r){return(0,ln.D)(e).pipe($u(i=>kt(function ST(n,e){return null!==n&&e&&e(new X0(n)),Je(!0)}(i.route.parent,r),function cb(n,e){return null!==n&&e&&e(new pT(n)),Je(!0)}(i.route,r),function NT(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function ET(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>jC(()=>Je(l.guards.map(p=>{const y=lg(l.node)??t,D=Nd(p,y);return $a(function tV(n){return n&&$_(n.canActivateChild)}(D)?D.canActivateChild(r,n):y.runInContext(()=>D(r,n))).pipe(Ga())})).pipe(Vl())));return Je(s).pipe(Vl())}(n,i.path,t),function AM(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(s=>jC(()=>{const l=lg(e)??t,c=Nd(s,l);return $a(function eV(n){return n&&$_(n.canActivate)}(c)?c.canActivate(e,n):l.runInContext(()=>c(e,n))).pipe(Ga())}));return Je(i).pipe(Vl())}(n,i.route,t))),Ga(i=>!0!==i,!0))}(r,s,n,e):Je(c)),(0,ct.U)(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),(0,kn.b)(c=>{if(i.guardsResult=c.guardsResult,Ed(c.guardsResult))throw sb(0,c.guardsResult);const p=new mM(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(p)}),En(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),LT(c=>{if(c.guards.canActivateChecks.length)return Je(c).pipe((0,kn.b)(p=>{const y=new _M(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),mn(p=>{let y=!1;return Je(p).pipe(function aV(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let s=0;return(0,ln.D)(i).pipe($u(l=>function HM(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!vb(i)&&(s[bd]=i.title),function GM(n,e,t,r){const i=function $M(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const s={};return(0,ln.D)(i).pipe((0,Vn.z)(l=>function WM(n,e,t,r){const i=lg(e)??r,s=Nd(n,i);return $a(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(Ga(),(0,kn.b)(c=>{s[l]=c}))),F0(1),Zf(s),Wu(l=>CT(l)?ri.E:Zp(l)))}(s,n,e,r).pipe((0,ct.U)(l=>(n._resolvedData=l,n.data=DM(n,t).resolve,i&&vb(i)&&(n.data[bd]=i.title),null)))}(l.route,r,n,e)),(0,kn.b)(()=>s++),F0(1),(0,Vn.z)(l=>s===i.length?Je(t):ri.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kn.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,kn.b)(p=>{const y=new yM(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),LT(c=>{const p=y=>{const D=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,kn.b)(C=>{y.component=C}),(0,ct.U)(()=>{})));for(const C of y.children)D.push(...p(C));return D};return I(p(c.targetSnapshot.root)).pipe(N_(),Bn(1))}),LT(()=>this.afterPreactivation()),(0,ct.U)(c=>{const p=function _T(n,e,t){const r=sg(n,e._root,t?t._root:void 0);return new Oi(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:p}}),(0,kn.b)(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,ct.U)(r=>(new bT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),(0,kn.b)({next(){s=!0},complete(){s=!0}}),Yp(()=>{s||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Wu(c=>{if(l=!0,B_(c)){ag(c)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Zh(i.id,this.serializeUrl(i.extractedUrl),c.message,c.cancellationCode);if(r.next(p),ag(c)){const y=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$T(i.source)};this.scheduleNavigation(y,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Y0(i.id,this.serializeUrl(i.extractedUrl),c,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(c))}catch(y){i.reject(y)}}return ri.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(lb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:c,preserveFragment:p}=r,y=i||this.routerState.root,D=p?this.currentUrlTree.fragment:l;let C=null;switch(c){case"merge":C={...this.currentUrlTree.queryParams,...s};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}return null!==C&&(C=this.removeEmptyProps(C)),Xp(y,this.currentUrlTree,t,C,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ed(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function YM(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...qM}:!1===r?{...KM}:r,Ed(t))return A_(this.currentUrlTree,t,i);const s=this.parseUrl(t);return A_(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ll(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let c,p,y;l?(c=l.resolve,p=l.reject,y=l.promise):y=new Promise((M,R)=>{c=M,p=R});const D=++this.navigationId;let C;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),C=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):C=0,this.setTransition({id:D,targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Zh(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return ZM()},providedIn:"root"}),n})();function $T(n){return"imperative"!==n}class QM{}let X_=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(En(t=>t instanceof Ll),$u(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,c=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,ln.D)(i).pipe((0,_t.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const s=i.pipe((0,Vn.z)(l=>null===l?Je(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([s,l]).pipe((0,_t.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(QM),d.LFG(ef))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cb=new d.OlP("");let zT=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ll&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new eb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Yu(n,e){return{\u0275kind:n,\u0275providers:e}}function mg(n){return[{provide:Y_,multi:!0,useValue:n}]}function ey(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(ui),i=n.get(ty);1===n.get(nf)&&r.initialNavigation(),n.get(JM,null,d.XFs.Optional)?.setUpPreloading(),n.get(Cb,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const ty=new d.OlP("",{factory:()=>new nn.x}),nf=new d.OlP("",{providedIn:"root",factory:()=>1});const JM=new d.OlP("");function qT(n){return Yu(0,[{provide:JM,useExisting:X_},{provide:QM,useExisting:n}])}const KT=new d.OlP("ROUTER_FORROOT_GUARD"),ZT=[Re,{provide:QC,useClass:JC},{provide:ui,useFactory:ZM},Yh,{provide:Zu,useFactory:function Tb(n){return n.routerState.root},deps:[ui]},ef];function YT(){return new d.PXZ("Router",ui)}let QT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ZT,[],mg(t),{provide:KT,useFactory:Ib,deps:[[ui,new d.FiY,new d.tp0]]},{provide:pg,useValue:r||{}},r?.useHash?{provide:ye,useClass:dt}:{provide:ye,useClass:ot},{provide:Cb,useFactory:()=>{const n=(0,d.f3M)(ui),e=(0,d.f3M)(Xl),t=(0,d.f3M)(pg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new zT(n,e,t)}},r?.preloadingStrategy?qT(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:YT},r?.initialNavigation?vV(r):[],[{provide:Sb,useFactory:ey},{provide:d.tb,multi:!0,useExisting:Sb}]]}}static forChild(t){return{ngModule:n,providers:[mg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(KT,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[H_]}),n})();function Ib(n){return"guarded"}function vV(n){return["disabled"===n.initialNavigation?Yu(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ui);return()=>{e.setUpLocationChangeListener()}}},{provide:nf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yu(2,[{provide:nf,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const l=e.get(ui),c=e.get(ty);(function i(s){e.get(ui).events.pipe(En(c=>c instanceof Ll||c instanceof Zh||c instanceof Y0),(0,ct.U)(c=>c instanceof Ll||c instanceof Zh&&(0===c.code||1===c.code)&&null),En(c=>null!==c),Bn(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),l.afterPreactivation=()=>(s(!0),r||c.closed?Je(void 0):c),l.initialNavigation()}))}}]).\u0275providers:[]]}const Sb=new d.OlP("");let tx=(()=>{class n{constructor(){this.title="Julklappslottning"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-white"],[1,"navbar-brand","ms-auto","me-auto","align-text-center"],["src","assets/images/SSC.png","height","100","width","75","alt","Logo",1,"d-inline-block","align-text-center","me-3","ms-3"],[1,"text-center",2,"height","10vh"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d._uU(3," Secret Santa Generator "),d.qZA()(),d._UZ(4,"router-outlet")(5,"hr"),d.TgZ(6,"footer",3)(7,"p"),d._uU(8,"\xa9 2022 Copyright - Christopher Reineborn"),d.qZA()())},dependencies:[j_,C0]}),n})();var ci=V(2011),Cn=V(5813),Ab=V(3942),be=V(5861),ms=V(9681),P=V(2090),qa=V(4859);const nx="firebasestorage.googleapis.com",rx="storageBucket";class Pr extends P.ZR{constructor(e,t,r=0){super(XT(e),`Firebase Storage: ${t} (${XT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return XT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function XT(n){return"storage/"+n}function Mb(){return new Pr("unknown","An unknown error occurred, please check the error payload for server response.")}function f(){return new Pr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function m(){return new Pr("canceled","User canceled the upload/download.")}function N(){return new Pr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function q(n){return new Pr("invalid-argument",n)}function re(){return new Pr("app-deleted","The Firebase app was deleted.")}function De(n){return new Pr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Le(n,e){return new Pr("invalid-format","String does not match format '"+n+"': "+e)}function Ze(n){throw new Pr("internal-error","Internal error: "+n)}class Xe{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xe.makeFromUrl(e,t)}catch{return new Xe(e,"")}if(""===r.path)return r;throw function E(n){return new Pr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ne){Ne.path_=decodeURIComponent(Ne.path)}const C=t.replace(/[.]/g,"\\."),ke=[{regex:c,indices:{bucket:1,path:3},postModify:function s(Ne){"/"===Ne.path.charAt(Ne.path.length-1)&&(Ne.path_=Ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${C}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===nx?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ne=0;Ne<ke.length;Ne++){const je=ke[Ne],We=je.regex.exec(e);if(We){let Lt=We[je.indices.path];Lt||(Lt=""),r=new Xe(We[je.indices.bucket],Lt),je.postModify(r);break}}if(null==r)throw function b(n){return new Pr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Tt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rf(n){return"string"==typeof n||n instanceof String}function ry(n){return _g()&&n instanceof Blob}function _g(){return typeof Blob<"u"&&!(0,P.UG)()}function yg(n,e,t,r){if(r<e)throw q(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw q(`Invalid value for '${n}'. Expected ${t} or less.`)}function ca(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function iy(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Ka=(()=>{return(n=Ka||(Ka={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Ka;var n})();function sy(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class xb{constructor(e,t,r,i,s,l,c,p,y,D,C,M=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=D,this.connectionFactory_=C,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,F)=>{this.resolve_=R,this.reject_=F,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(c,c.getResponse());!function Tn(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==c){const p=Mb();p.serverResponse=c.getErrorText(),l(this.errorCallback_?this.errorCallback_(c,p):p)}else l(i.canceled?this.appDelete_?re():m():f())};this.canceled_?t(0,new eI(!1,null,!0)):this.backoffId_=function Oe(n,e,t){let r=1,i=null,s=null,l=!1,c=0;function p(){return 2===c}let y=!1;function D(...K){y||(y=!0,e.apply(null,K))}function C(K){i=setTimeout(()=>{i=null,n(R,p())},K)}function M(){s&&clearTimeout(s)}function R(K,...ve){if(y)return void M();if(K)return M(),void D.call(null,K,...ve);if(p()||l)return M(),void D.call(null,K,...ve);let ke;r<64&&(r*=2),1===c?(c=2,ke=0):ke=1e3*(r+Math.random()),C(ke)}let F=!1;function H(K){F||(F=!0,M(),!y&&(null!==i?(K||(c=2),clearTimeout(i),C(0)):K||(c=1)))}return C(0),s=setTimeout(()=>{l=!0,H(!0)},t),H}((r,i)=>{if(i)return void r(!1,new eI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const c=s.getErrorCode()===Ka.NO_ERROR,p=s.getStatus();if((!c||sy(p,this.additionalRetryCodes_))&&this.retry){const D=s.getErrorCode()===Ka.ABORT;return void r(!1,new eI(!1,null,D))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new eI(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Ot(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class eI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oz(...n){const e=function sz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(_g())return new Blob(n);throw new Pr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const da={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sx{constructor(e,t){this.data=e,this.contentType=t||null}}function ox(n,e){switch(n){case da.RAW:return new sx(TV(e));case da.BASE64:case da.BASE64URL:return new sx(IV(n,e));case da.DATA_URL:return new sx(function cz(n){const e=new SV(n);return e.base64?IV(da.BASE64,e.rest):function uz(n){let e;try{e=decodeURIComponent(n)}catch{throw Le(da.DATA_URL,"Malformed data URL.")}return TV(e)}(e.rest)}(e),function dz(n){return new SV(n).contentType}(e))}throw Mb()}function TV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function IV(n,e){switch(n){case da.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Le(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case da.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Le(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function lz(n){return atob(n)}(e)}catch{throw Le(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class SV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Le(da.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function hz(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,t){let r=0,i="";ry(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ry(this.data_)){const i=function az(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qu(r,!0)}}static getBlob(...e){if(_g()){const t=e.map(r=>r instanceof Qu?r.data_:r);return new Qu(oz.apply(null,t))}{const t=e.map(l=>rf(l)?ox(da.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[s++]=l[c]}),new Qu(i,!0)}}uploadData(){return this.data_}}function ax(n){let e;try{e=JSON.parse(n)}catch{return null}return function Ad(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function NV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function gz(n,e){return e}class $s{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||gz}}let tI=null;function Rb(){if(tI)return tI;const n=[];n.push(new $s("bucket")),n.push(new $s("generation")),n.push(new $s("metageneration")),n.push(new $s("name","fullPath",!0));const t=new $s("name");t.xform=function e(s,l){return function mz(n){return!rf(n)||n.length<2?n:NV(n)}(l)},n.push(t);const i=new $s("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new $s("timeCreated")),n.push(new $s("updated")),n.push(new $s("md5Hash",null,!0)),n.push(new $s("cacheControl",null,!0)),n.push(new $s("contentDisposition",null,!0)),n.push(new $s("contentEncoding",null,!0)),n.push(new $s("contentLanguage",null,!0)),n.push(new $s("contentType",null,!0)),n.push(new $s("metadata","customMetadata",!0)),tI=n,tI}function AV(n,e,t){const r=ax(e);return null===r?null:function yz(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function _z(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Xe(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function lx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const MV="prefixes";class Ju{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xu(n){if(!n)throw Mb()}function nI(n,e){return function t(r,i){const s=AV(n,i,e);return Xu(null!==s),s}}function oy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function u(){return new Pr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function a(){return new Pr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function o(n){return new Pr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function h(n){return new Pr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ob(n){const e=oy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function CV(n){return new Pr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function RV(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new Ju(i,"GET",nI(n,t),l);return c.errorHandler=Ob(e),c}function Cz(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const c=ca(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,D=new Ju(c,"GET",function Dz(n,e){return function t(r,i){const s=function wz(n,e,t){const r=ax(t);return null===r?null:function bz(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[MV])for(const i of t[MV]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new Xe(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Xe(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Xu(null!==s),s}}(n,e.bucket),y);return D.urlParams=s,D.errorHandler=oy(e),D}function kV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Nz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class rI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ux(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xu(!1)}return Xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Rz={STATE_CHANGED:"state_changed"},Ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cx(n){switch(n){case"running":case"pausing":case"canceling":return Ws.RUNNING;case"paused":return Ws.PAUSED;case"success":return Ws.SUCCESS;case"canceled":return Ws.CANCELED;default:return Ws.ERROR}}class Oz{constructor(e,t,r){if(function ir(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function ay(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Pz extends class kz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ka.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ka.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ka.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ze("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ze("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ze("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ze("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ze("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ul(){return new Pz}class VV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Rb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(sy(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=f()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Az(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=kV(e,r,i),c={name:l.fullPath},p=ca(s,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},C=lx(l,t),F=new Ju(p,"POST",function R(H){let K;ux(H);try{K=H.getResponseHeader("X-Goog-Upload-URL")}catch{Xu(!1)}return Xu(rf(K)),K},n.maxUploadRetryTime);return F.urlParams=c,F.headers=D,F.body=C,F.errorHandler=oy(e),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Mz(n,e,t,r){const p=new Ju(t,"POST",function s(y){const D=ux(y,["active","final"]);let C=null;try{C=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xu(!1)}C||Xu(!1);const M=Number(C);return Xu(!isNaN(M)),new rI(M,r.size(),"final"===D)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=oy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ul,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new rI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function xz(n,e,t,r,i,s,l,c){const p=new rI(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function O(){return new Pr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let D=y;i>0&&(D=Math.min(D,i));const C=p.current;let R="";R=0===D?"finalize":y===D?"upload, finalize":"upload";const F={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${p.current}`},H=r.slice(C,C+D);if(null===H)throw N();const ke=new Ju(t,"POST",function K(Ne,je){const We=ux(Ne,["active","final"]),ht=p.current+D,Lt=r.size();let In;return In="final"===We?nI(e,s)(Ne,je):null,new rI(ht,Lt,"final"===We,In)},e.maxUploadRetryTime);return ke.headers=F,ke.body=H.uploadData(),ke.progressCallback=c||null,ke.errorHandler=oy(n),ke}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const c=this._ref.storage._makeRequest(l,Ul,i,s,!1);this._request=c,c.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=RV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function PV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function c(){let ke="";for(let Ne=0;Ne<2;Ne++)ke+=Math.random().toString().slice(2);return ke}();l["Content-Type"]="multipart/related; boundary="+p;const y=kV(e,r,i),D=lx(y,t),R=Qu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===R)throw N();const F={name:y.fullPath},H=ca(s,n.host,n._protocol),ve=n.maxUploadRetryTime,Te=new Ju(H,"POST",nI(n,t),ve);return Te.urlParams=F,Te.headers=l,Te.body=R.uploadData(),Te.errorHandler=oy(e),Te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=m(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Oz(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cx(this._state)){case Ws.SUCCESS:ay(this._resolve.bind(null,this.snapshot))();break;case Ws.CANCELED:case Ws.ERROR:ay(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cx(this._state)){case Ws.RUNNING:case Ws.PAUSED:e.next&&ay(e.next.bind(e,this.snapshot))();break;case Ws.SUCCESS:e.complete&&ay(e.complete.bind(e))();break;default:e.error&&ay(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class vg{constructor(e,t){this._service=e,this._location=t instanceof Xe?t:Xe.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vg(e,t)}get root(){const e=new Xe(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NV(this._location.path)}get storage(){return this._service}get parent(){const e=function fz(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xe(this._location.bucket,e);return new vg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw De(e)}}function UV(n,e,t){return dx.apply(this,arguments)}function dx(){return(dx=(0,be.Z)(function*(n,e,t){const i=yield jV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield UV(n,e,i.nextPageToken))})).apply(this,arguments)}function jV(n,e){null!=e&&"number"==typeof e.maxResults&&yg("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Cz(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ul)}function qz(n){n._throwIfRoot("getDownloadURL");const e=function Tz(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new Ju(i,"GET",function Ez(n,e){return function t(r,i){const s=AV(n,i,e);return Xu(null!==s),function vz(n,e,t,r){const i=ax(e);if(null===i||!rf(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const C=n.fullPath;return ca("/b/"+l(n.bucket)+"/o/"+l(C),t,r)+iy({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return c.errorHandler=Ob(e),c}(n.storage,n._location,Rb());return n.storage.makeRequestWithTokens(e,Ul).then(t=>{if(null===t)throw function B(){return new Pr("no-download-url","The given file does not have any download URLs.")}();return t})}function HV(n,e){const t=function pz(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Xe(n._location.bucket,t);return new vg(n.storage,r)}function GV(n,e){if(n instanceof hx){const t=n;if(null==t._bucket)throw function T(){return new Pr("no-default-bucket","No default bucket found. Did you set the '"+rx+"' property when initializing the app?")}();const r=new vg(t,t._bucket);return null!=e?GV(r,e):r}return void 0!==e?HV(n,e):n}function Qz(n,e){if(e&&function Zz(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hx)return function Yz(n,e){return new vg(n,e)}(n,e);throw q("To use ref(service, url), the first argument must be a Storage instance.")}return GV(n,e)}function $V(n,e){const t=e?.[rx];return null==t?null:Xe.makeFromBucketSpec(t,n)}class hx{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xe.makeFromBucketSpec(i,this._host):$V(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xe.makeFromBucketSpec(this._url,e):$V(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vg(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Tt(re());{const l=function iz(n,e,t,r,i,s,l=!0){const c=iy(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function nz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function ez(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function tz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function rz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new xb(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const WV="@firebase/storage";function KV(n,e){return Qz(n=(0,P.m9)(n),e)}function a8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hx(t,r,i,e,ms.SDK_VERSION)}!function l8(){(0,ms._registerComponent)(new qa.wA("storage",a8,"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(WV,"0.9.13",""),(0,ms.registerVersion)(WV,"0.9.13","esm2017")}();class iI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class YV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new iI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new iI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new iI(l,this,this._ref)):{next:t.next?l=>t.next(new iI(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class QV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Md(e,this._service))}get items(){return this._delegate.items.map(e=>new Md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function o8(n,e){return HV(n,e)}(this._delegate,e);return new Md(t,this.storage)}get root(){return new Md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new YV(function Xz(n,e,t){return function Hz(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new VV(n,new Qu(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=da.RAW,r){this._throwIfRoot("putString");const i=ox(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new YV(new VV(this._delegate,new Qu(i.data,!0),s),this)}listAll(){return function r8(n){return function $z(n){const e={prefixes:[],items:[]};return UV(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new QV(e,this.storage))}list(e){return function n8(n,e){return jV(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new QV(t,this.storage))}getMetadata(){return function e8(n){return function Wz(n){n._throwIfRoot("getMetadata");const e=RV(n.storage,n._location,Rb());return n.storage.makeRequestWithTokens(e,Ul)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function t8(n,e){return function zz(n,e){n._throwIfRoot("updateMetadata");const t=function Iz(n,e,t,r){const s=ca(e.fullServerUrl(),n.host,n._protocol),c=lx(t,r),y=n.maxOperationRetryTime,D=new Ju(s,"PATCH",nI(n,r),y);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=c,D.errorHandler=Ob(e),D}(n.storage,n._location,e,Rb());return n.storage.makeRequestWithTokens(t,Ul)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function i8(n){return qz(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function s8(n){return function Kz(n){n._throwIfRoot("deleteObject");const e=function Sz(n,e){const r=ca(e.fullServerUrl(),n.host,n._protocol),c=new Ju(r,"DELETE",function l(p,y){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=Ob(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ul)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw De(e)}}class JV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XV(e))throw q("ref() expected a child path but got a URL, use refFromURL instead.");return new Md(KV(this._delegate,e),this)}refFromURL(e){if(!XV(e))throw q("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xe.makeFromUrl(e,this._delegate.host)}catch{throw q("refFromUrl() expected a valid full URL but got an invalid one.")}return new Md(KV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function ZV(n,e,t,r={}){!function Jz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function XV(n){return/^[A-Za-z]+:\/\//.test(n)}function h8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new JV(t,r)}!function f8(n){const e={TaskState:Ws,TaskEvent:Rz,StringFormat:da,Storage:JV,Reference:Md};n.INTERNAL.registerComponent(new qa.wA("storage-compat",h8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.21")}(Ab.Z),V(5867);var jl=V(1877);const t2=new Map,y8={activated:!1,tokenObservers:[]},v8={initialized:!1,enabled:!1};function ki(n){return t2.get(n)||y8}function Za(n,e){t2.set(n,e)}function oI(){return v8}class C8{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function T8(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function r2(n){if(!ki(n).activated)throw zs.create("use-before-activation",{appName:n.name})}function mx(n,e){return _x.apply(this,arguments)}function _x(){return(_x=(0,be.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const R=yield l.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}const c={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,c)}catch(R){throw zs.create("fetch-network-error",{originalErrorMessage:null===(r=R)||void 0===r?void 0:r.message})}if(200!==p.status)throw zs.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(R){throw zs.create("fetch-parse-error",{originalErrorMessage:null===(i=R)||void 0===i?void 0:i.message})}const D=y.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const C=1e3*Number(D[1]),M=Date.now();return{token:y.token,expireTimeMillis:M+C,issuedAtTimeMillis:M}})).apply(this,arguments)}function A8(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const kb="firebase-app-check-store";let uI=null;function o2(){return uI||(uI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(zs.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(kb,{keyPath:"compositeKey"})}}catch(r){e(zs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),uI)}function yx(){return(yx=(0,be.Z)(function*(n,e){const r=(yield o2()).transaction(kb,"readwrite"),s=r.objectStore(kb).put({compositeKey:n,value:e});return new Promise((l,c)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var y;c(zs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Pb=new jl.Yd("@firebase/app-check");function wx(n,e){return(0,P.hl)()?function O8(n,e){return function a2(n,e){return yx.apply(this,arguments)}(function u2(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function c2(){return oI().enabled}function d2(){return Ex.apply(this,arguments)}function Ex(){return(Ex=(0,be.Z)(function*(){const n=oI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const B8={error:"UNKNOWN_ERROR"};function U8(n){return P.US.encodeString(JSON.stringify(n),!1)}function cI(n){return Cx.apply(this,arguments)}function Cx(){return(Cx=(0,be.Z)(function*(n,e=!1){const t=n.app;r2(t);const r=ki(t);let s,i=r.token;if(i&&!ly(i)&&(Za(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(ly(p)?i=p:yield wx(t,void 0))}if(!e&&i&&ly(i))return{token:i.token};let c,l=!1;if(c2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mx(A8(t,yield d2()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield wx(t,p),Za(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Pb.warn(p.message):Pb.error(p),s=p}return i?s?c=ly(i)?{token:i.token,internalError:s}:p2(s):(c={token:i.token},Za(t,Object.assign(Object.assign({},r),{token:i})),yield wx(t,i)):c=p2(s),l&&f2(t,c),c})).apply(this,arguments)}function Ix(n,e){const t=ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Za(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function h2(n){const{app:e}=n,t=ki(e);let r=t.tokenRefresher;r||(r=function j8(n){const{app:e}=n;return new C8((0,be.Z)(function*(){let r;if(r=ki(e).token?yield cI(n,!0):yield cI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Za(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function f2(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ly(n){return n.expireTimeMillis-Date.now()>0}function p2(n){return{token:U8(B8),error:n}}class H8{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)Ix(this.app,t.next);return Promise.resolve()}}const D2="app-check-internal";!function n6(){(0,ms._registerComponent)(new qa.wA("app-check",n=>function G8(n,e){return new H8(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(D2).initialize()})),(0,ms._registerComponent)(new qa.wA(D2,n=>function $8(n){return{getToken:e=>cI(n,e),addTokenListener:e=>function Tx(n,e,t,r){const{app:i}=n,s=ki(i),l={next:t,error:r,type:e};if(Za(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&ly(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),h2(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>h2(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ix(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ms.registerVersion)("@firebase/app-check","0.5.16")}();class Fb{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var xx=V(127);function C2(n){const e=function a6(n){return new rr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(function wV(n,e=ks.z){return(0,Bt.e)((t,r)=>{let i=null,s=null,l=null;const c=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=l+n,D=e.now();if(D<y)return i=this.schedule(void 0,y-D),void r.add(i);c()}t.subscribe((0,vn.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function hI(n){return{getDownloadURL:()=>Je(void 0).pipe(Cn.fc,mn(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>Je(void 0).pipe(Cn.fc,mn(()=>n.getMetadata()),Cn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>hI(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>C2(n.put(e,t)),putString:(e,t,r)=>C2(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}const l6=new d.OlP("angularfire2.storageBucket"),u6=new d.OlP("angularfire2.storage.maxUploadRetryTime"),c6=new d.OlP("angularfire2.storage.maxOperationRetryTime"),d6=new d.OlP("angularfire2.storage.use-emulator");let h6=(()=>{class n{constructor(t,r,i,s,l,c,p,y,D,C){const M=(0,ci.on)(t,l,r);this.storage=(0,ci.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const R=l.runOutsideAngular(()=>M.storage(i||void 0)),F=D;return F&&R.useEmulator(...F),p&&R.setMaxUploadRetryTime(p),y&&R.setMaxOperationRetryTime(y),R},[p,y])}ref(t){return hI(this.storage.ref(t))}refFromURL(t){return hI(this.storage.refFromURL(t))}upload(t,r,i){return hI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(l6,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cn.HU),d.LFG(u6,8),d.LFG(c6,8),d.LFG(d6,8),d.LFG(Fb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),f6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),p6=(()=>{class n{constructor(){xx.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[h6],imports:[f6]}),n})();function Rx(){return(0,Bt.e)((n,e)=>{let t,r=!1;n.subscribe((0,vn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}V(1277);var wt,g6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xd={},Ox=Ox||{},$t=g6||self;function fI(){}function pI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Lb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var kx="closure_uid_"+(1e9*Math.random()>>>0),_6=0;function y6(n,e,t){return n.call.apply(n.bind,arguments)}function v6(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function _s(n,e,t){return(_s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y6:v6).apply(null,arguments)}function gI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function es(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[i].apply(r,l)}}function sf(){this.s=this.s,this.o=this.o}sf.prototype.s=!1,sf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function m6(n){Object.prototype.hasOwnProperty.call(n,kx)&&n[kx]||(n[kx]=++_6)}(this)},sf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Px(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function I2(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(pI(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function ys(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ys.prototype.h=function(){this.defaultPrevented=!0};var w6=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",fI,e),$t.removeEventListener("test",fI,e)}catch{}return n}();function mI(n){return/^[\s\xa0]*$/.test(n)}var S2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fx(n,e){return n<e?-1:n>e?1:0}function _I(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function ec(n){return-1!=_I().indexOf(n)}function Lx(n){return Lx[" "](n),n}Lx[" "]=fI;var yI,n,E6=ec("Opera"),uy=ec("Trident")||ec("MSIE"),N2=ec("Edge"),Vx=N2||uy,A2=ec("Gecko")&&!(-1!=_I().toLowerCase().indexOf("webkit")&&!ec("Edge"))&&!(ec("Trident")||ec("MSIE"))&&!ec("Edge"),C6=-1!=_I().toLowerCase().indexOf("webkit")&&!ec("Edge");function M2(){var n=$t.document;return n?n.documentMode:void 0}e:{var Bx="",Ux=(n=_I(),A2?/rv:([^\);]+)(\)|;)/.exec(n):N2?/Edge\/([\d\.]+)/.exec(n):uy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):C6?/WebKit\/(\S+)/.exec(n):E6?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ux&&(Bx=Ux?Ux[1]:""),uy){var jx=M2();if(null!=jx&&jx>parseFloat(Bx)){yI=String(jx);break e}}yI=Bx}var T6={};var S6=$t.document&&uy&&(M2()||parseInt(yI,10))||void 0;function Vb(n,e){if(ys.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(A2){e:{try{Lx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:N6[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vb.X.h.call(this)}}es(Vb,ys);var N6={2:"touch",3:"pen",4:"mouse"};Vb.prototype.h=function(){Vb.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bb="closure_listenable_"+(1e6*Math.random()|0),A6=0;function M6(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++A6,this.ba=this.ea=!1}function vI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Gx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function R2(n){const e={};for(const t in n)e[t]=n[t];return e}const O2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<O2.length;s++)t=O2[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bI(n){this.src=n,this.g={},this.h=0}function $x(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=T2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(vI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Wx(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}bI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=Wx(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new M6(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var zx="closure_lm_"+(1e6*Math.random()|0),qx={};function P2(n,e,t,r,i){if(r&&r.once)return L2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)P2(n,e[s],t,r,i);return null}return t=Qx(t),n&&n[Bb]?n.N(e,t,Lb(r)?!!r.capture:!!r,i):F2(n,e,t,!1,r,i)}function F2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=Lb(i)?!!i.capture:!!i,c=Zx(n);if(c||(n[zx]=c=new bI(n)),(t=c.add(e,t,r,l,s)).proxy)return t;if(r=function x6(){const e=R6;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)w6||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(B2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function L2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)L2(n,e[s],t,r,i);return null}return t=Qx(t),n&&n[Bb]?n.O(e,t,Lb(r)?!!r.capture:!!r,i):F2(n,e,t,!0,r,i)}function V2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)V2(n,e[s],t,r,i);else r=Lb(r)?!!r.capture:!!r,t=Qx(t),n&&n[Bb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Wx(s=n.g[e],t,r,i))&&(vI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Zx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Wx(e,t,r,i)),(t=-1<n?e[n]:null)&&Kx(t))}function Kx(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Bb])$x(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(B2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Zx(e))?($x(t,n),0==t.h&&(t.src=null,e[zx]=null)):vI(n)}}}function B2(n){return n in qx?qx[n]:qx[n]="on"+n}function R6(n,e){if(n.ba)n=!0;else{e=new Vb(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Kx(n),n=t.call(r,e)}return n}function Zx(n){return(n=n[zx])instanceof bI?n:null}var Yx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qx(n){return"function"==typeof n?n:(n[Yx]||(n[Yx]=function(e){return n.handleEvent(e)}),n[Yx])}function Pi(){sf.call(this),this.i=new bI(this),this.P=this,this.I=null}function ts(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ys(e,n);else if(e instanceof ys)e.target=e.target||n;else{var i=e;k2(e=new ys(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=wI(l,r,!0,e)&&i}if(i=wI(l=e.g=n,r,!0,e)&&i,i=wI(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=wI(l=e.g=t[s],r,!1,e)&&i}function wI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var c=l.listener,p=l.ha||l.src;l.ea&&$x(n.i,l),i=!1!==c.call(p,r)&&i}}return i&&!r.defaultPrevented}es(Pi,sf),Pi.prototype[Bb]=!0,Pi.prototype.removeEventListener=function(n,e,t,r){V2(this,n,e,t,r)},Pi.prototype.M=function(){if(Pi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vI(t[r]);delete n.g[e],n.h--}}this.I=null},Pi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Jx=$t.JSON.stringify;function O6(){var n=H2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Xx,U2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new P6,n=>n.reset());class P6{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function F6(n){$t.setTimeout(()=>{throw n},0)}function j2(n,e){Xx||function L6(){var n=$t.Promise.resolve(void 0);Xx=function(){n.then(V6)}}(),eR||(Xx(),eR=!0),H2.add(n,e)}var eR=!1,H2=new class k6{constructor(){this.h=this.g=null}add(e,t){const r=U2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function V6(){for(var n;n=O6();){try{n.h.call(n.g)}catch(t){F6(t)}var e=U2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}eR=!1}function DI(n,e){Pi.call(this),this.h=n||1,this.g=e||$t,this.j=_s(this.lb,this),this.l=Date.now()}function tR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function nR(n,e,t){if("function"==typeof n)t&&(n=_s(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_s(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function G2(n){n.g=nR(()=>{n.g=null,n.i&&(n.i=!1,G2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}es(DI,Pi),(wt=DI.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ts(this,"tick"),this.ca&&(tR(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){DI.X.M.call(this),tR(this),delete this.g};class B6 extends sf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:G2(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ub(n){sf.call(this),this.h=n,this.g={}}es(Ub,sf);var $2=[];function W2(n,e,t,r){Array.isArray(t)||(t&&($2[0]=t.toString()),t=$2);for(var i=0;i<t.length;i++){var s=P2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function z2(n){Gx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kx(e)},n),n.g={}}function EI(){this.g=!0}function cy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function G6(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return Jx(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ub.prototype.M=function(){Ub.X.M.call(this),z2(this)},Ub.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},EI.prototype.Aa=function(){this.g=!1},EI.prototype.info=function(){};var bg={},q2=null;function CI(){return q2=q2||new Pi}function K2(n){ys.call(this,bg.Pa,n)}function jb(n){const e=CI();ts(e,new K2(e))}function Z2(n,e){ys.call(this,bg.STAT_EVENT,n),this.stat=e}function qs(n){const e=CI();ts(e,new Z2(e,n))}function Y2(n,e){ys.call(this,bg.Qa,n),this.size=e}function Hb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}bg.Pa="serverreachability",es(K2,ys),bg.STAT_EVENT="statevent",es(Z2,ys),bg.Qa="timingevent",es(Y2,ys);var TI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Q2={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function rR(){}function X2(){}rR.prototype.h=null;var oR,Gb={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function iR(){ys.call(this,"d")}function sR(){ys.call(this,"c")}function II(){}function $b(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ub(this),this.O=$6,this.T=new DI(n=Vx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new eB}function eB(){this.i=null,this.g="",this.h=!1}es(iR,ys),es(sR,ys),es(II,rR),II.prototype.g=function(){return new XMLHttpRequest},II.prototype.i=function(){return{}},oR=new II;var $6=45e3,aR={},SI={};function lR(n,e,t){n.K=1,n.v=xI(Rd(e)),n.s=t,n.P=!0,tB(n,null)}function tB(n,e){n.F=Date.now(),Wb(n),n.A=Rd(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),dB(t.i,"t",r),n.C=0,t=n.l.H,n.h=new eB,n.g=PB(n.l,t?e:null,!n.s),0<n.N&&(n.L=new B6(_s(n.La,n,n.g),n.N)),W2(n.S,n.g,"readystatechange",n.ib),e=n.H?R2(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),jb(),function U6(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",c=s.split("&"),p=0;p<c.length;p++){var y=c[p].split("=");if(1<y.length){var D=y[0];y=y[1];var C=D.split("_");l=2<=C.length&&"type"==C[1]?l+(D+"=")+y+"&":l+(D+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function nB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rB(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=W6(n,t),i==SI){4==e&&(n.o=4,qs(14),r=!1),cy(n.j,n.m,null,"[Incomplete Response]");break}if(i==aR){n.o=4,qs(15),cy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cy(n.j,n.m,i,null),uR(n,i)}nB(n)&&i!=SI&&i!=aR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),_R(e),e.K=!0,qs(11))):(cy(n.j,n.m,t,"[Invalid Chunked Response]"),wg(n),zb(n))}function W6(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?SI:(t=Number(e.substring(t,r)),isNaN(t)?aR:(r+=1)+t>e.length?SI:(e=e.substr(r,t),n.C=r+t,e))}function Wb(n){n.V=Date.now()+n.O,iB(n,n.O)}function iB(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hb(_s(n.gb,n),e)}function NI(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function zb(n){0==n.l.G||n.I||xB(n.l,n)}function wg(n){NI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,tR(n.T),z2(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function uR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||cR(t.h,n)))if(!n.J&&cR(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;LI(t),PI(t)}mR(t),qs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Hb(_s(t.cb,t),6e3));if(1>=pB(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Eg(t,11)}else if((n.J||t.g==n)&&LI(t),!mI(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const D=y[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const C=y[4];null!=C&&(t.Ca=C,t.j.info("SVER="+t.Ca));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.J=r=1.5*M,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const F=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=r.h;s.g||-1==F.indexOf("spdy")&&-1==F.indexOf("quic")&&-1==F.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dR(s,s.h),s.h=null))}if(r.D){const H=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(r.za=H,Dr(r.F,r.D,H))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=kB(r,r.H?r.ka:null,r.V),l.J){gB(r.h,l);var c=l,p=r.J;p&&c.setTimeout(p),c.B&&(NI(c),Wb(c)),r.g=l}else AB(r);0<t.i.length&&FI(t)}else"stop"!=y[0]&&"close"!=y[0]||Eg(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Eg(t,7):gR(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}jb()}catch{}}function sB(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function q6(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(pI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function z6(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(pI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(wt=$b.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==Od(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const D=Od(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>D)&&(3!=D||Vx||this.g&&(this.h.h||this.g.fa()||EB(this.g)))){this.I||4!=D||7==e||jb(),NI(this);var t=this.g.aa();this.Y=t;t:if(nB(this)){var r=EB(this.g);n="";var i=r.length,s=4==Od(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wg(this),zb(this);var l="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function j6(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,p=this.g;if((c=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mI(c)){var y=c;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,qs(12),wg(this),zb(this);break e}cy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uR(this,t)}this.P?(rB(this,D,l),Vx&&this.i&&3==D&&(W2(this.S,this.T,"tick",this.hb),this.T.start())):(cy(this.j,this.m,l,null),uR(this,l)),4==D&&wg(this),this.i&&!this.I&&(4==D?xB(this.l,this):(this.i=!1,Wb(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,qs(12)):(this.o=0,qs(13)),wg(this),zb(this)}}}catch{}},wt.hb=function(){if(this.g){var n=Od(this.g),e=this.g.fa();this.C<e.length&&(NI(this),rB(this,n,e),this.i&&4!=n&&Wb(this))}},wt.cancel=function(){this.I=!0,wg(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function H6(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jb(),qs(17)),wg(this),this.o=2,zb(this)):iB(this,this.V-n)};var oB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dg(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Dg){this.h=void 0!==e?e:n.h,AI(this,n.j),this.s=n.s,this.g=n.g,MI(this,n.m),this.l=n.l,e=n.i;var t=new Zb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),aB(this,t),this.o=n.o}else n&&(t=String(n).match(oB))?(this.h=!!e,AI(this,t[1]||"",!0),this.s=qb(t[2]||""),this.g=qb(t[3]||"",!0),MI(this,t[4]),this.l=qb(t[5]||"",!0),aB(this,t[6]||"",!0),this.o=qb(t[7]||"")):(this.h=!!e,this.i=new Zb(null,this.h))}function Rd(n){return new Dg(n)}function AI(n,e,t){n.j=t?qb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function MI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aB(n,e,t){e instanceof Zb?(n.i=e,function eq(n,e){e&&!n.j&&(af(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(uB(this,r),dB(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Kb(e,J6)),n.i=new Zb(e,n.h))}function Dr(n,e,t){n.i.set(e,t)}function xI(n){return Dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Z6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Z6(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Dg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kb(e,lB,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kb(e,lB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kb(t,"/"==t.charAt(0)?Q6:Y6,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kb(t,X6)),n.join("")};var lB=/[#\/\?@]/g,Y6=/[#\?:]/g,Q6=/[#\?]/g,J6=/[#\?@]/g,X6=/#/g;function Zb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function af(n){n.g||(n.g=new Map,n.h=0,n.i&&function K6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function uB(n,e){af(n),e=dy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cB(n,e){return af(n),e=dy(n,e),n.g.has(e)}function dB(n,e,t){uB(n,e),0<t.length&&(n.i=null,n.g.set(dy(n,e),Px(t)),n.h+=t.length)}function dy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hB(n){this.l=n||nq,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=Zb.prototype).add=function(n,e){af(this),this.i=null,n=dy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){af(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){af(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},wt.W=function(n){af(this);let e=[];if("string"==typeof n)cB(this,n)&&(e=e.concat(this.g.get(dy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return af(this),this.i=null,cB(this,n=dy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var nq=10;function fB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pB(n){return n.h?1:n.g?n.g.size:0}function cR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dR(n,e){n.g?n.g.add(e):n.h=e}function gB(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mB(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Px(n.i)}function hR(){}function rq(){this.g=new hR}function iq(n,e,t){const r=t||"";try{sB(n,function(i,s){let l=i;Lb(i)&&(l=Jx(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yb(n){this.l=n.ac||null,this.j=n.jb||!1}function OI(n,e){Pi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=fR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hB.prototype.cancel=function(){if(this.i=mB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},hR.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},hR.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},es(Yb,rR),Yb.prototype.g=function(){return new OI(this.l,this.j)},Yb.prototype.i=function(n){return function(){return n}}({}),es(OI,Pi);var fR=0;function _B(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Qb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jb(n)}function Jb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=OI.prototype).open=function(n,e){if(this.readyState!=fR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jb(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qb(this)),this.readyState=fR},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jb(this)),this.g&&(this.readyState=3,Jb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_B(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qb(this):Jb(this),3==this.readyState&&_B(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,Qb(this))},wt.Ua=function(n){this.g&&(this.response=n,Qb(this))},wt.ga=function(){this.g&&Qb(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(OI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oq=$t.JSON.parse;function jr(n){Pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yB,this.K=this.L=!1}es(jr,Pi);var yB="",aq=/^https?$/i,lq=["POST","PUT"];function vB(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bB(n),kI(n)}function bB(n){n.D||(n.D=!0,ts(n,"complete"),ts(n,"error"))}function wB(n){if(n.h&&typeof Ox<"u"&&(!n.C[1]||4!=Od(n)||2!=n.aa()))if(n.v&&4==Od(n))nR(n.Ha,0,n);else if(ts(n,"readystatechange"),4==Od(n)){n.h=!1;try{const c=n.aa();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.H).match(oB)[1]||null;if(!i&&$t.self&&$t.self.location){var s=$t.self.location.protocol;i=s.substr(0,s.length-1)}r=!aq.test(i?i.toLowerCase():"")}t=r}if(t)ts(n,"complete"),ts(n,"success");else{n.m=6;try{var l=2<Od(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",bB(n)}}finally{kI(n)}}}function kI(n,e){if(n.g){DB(n);const t=n.g,r=n.C[0]?fI:null;n.g=null,n.C=null,e||ts(n,"ready");try{t.onreadystatechange=r}catch{}}}function DB(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Od(n){return n.g?n.g.readyState:0}function EB(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yB:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function CB(n){let e="";return Gx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function pR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=CB(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dr(n,e,t))}function Xb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function TB(n){this.Ca=0,this.i=[],this.j=new EI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Xb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Xb("baseRetryDelayMs",5e3,n),this.bb=Xb("retryDelaySeedMs",1e4,n),this.$a=Xb("forwardChannelMaxRetries",2,n),this.ta=Xb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new hB(n&&n.concurrentRequestLimit),this.Fa=new rq,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function gR(n){if(IB(n),3==n.G){var e=n.U++,t=Rd(n.F);Dr(t,"SID",n.I),Dr(t,"RID",e),Dr(t,"TYPE","terminate"),ew(n,t),(e=new $b(n,n.j,e,void 0)).K=2,e.v=xI(Rd(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=PB(e.l,null),e.g.da(e.v)),e.F=Date.now(),Wb(e)}OB(n)}function PI(n){n.g&&(_R(n),n.g.cancel(),n.g=null)}function IB(n){PI(n),n.u&&($t.clearTimeout(n.u),n.u=null),LI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function FI(n){fB(n.h)||n.m||(n.m=!0,j2(n.Ja,n),n.C=0)}function SB(n,e){var t;t=e?e.m:n.U++;const r=Rd(n.F);Dr(r,"SID",n.I),Dr(r,"RID",t),Dr(r,"AID",n.T),ew(n,r),n.o&&n.s&&pR(r,n.o,n.s),t=new $b(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=NB(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),dR(n.h,t),lR(t,r,e)}function ew(n,e){n.ia&&Gx(n.ia,function(t,r){Dr(e,r,t)}),n.l&&sB({},function(t,r){Dr(e,r,t)})}function NB(n,e,t){t=Math.min(n.i.length,t);var r=n.l?_s(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let c=!0;for(let p=0;p<t;p++){let y=i[p].h;const D=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),c=!1;else try{iq(D,l,"req"+y+"_")}catch{r&&r(D)}}if(c){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function AB(n){n.g||n.u||(n.Z=1,j2(n.Ia,n),n.A=0)}function mR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Hb(_s(n.Ia,n),RB(n,n.A)),n.A++,0))}function _R(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function MB(n){n.g=new $b(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Rd(n.sa);Dr(e,"RID","rpc"),Dr(e,"SID",n.I),Dr(e,"CI",n.L?"0":"1"),Dr(e,"AID",n.T),Dr(e,"TYPE","xmlhttp"),ew(n,e),n.o&&n.s&&pR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=xI(Rd(e)),t.s=null,t.P=!0,tB(t,n)}function LI(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function xB(n,e){var t=null;if(n.g==e){LI(n),_R(n),n.g=null;var r=2}else{if(!cR(n.h,e))return;t=e.D,gB(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ts(r=CI(),new Y2(r,t)),FI(n)}else AB(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function cq(n,e){return!(pB(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Hb(_s(n.Ja,n,e),RB(n,n.C)),n.C++,0)))}(n,e)||2==r&&mR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Eg(n,5);break;case 4:Eg(n,10);break;case 3:Eg(n,6);break;default:Eg(n,2)}}function RB(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Eg(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=_s(n.kb,n);t||(t=new Dg("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||AI(t,"https"),xI(t)),function sq(n,e){const t=new EI;if($t.Image){const r=new Image;r.onload=gI(RI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gI(RI,t,r,"TestLoadImage: error",!1,e),r.onabort=gI(RI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gI(RI,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qs(2);n.G=0,n.l&&n.l.va(e),OB(n),IB(n)}function OB(n){if(n.G=0,n.la=[],n.l){const e=mB(n.h);(0!=e.length||0!=n.i.length)&&(I2(n.la,e),I2(n.la,n.i),n.h.i.length=0,Px(n.i),n.i.length=0),n.l.ua()}}function kB(n,e,t){var r=t instanceof Dg?Rd(t):new Dg(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),MI(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Dg(null,void 0);r&&AI(s,r),e&&(s.g=e),i&&MI(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Dr(r,t,e),Dr(r,"VER",n.ma),ew(n,r),r}function PB(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jr(t&&n.Da&&!n.ra?new Yb({jb:!0}):n.ra)).Ka(n.H),e}function FB(){}function VI(){if(uy&&!(10<=Number(S6)))throw Error("Environmental error: no available transport.")}function ha(n,e){Pi.call(this),this.g=new TB(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!mI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new hy(this)}function LB(n){iR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function VB(){sR.call(this),this.status=1}function hy(n){this.g=n}(wt=jr.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oR.g(),this.C=function J2(n){return n.h||(n.h=n.i())}(this.u?this.u:oR),this.g.onreadystatechange=_s(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void vB(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=T2(lq,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{DB(this),0<this.B&&((this.K=function uq(n){return uy&&function I6(){return function D6(n){var e=T6;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=S2(String(yI)).split("."),t=S2("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Fx(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Fx(0==i[2].length,0==s[2].length)||Fx(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_s(this.qa,this)):this.A=nR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){vB(this,s)}},wt.qa=function(){typeof Ox<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ts(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ts(this,"complete"),ts(this,"abort"),kI(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kI(this,!0)),jr.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?wB(this):this.fb())},wt.fb=function(){wB(this)},wt.aa=function(){try{return 2<Od(this)?this.g.status:-1}catch{return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oq(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=TB.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new $b(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=R2(s),k2(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=NB(this,i,e),Dr(t=Rd(this.F),"RID",n),Dr(t,"CVER",22),this.D&&Dr(t,"X-HTTP-Session-Id",this.D),ew(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(CB(s)))+"&"+e:this.o&&pR(t,this.o,s)),dR(this.h,i),this.Ya&&Dr(t,"TYPE","init"),this.O?(Dr(t,"$req",e),Dr(t,"SID","null"),i.Z=!0,lR(i,t,null)):lR(i,t,e),this.G=2}}else 3==this.G&&(n?SB(this,n):0==this.i.length||fB(this.h)||SB(this))},wt.Ia=function(){if(this.u=null,MB(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Hb(_s(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qs(10),PI(this),MB(this))},wt.cb=function(){null!=this.v&&(this.v=null,PI(this),mR(this),qs(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),qs(2)):(this.j.info("Failed to ping google.com"),qs(1))},(wt=FB.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},VI.prototype.g=function(n,e){return new ha(n,e)},es(ha,Pi),ha.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;qs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=kB(n,null,n.V),FI(n)},ha.prototype.close=function(){gR(this.g)},ha.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Jx(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&FI(e)},ha.prototype.M=function(){this.g.l=null,delete this.j,gR(this.g),delete this.g,ha.X.M.call(this)},es(LB,iR),es(VB,sR),es(hy,FB),hy.prototype.xa=function(){ts(this.g,"a")},hy.prototype.wa=function(n){ts(this.g,new LB(n))},hy.prototype.va=function(n){ts(this.g,new VB)},hy.prototype.ua=function(){ts(this.g,"b")},VI.prototype.createWebChannel=VI.prototype.g,ha.prototype.send=ha.prototype.u,ha.prototype.open=ha.prototype.m,ha.prototype.close=ha.prototype.close,TI.NO_ERROR=0,TI.TIMEOUT=8,TI.HTTP_ERROR=6,Q2.COMPLETE="complete",X2.EventType=Gb,Gb.OPEN="a",Gb.CLOSE="b",Gb.ERROR="c",Gb.MESSAGE="d",Pi.prototype.listen=Pi.prototype.N,jr.prototype.listenOnce=jr.prototype.O,jr.prototype.getLastError=jr.prototype.Oa,jr.prototype.getLastErrorCode=jr.prototype.Ea,jr.prototype.getStatus=jr.prototype.aa,jr.prototype.getResponseJson=jr.prototype.Sa,jr.prototype.getResponseText=jr.prototype.fa,jr.prototype.send=jr.prototype.da,jr.prototype.setWithCredentials=jr.prototype.Ka;var dq=xd.createWebChannelTransport=function(){return new VI},hq=xd.getStatEventTarget=function(){return CI()},yR=xd.ErrorCode=TI,fq=xd.EventType=Q2,pq=xd.Event=bg,BB=xd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gq=xd.FetchXmlHttpFactory=Yb,BI=xd.WebChannel=X2,mq=xd.XhrIo=jr;const UB="@firebase/firestore";class Fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");let fy="9.13.0";const lf=new jl.Yd("@firebase/firestore");function vR(){return lf.logLevel}function Be(n,...e){if(lf.logLevel<=jl.in.DEBUG){const t=e.map(bR);lf.debug(`Firestore (${fy}): ${n}`,...t)}}function Kr(n,...e){if(lf.logLevel<=jl.in.ERROR){const t=e.map(bR);lf.error(`Firestore (${fy}): ${n}`,...t)}}function Cg(n,...e){if(lf.logLevel<=jl.in.WARN){const t=e.map(bR);lf.warn(`Firestore (${fy}): ${n}`,...t)}}function bR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${fy}) INTERNAL ASSERTION FAILED: `+n;throw Kr(e),new Error(e)}function Pt(n,e){n||ft()}function nt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ei{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fi.UNAUTHENTICATED))}shutdown(){}}class bq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wq{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ei,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const y=l;e.enqueueRetryable((0,be.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ei)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new jB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new Fi(e)}}class Dq{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Eq{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Dq(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cq{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.A=t.token,new HB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Tq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GB{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Tq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function py(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $B(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new Er(0,0))}static max(){return new Ft(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tw{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends tw{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const Iq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends tw{construct(e,t,r){return new Hr(e,t,r)}static isValidIdentifier(e){return Iq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===c?(l=!l,i++):"."!==c||l?(r+=c,i++):(s(),i++)}if(s(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(bn.fromString(e))}static fromName(e){return new et(bn.fromString(e).popFirst(5))}static empty(){return new et(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new bn(e.slice()))}}class UI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function wR(n){return n.fields.find(e=>2===e.kind)}function Tg(n){return n.fields.filter(e=>2!==e.kind)}UI.UNKNOWN_ID=-1;class jI{constructor(e,t){this.fieldPath=e,this.kind=t}}class nw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nw(0,fa.min())}}function WB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new fa(i,et.empty(),e)}function zB(n){return new fa(n.readTime,n.key,-1)}class fa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fa(Ft.min(),et.empty(),-1)}static max(){return new fa(Ft.max(),et.empty(),-1)}}function DR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const qB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uf(n){return ER.apply(this,arguments)}function ER(){return ER=(0,be.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==qB)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),ER.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,l=new Array(s);let c=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(D=>{l[y]=D,++c,c===s&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class HI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ei,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new rw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=CR(r.target.error);this.P.reject(new rw(e,i))}}static open(e,t,r,i){try{return new HI(t,e.transaction(i,r))}catch(s){throw new rw(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Mq(t)}}class Hl{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Hl.D((0,P.z$)())&&Kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Ig(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(Hl.N())return!0;const e=(0,P.z$)(),t=Hl.D(e),r=0<t&&t<10,i=Hl.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new rw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const c=l.target.error;i("VersionError"===c.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new rw(e,c))},s.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,be.Z)(function*(){const l="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.F(e);const p=HI.open(s.db,e,l?"readonly":"readwrite",r),y=i(p).next(D=>(p.V(),D)).catch(D=>(p.abort(D),ce.reject(D))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,D="FirebaseError"!==y.name&&c<3;if(Be("SimpleDb","Transaction failed with error:",y.message,"Retrying:",D),s.close(),!D)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Aq{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ig(this.U.delete())}}class rw extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cf(n){return"IndexedDbTransactionError"===n.name}class Mq{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ig(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Ig(this.store.add(e))}get(e){return Ig(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Ig(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Ig(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(l,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ce((s,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,l,c)=>c.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const l=CR(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}H(e,t){const r=[];return new ce((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const p=new Aq(c),y=t(c.primaryKey,c.value,p);if(y instanceof ce){const D=y.catch(C=>(p.done(),ce.reject(C)));r.push(D)}p.isDone?i():null===p.G?c.continue():c.continue(p.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ig(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=CR(r.target.error);t(i)}})}let ZB=!1;function CR(n){const e=Hl.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZB||(ZB=!0,setTimeout(()=>{throw r},0)),r}}return n}class xq{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cf(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uf(r)}yield t.nt(6e4)}))}}class Rq{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(c=>{i-=c,r.add(l)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,s)).next(c=>(Be("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=zB(s);DR(l,r)>0&&(r=l)}),new fa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ro{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function YB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ro.at=-1;class Gr{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new GI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new GI(this.root,e,this.comparator,!1)}getReverseIterator(){return new GI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new GI(this.root,e,this.comparator,!0)}}class GI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ns.RED,this.left=i??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ns(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new Gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JB(this.data.getIterator())}getIteratorFrom(e){return new JB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class JB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gy(n){return n.hasNext()?n.getNext():void 0}class pa{constructor(e){this.fields=e,e.sort(Hr.comparator)}static empty(){return new pa([])}unionWith(e){let t=new $n(Hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new pa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return py(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ci(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const kq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function df(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=kq.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$r(n.seconds),nanos:$r(n.nanos)}}function $r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ng(n){return"string"==typeof n?Ci.fromBase64String(n):Ci.fromUint8Array(n)}function TR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XB(n){const e=n.mapValue.fields.__previous_value__;return TR(e)?XB(e):e}function iw(n){const e=df(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class Pq{constructor(e,t,r,i,s,l,c,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.useFetchStreams=p}}class hf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hf&&e.projectId===this.projectId&&e.database===this.database}}function sw(n){return null==n}function ow(n){return 0===n&&1/n==-1/0}function eU(n){return"number"==typeof n&&Number.isInteger(n)&&!ow(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ff={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$I={nullValue:"NULL_VALUE"};function Ag(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TR(n)?4:iU(n)?9007199254740991:10:ft()}function tc(n,e){if(n===e)return!0;const t=Ag(n);if(t!==Ag(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return iw(n).isEqual(iw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=df(r.timestampValue),l=df(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ng(n.bytesValue).isEqual(Ng(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return $r(r.geoPointValue.latitude)===$r(i.geoPointValue.latitude)&&$r(r.geoPointValue.longitude)===$r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return $r(r.integerValue)===$r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=$r(r.doubleValue),l=$r(i.doubleValue);return s===l?ow(s)===ow(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return py(n.arrayValue.values||[],e.arrayValue.values||[],tc);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(YB(s)!==YB(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===l[c]||!tc(s[c],l[c])))return!1;return!0}(n,e);default:return ft()}var i}function aw(n,e){return void 0!==(n.values||[]).find(t=>tc(t,e))}function pf(n,e){if(n===e)return 0;const t=Ag(n),r=Ag(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=$r(i.integerValue||i.doubleValue),c=$r(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return tU(n.timestampValue,e.timestampValue);case 4:return tU(iw(n),iw(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,s){const l=Ng(i),c=Ng(s);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),c=s.split("/");for(let p=0;p<l.length&&p<c.length;p++){const y=Wt(l[p],c[p]);if(0!==y)return y}return Wt(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=Wt($r(i.latitude),$r(s.latitude));return 0!==l?l:Wt($r(i.longitude),$r(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],c=s.values||[];for(let p=0;p<l.length&&p<c.length;++p){const y=pf(l[p],c[p]);if(y)return y}return Wt(l.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ff.mapValue&&s===ff.mapValue)return 0;if(i===ff.mapValue)return 1;if(s===ff.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),p=s.fields||{},y=Object.keys(p);c.sort(),y.sort();for(let D=0;D<c.length&&D<y.length;++D){const C=Wt(c[D],y[D]);if(0!==C)return C;const M=pf(l[c[D]],p[y[D]]);if(0!==M)return M}return Wt(c.length,y.length)}(n.mapValue,e.mapValue);default:throw ft()}}function tU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=df(n),r=df(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function my(n){return IR(n)}function IR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=df(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ng(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=IR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${IR(r.fields[c])}`;return s+"}"}(n.mapValue):ft();var e}function Mg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function SR(n){return!!n&&"integerValue"in n}function lw(n){return!!n&&"arrayValue"in n}function nU(n){return!!n&&"nullValue"in n}function rU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function WI(n){return!!n&&"mapValue"in n}function uw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fq(n){return"nullValue"in n?$I:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mg(hf.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function Lq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mg(hf.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ff:ft()}function sU(n,e){const t=pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oU(n,e){const t=pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!WI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uw(t)}setAll(e){let t=Hr.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=uw(l):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());WI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];WI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sg(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rs(uw(this.value))}}function aU(n){const e=[];return Sg(n.fields,(t,r)=>{const i=new Hr([t]);if(WI(r)){const s=aU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new pa(e)}class sr{constructor(e,t,r,i,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new sr(e,0,Ft.min(),Ft.min(),rs.empty(),0)}static newFoundDocument(e,t,r){return new sr(e,1,t,Ft.min(),r,0)}static newNoDocument(e,t){return new sr(e,2,t,Ft.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,Ft.min(),rs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vq{constructor(e,t=null,r=[],i=[],s=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=c,this.ht=null}}function lU(n,e=null,t=[],r=[],i=null,s=null,l=null){return new Vq(n,e,t,r,i,s,l)}function xg(n){const e=nt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+my(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>my(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>my(r)).join(",")),e.ht=t}return e.ht}function cw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!qq(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!tc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fU(n.startAt,e.startAt)&&fU(n.endAt,e.endAt)}function zI(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qI(n,e){return n.filters.filter(t=>t instanceof is&&t.field.isEqual(e))}function uU(n,e,t){let r=$I,i=!0;for(const s of qI(n,e)){let l=$I,c=!0;switch(s.op){case"<":case"<=":l=Fq(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,c=!1;break;case"!=":case"not-in":l=$I}sU({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];sU({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function cU(n,e,t){let r=ff,i=!0;for(const s of qI(n,e)){let l=ff,c=!0;switch(s.op){case">=":case">":l=Lq(s.value),c=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,c=!1;break;case"!=":case"not-in":l=ff}oU({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];oU({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class is extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Uq(e,t,r):"array-contains"===t?new Gq(e,r):"in"===t?new $q(e,r):"not-in"===t?new Wq(e,r):"array-contains-any"===t?new zq(e,r):new is(e,t,r)}static lt(e,t,r){return"in"===t?new jq(e,r):new Hq(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(pf(t,this.value)):null!==t&&Ag(this.value)===Ag(t)&&this.ft(pf(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Uq extends is{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.ft(t)}}class jq extends is{constructor(e,t){super(e,"in",t),this.keys=dU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hq extends is{constructor(e,t){super(e,"not-in",t),this.keys=dU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class Gq extends is{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lw(t)&&aw(t.arrayValue,this.value)}}class $q extends is{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&aw(this.value.arrayValue,t)}}class Wq extends is{constructor(e,t){super(e,"not-in",t)}matches(e){if(aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!aw(this.value.arrayValue,t)}}class zq extends is{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>aw(this.value.arrayValue,r))}}class gf{constructor(e,t){this.position=e,this.inclusive=t}}class _y{constructor(e,t="asc"){this.field=e,this.dir=t}}function qq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):pf(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tc(n.position[t],e.position[t]))return!1;return!0}class kd{constructor(e,t=null,r=[],i=[],s=null,l="F",c=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=c,this.endAt=p,this._t=null,this.wt=null}}function pU(n,e,t,r,i,s,l,c){return new kd(n,e,t,r,i,s,l,c)}function yy(n){return new kd(n)}function gU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function NR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function AR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function MR(n){return null!==n.collectionGroup}function vy(n){const e=nt(n);if(null===e._t){e._t=[];const t=AR(e),r=NR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new _y(t)),e._t.push(new _y(Hr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new _y(Hr.keyField(),s))}}}return e._t}function Ks(n){const e=nt(n);if(!e.wt)if("F"===e.limitType)e.wt=lU(e.path,e.collectionGroup,vy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of vy(e))t.push(new _y(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new gf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new gf(e.startAt.position,e.startAt.inclusive):null;e.wt=lU(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function KI(n,e,t){return new kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dw(n,e){return cw(Ks(n),Ks(e))&&n.limitType===e.limitType}function mU(n){return`${xg(Ks(n))}|lt:${n.limitType}`}function xR(n){return`Query(target=${function Bq(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${my(r.value)}`;var r}).join(", ")}]`),sw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>my(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>my(t)).join(",")),`Target(${e})`}(Ks(n))}; limitType=${n.limitType})`}function RR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const c=hU(i,s,l);return i.inclusive?c<=0:c<0}(t.startAt,vy(t),r)||t.endAt&&!function(i,s,l){const c=hU(i,s,l);return i.inclusive?c>=0:c>0}(t.endAt,vy(t),r)));var t,r}function _U(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yU(n){return(e,t)=>{let r=!1;for(const i of vy(n)){const s=Kq(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Kq(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,s,l){const c=s.data.field(i),p=l.data.field(i);return null!==c&&null!==p?pf(c,p):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function vU(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ow(e)?"-0":e}}function bU(n){return{integerValue:""+n}}function wU(n,e){return eU(e)?bU(e):vU(n,e)}class ZI{constructor(){this._=void 0}}function Zq(n,e,t){return n instanceof by?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Rg?EU(n,e):n instanceof Og?CU(n,e):function(r,i){const s=DU(r,i),l=TU(s)+TU(r.yt);return SR(s)&&SR(r.yt)?bU(l):vU(r.It,l)}(n,e)}function Yq(n,e,t){return n instanceof Rg?EU(n,e):n instanceof Og?CU(n,e):t}function DU(n,e){return n instanceof wy?SR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class by extends ZI{}class Rg extends ZI{constructor(e){super(),this.elements=e}}function EU(n,e){const t=IU(e);for(const r of n.elements)t.some(i=>tc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Og extends ZI{constructor(e){super(),this.elements=e}}function CU(n,e){let t=IU(e);for(const r of n.elements)t=t.filter(i=>!tc(i,r));return{arrayValue:{values:t}}}class wy extends ZI{constructor(e,t){super(),this.It=e,this.yt=t}}function TU(n){return $r(n.integerValue||n.doubleValue)}function IU(n){return lw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hw{constructor(e,t){this.field=e,this.transform=t}}class Jq{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QI{}function SU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ey(n.key,Cr.none()):new Dy(n.key,n.data,Cr.none());{const t=n.data,r=rs.empty();let i=new $n(Hr.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Pd(n.key,r,new pa(i.toArray()),Cr.none())}}function Xq(n,e,t){n instanceof Dy?function(r,i,s){const l=r.value.clone(),c=MU(r.fieldTransforms,i,s.transformResults);l.setAll(c),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Pd?function(r,i,s){if(!YI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=MU(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(AU(r)),c.setAll(l),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fw(n,e,t,r){return n instanceof Dy?function(i,s,l,c){if(!YI(i.precondition,s))return l;const p=i.value.clone(),y=xU(i.fieldTransforms,c,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pd?function(i,s,l,c){if(!YI(i.precondition,s))return l;const p=xU(i.fieldTransforms,c,s),y=s.data;return y.setAll(AU(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,YI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function e4(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=DU(r.transform,i||null);null!=s&&(null===t&&(t=rs.empty()),t.set(r.field,s))}return t||null}function NU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&py(t,r,(i,s)=>function Qq(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rg&&r instanceof Rg||t instanceof Og&&r instanceof Og?py(t.elements,r.elements,tc):t instanceof wy&&r instanceof wy?tc(t.yt,r.yt):t instanceof by&&r instanceof by);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Dy extends QI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pd extends QI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MU(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,c=e.data.field(s.field);r.set(s.field,Yq(l,c,t[i]))}return r}function xU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,Zq(s,l,e))}return r}class Ey extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OR extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class t4{constructor(e){this.count=e}}var di,wn;function RU(n){switch(n){default:return ft();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function OU(n){if(void 0===n)return Kr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case di.OK:return pe.OK;case di.CANCELLED:return pe.CANCELLED;case di.UNKNOWN:return pe.UNKNOWN;case di.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case di.INTERNAL:return pe.INTERNAL;case di.UNAVAILABLE:return pe.UNAVAILABLE;case di.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case di.NOT_FOUND:return pe.NOT_FOUND;case di.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case di.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case di.ABORTED:return pe.ABORTED;case di.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case di.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case di.DATA_LOSS:return pe.DATA_LOSS;default:return ft()}}(wn=di||(di={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";class mf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sg(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return QB(this.inner)}size(){return this.innerSize}}const n4=new Gr(et.comparator);function Oo(){return n4}const kU=new Gr(et.comparator);function pw(...n){let e=kU;for(const t of n)e=e.insert(t.key,t);return e}function PU(n){let e=kU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nc(){return gw()}function FU(){return gw()}function gw(){return new mf(n=>n.toString(),(n,e)=>n.isEqual(e))}const r4=new Gr(et.comparator),i4=new $n(et.comparator);function Yt(...n){let e=i4;for(const t of n)e=e.add(t);return e}const s4=new $n(Wt);function JI(){return s4}class mw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_w.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mw(Ft.min(),i,JI(),Oo(),Yt())}}class _w{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _w(r,t,Yt(),Yt(),Yt())}}class XI{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class LU{constructor(e,t){this.targetId=e,this.At=t}}class VU{constructor(e,t,r=Ci.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BU{constructor(){this.Rt=0,this.bt=jU(),this.Pt=Ci.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new _w(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=jU()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class o4{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Oo(),this.qt=UU(),this.Kt=new $n(Wt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(zI(s))if(0===r){const l=new et(s.path);this.jt(t,l,sr.newNoDocument(l,Ft.min()))}else Pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,l)=>{const c=this.Xt(l);if(c){if(s.current&&zI(c.target)){const p=new et(c.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,sr.newNoDocument(p,e))}s.Dt&&(t.set(l,s.xt()),s.Nt())}});let r=Yt();this.qt.forEach((s,l)=>{let c=!0;l.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.Ut.forEach((s,l)=>l.setReadTime(e));const i=new mw(e,t,this.Kt,this.Ut,r);return this.Ut=Oo(),this.qt=UU(),this.Kt=new $n(Wt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new BU,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new $n(Wt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new BU),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function UU(){return new Gr(et.comparator)}function jU(){return new Gr(et.comparator)}const a4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class u4{constructor(e,t){this.databaseId=e,this.gt=t}}function yw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HU(n,e){return n.gt?e.toBase64():e.toUint8Array()}function c4(n,e){return yw(n,e.toTimestamp())}function Li(n){return Pt(!!n),Ft.fromTimestamp(function(e){const t=df(e);return new Er(t.seconds,t.nanos)}(n))}function kR(n,e){return(t=n,new bn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function GU(n){const e=bn.fromString(n);return Pt(QU(e)),e}function vw(n,e){return kR(n.databaseId,e.path)}function rc(n,e){const t=GU(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(WU(t))}function PR(n,e){return kR(n.databaseId,e)}function $U(n){const e=GU(n);return 4===e.length?bn.emptyPath():WU(e)}function bw(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WU(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zU(n,e,t){return{name:vw(n,e),fields:t.value.mapValue.fields}}function qU(n,e,t){const r=rc(n,e.name),i=Li(e.updateTime),s=new rs({mapValue:{fields:e.fields}}),l=sr.newFoundDocument(r,i,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function ww(n,e){let t;if(e instanceof Dy)t={update:zU(n,e.key,e.value)};else if(e instanceof Ey)t={delete:vw(n,e.key)};else if(e instanceof Pd)t={update:zU(n,e.key,e.data),updateMask:v4(e.fieldMask)};else{if(!(e instanceof OR))return ft();t={verify:vw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof by)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Rg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Og)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wy)return{fieldPath:s.field.canonicalString(),increment:l.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:c4(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function FR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Cr.updateTime(Li(i.updateTime)):void 0!==i.exists?Cr.exists(i.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let c=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),c=new by):"appendMissingElements"in l?c=new Rg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?c=new Og(l.removeAllFromArray.values||[]):"increment"in l?c=new wy(s,l.increment):ft();const p=Hr.fromServerFormat(l.fieldPath);return new hw(p,c)}(n,i)):[];var i;if(e.update){const i=rc(n,e.update.name),s=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new pa((e.updateMask.fieldPaths||[]).map(y=>Hr.fromServerFormat(y)));return new Pd(i,s,l,t,r)}return new Dy(i,s,t,r)}if(e.delete){const i=rc(n,e.delete);return new Ey(i,t)}if(e.verify){const i=rc(n,e.verify);return new OR(i,t)}return ft()}function KU(n,e){return{documents:[PR(n,e.path)]}}function LR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=PR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=PR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(D=>function(C){if("=="===C.op){if(rU(C.value))return{unaryFilter:{field:Cy(C.field),op:"IS_NAN"}};if(nU(C.value))return{unaryFilter:{field:Cy(C.field),op:"IS_NULL"}}}else if("!="===C.op){if(rU(C.value))return{unaryFilter:{field:Cy(C.field),op:"IS_NOT_NAN"}};if(nU(C.value))return{unaryFilter:{field:Cy(C.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cy(C.field),op:m4(C.op),value:C.value}}}(D));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Cy((D=y).field),direction:g4(D.dir)};var D})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.gt||sw(y)?y:{value:y});var y,c,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function ZU(n){let e=$U(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let s=[];t.where&&(s=YU(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new _y(Ty((C=D).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let c=null;t.limit&&(c=function(D){let C;return C="object"==typeof D?D.value:D,sw(C)?null:C}(t.limit));let p=null;var D;t.startAt&&(p=new gf((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new gf(D.values||[],!D.before)}(t.endAt)),pU(e,i,l,s,c,"F",p,y)}function YU(n){return n?void 0!==n.unaryFilter?[y4(n)]:void 0!==n.fieldFilter?[_4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>YU(e)).reduce((e,t)=>e.concat(t)):ft():[]}function g4(n){return a4[n]}function m4(n){return l4[n]}function Cy(n){return{fieldPath:n.canonicalString()}}function Ty(n){return Hr.fromServerFormat(n.fieldPath)}function _4(n){return is.create(Ty(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function y4(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ty(n.unaryFilter.field);return is.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ty(n.unaryFilter.field);return is.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ty(n.unaryFilter.field);return is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ty(n.unaryFilter.field);return is.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function v4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JU(e)),e=b4(n.get(t),e);return JU(e)}function b4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function JU(n){return n+"\x01\x01"}function ic(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&ft(),n.charAt(l+1)){case"\x01":const c=n.substring(s,l);let p;0===i.length?p=c:(i+=c,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:ft()}s=l+2}return new bn(r)}const XU=["userId","batchId"];function eS(n,e){return[n,Zs(e)]}function ej(n,e,t){return[n,Zs(e),t]}const w4={},D4=["prefixPath","collectionGroup","readTime","documentId"],E4=["prefixPath","collectionGroup","documentId"],C4=["collectionGroup","readTime","prefixPath","documentId"],T4=["canonicalId","targetId"],I4=["targetId","path"],S4=["path","targetId"],N4=["collectionId","parent"],A4=["indexId","uid"],M4=["uid","sequenceNumber"],x4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R4=["indexId","uid","orderedDocumentKey"],O4=["userId","collectionPath","documentId"],k4=["userId","collectionPath","largestBatchId"],P4=["userId","collectionGroup","largestBatchId"],tj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F4=[...tj,"documentOverlays"],nj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rj=nj,L4=[...rj,"indexConfiguration","indexState","indexEntries"];class VR extends KB{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Vi(n,e){const t=nt(n);return Hl.M(t.ie,e)}class BR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Xq(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FU();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let c=this.applyToLocalView(l,s.mutatedFields);c=t.has(i.key)?null:c;const p=SU(l,c);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&py(this.mutations,e.mutations,(t,r)=>NU(t,r))&&py(this.baseMutations,e.baseMutations,(t,r)=>NU(t,r))}}class UR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=r4;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new UR(e,t,r,i)}}class jR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _f{constructor(e,t,r,i,s=Ft.min(),l=Ft.min(),c=Ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c}withSequenceNumber(e){return new _f(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ij{constructor(e){this.re=e}}function sj(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vw(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:yw(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kg(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:kg(e.version)}}var i,s;return r}function tS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pg(n){const e=new Er(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function Fg(n,e){const t=(e.baseMutations||[]).map(s=>FR(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>FR(n.re,s)),i=Er.fromMillis(e.localWriteTimeMs);return new BR(e.batchId,i,t,r)}function Dw(n){const e=Pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pg(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=Ks(yy($U(i.documents[0])))):r=Ks(ZU(n.query)),new _f(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ci.fromBase64String(n.resumeToken))}function oj(n,e){const t=kg(e.snapshotVersion),r=kg(e.lastLimboFreeSnapshotVersion);let i;i=zI(e.target)?KU(n.re,e.target):LR(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function HR(n){const e=ZU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?KI(e,e.limit,"L"):e}function GR(n,e){return new jR(e.largestBatchId,FR(n.re,e.overlayMutation))}function aj(n,e){const t=e.path.lastSegment();return[n,Zs(e.path.popLast()),t]}function lj(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kg(r.readTime),documentKey:Zs(r.documentKey.path),largestBatchId:r.largestBatchId}}class B4{getBundleMetadata(e,t){return uj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Pg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return uj(e).put({bundleId:(r=t).id,createTime:kg(Li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:HR(i.bundledQuery),readTime:Pg(i.readTime)};var i})}saveNamedQuery(e,t){return cj(e).put({name:(r=t).name,readTime:kg(Li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uj(n){return Vi(n,"bundles")}function cj(n){return Vi(n,"namedQueries")}class nS{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new nS(e,t.uid||"")}getOverlay(e,t){return Ew(e).get(aj(this.userId,t)).next(r=>r?GR(this.It,r):null)}getOverlays(e,t){const r=nc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const c=new jR(t,l);i.push(this.ue(e,c))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Zs(l.getCollectionPath())));const s=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Ew(e).Y("collectionPathOverlayIndex",c))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=nc(),s=Zs(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ew(e).W("collectionPathOverlayIndex",l).next(c=>{for(const p of c){const y=GR(this.It,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=nc();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ew(e).Z({index:"collectionGroupOverlayIndex",range:c},(p,y,D)=>{const C=GR(this.It,y);s.size()<i||C.largestBatchId===l?(s.set(C.getKey(),C),l=C.largestBatchId):D.done()}).next(()=>s)}ue(e,t){return Ew(e).put(function(r,i,s){const[l,c,p]=aj(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ww(r.re,s.mutation)}}(this.It,this.userId,t))}}function Ew(n){return Vi(n,"documentOverlays")}class Lg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe($r(e.integerValue));else if("doubleValue"in e){const r=$r(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ow(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ng(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?iU(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),et.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function U4(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function dj(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=U4(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Lg.Te=new Lg;class j4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=dj(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=dj(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class H4{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class G4{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Cw{constructor(){this.Be=new j4,this.Le=new H4(this.Be),this.Ue=new G4(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Vg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vg(this.indexId,this.documentKey,this.arrayValue,r)}}function Bg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hj(n.arrayValue,e.arrayValue),0!==t?t:(t=hj(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function hj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $4{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=wR(e);if(void 0!==t&&!this.ze(t))return!1;const r=Tg(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class W4{constructor(){this.Ye=new $R}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(fa.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(fa.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class $R{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(bn.comparator)).toArray()}}const rS=new Uint8Array(0);class z4{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new $R,this.Ze=new mf(r=>xg(r),(r,i)=>cw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Zs(i)};return fj(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$B(t),""],!1,!0);return fj(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(ic(l.parent))}return r})}addFieldIndex(e,t){const r=iS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Iw(e);return s.next(c=>{l.put(lj(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=iS(e),i=Iw(e),s=Tw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Tw(e);let i=!0;const s=new Map;return ce.forEach(this.tn(t),l=>this.en(e,l).next(c=>{i&&(i=!!c),s.set(l,c)})).next(()=>{if(i){let l=Yt();const c=[];return ce.forEach(s,(p,y)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=p,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(ke=>`${ke.fieldPath}:${ke.kind}`).join(",")}`} to execute ${xg(t)}`);const C=function(ke,Ne){const je=wR(Ne);if(void 0===je)return null;for(const We of qI(ke,je.fieldPath))switch(We.op){case"array-contains-any":return We.value.arrayValue.values||[];case"array-contains":return[We.value]}return null}(y,p),M=function(ke,Ne){const je=new Map;for(const We of Tg(Ne))for(const ht of qI(ke,We.fieldPath))switch(ht.op){case"==":case"in":je.set(We.fieldPath.canonicalString(),ht.value);break;case"not-in":case"!=":return je.set(We.fieldPath.canonicalString(),ht.value),Array.from(je.values())}return null}(y,p),R=function(ke,Ne){const je=[];let We=!0;for(const ht of Tg(Ne)){const Lt=0===ht.kind?uU(ke,ht.fieldPath,ke.startAt):cU(ke,ht.fieldPath,ke.startAt);je.push(Lt.value),We&&(We=Lt.inclusive)}return new gf(je,We)}(y,p),F=function(ke,Ne){const je=[];let We=!0;for(const ht of Tg(Ne)){const Lt=0===ht.kind?cU(ke,ht.fieldPath,ke.endAt):uU(ke,ht.fieldPath,ke.endAt);je.push(Lt.value),We&&(We=Lt.inclusive)}return new gf(je,We)}(y,p),H=this.nn(p,y,R),K=this.nn(p,y,F),ve=this.sn(p,y,M),Te=this.rn(p.indexId,C,H,R.inclusive,K,F.inclusive,ve);return ce.forEach(Te,ke=>r.J(ke,t.limit).next(Ne=>{Ne.forEach(je=>{const We=et.fromSegments(je.documentKey);l.has(We)||(l=l.add(We),c.push(We))})}))}).next(()=>c)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,l,c){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),D=[];for(let C=0;C<p;++C){const M=t?this.on(t[C/y]):rS,R=this.un(e,M,r[C%y],i),F=this.cn(e,M,s[C%y],l),H=c.map(K=>this.un(e,M,K,!0));D.push(...this.createRange(R,F,H))}return D}un(e,t,r,i){const s=new Vg(e,et.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new Vg(e,et.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new $4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const c of s)r.We(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(l){let c=new $n(Hr.comparator),p=!1;for(const y of l.filters){const D=y;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?p=!0:c=c.add(D.field))}for(const y of l.orderBy)y.field.isKeyField()||(c=c.add(y.field));return c.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Cw;for(const i of Tg(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.qe(i.kind);Lg.Te.ce(s,l)}return r.$e()}on(e){const t=new Cw;return Lg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Cw;return Lg.Te.ce(Mg(this.databaseId,t),r.qe(function(i){const s=Tg(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Cw);let s=0;for(const l of Tg(e)){const c=r[s++];for(const p of i)if(this.ln(t,l.fieldPath)&&lw(c))i=this.fn(i,l,c);else{const y=p.qe(l.kind);Lg.Te.ce(c,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const c of i){const p=new Cw;p.seed(c.$e()),Lg.Te.ce(l,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof is&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iS(e),i=Iw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return ce.forEach(s,c=>i.get([c.indexId,this.uid]).next(p=>{l.push(function(y,D){const C=D?new nw(D.sequenceNumber,new fa(Pg(D.readTime),new et(ic(D.documentKey)),D.largestBatchId)):nw.empty(),M=y.fields.map(([R,F])=>new jI(Hr.fromServerFormat(R),F));return new UI(y.indexId,y.collectionGroup,M,C)}(c,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iS(e),s=Iw(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>ce.forEach(c,p=>s.put(lj(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),ce.forEach(c,p=>this.wn(e,i,p).next(y=>{const D=this.mn(s,p);return y.isEqual(D)?ce.resolve():this.gn(e,s,p,y,D)}))))})}yn(e,t,r,i){return Tw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Tw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Tw(e);let s=new $n(Bg);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,c)=>{s=s.add(new Vg(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}mn(e,t){let r=new $n(Bg);const i=this.an(t,e);if(null==i)return r;const s=wR(t);if(null!=s){const l=e.data.field(s.fieldPath);if(lw(l))for(const c of l.arrayValue.values||[])r=r.add(new Vg(t.indexId,e.key,this.on(c),i))}else r=r.add(new Vg(t.indexId,e.key,rS,i));return r}gn(e,t,r,i,s){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(c,p,y,D,C){const M=c.getIterator(),R=p.getIterator();let F=gy(M),H=gy(R);for(;F||H;){let K=!1,ve=!1;if(F&&H){const Te=y(F,H);Te<0?ve=!0:Te>0&&(K=!0)}else null!=F?ve=!0:K=!0;K?(D(H),H=gy(R)):ve?(C(F),F=gy(M)):(F=gy(M),H=gy(R))}}(i,s,Bg,c=>{l.push(this.yn(e,t,r,c))},c=>{l.push(this.pn(e,t,r,c))}),ce.waitFor(l)}_n(e){let t=1;return Iw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>Bg(l,c)).filter((l,c,p)=>!c||0!==Bg(l,p[c-1]));const i=[];i.push(e);for(const l of r){const c=Bg(l,e),p=Bg(l,t);if(0===c)i[0]=e.Ke();else if(c>0&&p<0)i.push(l),i.push(l.Ke());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2)s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,rS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,rS,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pj)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(pj)}}function fj(n){return Vi(n,"collectionParents")}function Tw(n){return Vi(n,"indexEntries")}function iS(n){return Vi(n,"indexConfiguration")}function Iw(n){return Vi(n,"indexState")}function pj(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;DR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fa(e.readTime,e.documentKey,t)}const gj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ko{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ko(e,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mj(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let c=0;const p=r.Z({range:l},(D,C,M)=>(c++,M.delete()));s.push(p.next(()=>{Pt(1===c)}));const y=[];for(const D of t.mutations){const C=ej(e,D.key.path,t.batchId);s.push(i.delete(C)),y.push(D.key)}return ce.waitFor(s).next(()=>y)}function sS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}ko.DEFAULT_COLLECTION_PERCENTILE=10,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ko.DEFAULT=new ko(41943040,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ko.DISABLED=new ko(-1,0,0);class oS{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Pt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new oS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yf(e).Z({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Iy(e),l=yf(e);return l.add({}).next(c=>{Pt("number"==typeof c);const p=new BR(c,t,r,i),y=function(M,R,F){const H=F.baseMutations.map(ve=>ww(M.re,ve)),K=F.mutations.map(ve=>ww(M.re,ve));return{userId:R,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:H,mutations:K}}(this.It,this.userId,p),D=[];let C=new $n((M,R)=>Wt(M.canonicalString(),R.canonicalString()));for(const M of i){const R=ej(this.userId,M.key.path,c);C=C.add(M.key.path.popLast()),D.push(l.put(y)),D.push(s.put(R,w4))}return C.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.In[c]=p.keys()}),ce.waitFor(D).next(()=>p)})}lookupMutationBatch(e,t){return yf(e).get(t).next(r=>r?(Pt(r.userId===this.userId),Fg(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return yf(e).Z({index:"userMutationsIndex",range:i},(l,c,p)=>{c.userId===this.userId&&(Pt(c.batchId>=r),s=Fg(this.It,c)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fg(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=eS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Iy(e).Z({range:i},(l,c,p)=>{const[y,D,C]=l,M=ic(D);if(y===this.userId&&t.path.isEqual(M))return yf(e).get(C).next(R=>{if(!R)throw ft();Pt(R.userId===this.userId),s.push(Fg(this.It,R))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Wt);const i=[];return t.forEach(s=>{const l=eS(this.userId,s.path),c=IDBKeyRange.lowerBound(l),p=Iy(e).Z({range:c},(y,D,C)=>{const[M,R,F]=y,H=ic(R);M===this.userId&&s.path.isEqual(H)?r=r.add(F):C.done()});i.push(p)}),ce.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=eS(this.userId,r),l=IDBKeyRange.lowerBound(s);let c=new $n(Wt);return Iy(e).Z({range:l},(p,y,D)=>{const[C,M,R]=p,F=ic(M);C===this.userId&&r.isPrefixOf(F)?F.length===i&&(c=c.add(R)):D.done()}).next(()=>this.En(e,c))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(yf(e).get(s).next(l=>{if(null===l)throw ft();Pt(l.userId===this.userId),r.push(Fg(this.It,l))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mj(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Iy(e).Z({range:r},(s,l,c)=>{if(s[0]===this.userId){const p=ic(s[1]);i.push(p)}else c.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return _j(e,this.userId,t)}Rn(e){return yj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _j(n,e,t){const r=eS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return Iy(n).Z({range:s,X:!0},(c,p,y)=>{const[D,C,M]=c;D===e&&C===i&&(l=!0),y.done()}).next(()=>l)}function yf(n){return Vi(n,"mutations")}function Iy(n){return Vi(n,"documentMutations")}function yj(n){return Vi(n,"mutationQueues")}class Ug{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ug(0)}static vn(){return new Ug(-1)}}class q4{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ug(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ft.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Sy(e).Z((l,c)=>{const p=Dw(c);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Sy(e).Z((r,i)=>{const s=Dw(i);t(s)})}Vn(e){return vj(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Sn(e,t){return vj(e).put("targetGlobalKey",t)}Dn(e,t){return Sy(e).put(oj(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Sy(e).Z({range:i,index:"queryTargetsIndex"},(l,c,p)=>{const y=Dw(c);cw(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=vf(e);return t.forEach(l=>{const c=Zs(l.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=vf(e);return ce.forEach(t,s=>{const l=Zs(s.path);return ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=vf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vf(e);let s=Yt();return i.Z({range:r,X:!0},(l,c,p)=>{const y=ic(l[1]),D=new et(y);s=s.add(D)}).next(()=>s)}containsKey(e,t){const r=Zs(t.path),i=IDBKeyRange.bound([r],[$B(r)],!1,!0);let s=0;return vf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,c],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}se(e,t){return Sy(e).get(t).next(r=>r?Dw(r):null)}}function Sy(n){return Vi(n,"targets")}function vj(n){return Vi(n,"targetGlobal")}function vf(n){return Vi(n,"targetDocuments")}function bj([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class K4{constructor(e){this.xn=e,this.buffer=new $n(bj),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Z4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cf(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uf(r)}yield t.Fn(3e5)}))}}class Y4{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ro.at);const r=new K4(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(gj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gj):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,l,c,p,y;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),i=this.params.maximumSequenceNumbersToCollect):i=C,l=Date.now(),this.nthSequenceNumber(e,i))).next(C=>(r=C,c=Date.now(),this.removeTargets(e,r,t))).next(C=>(s=C,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(C=>(y=Date.now(),vR()<=jl.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(c-l)+`ms\n\tRemoved ${s} targets in `+(p-c)+`ms\n\tRemoved ${C} documents in `+(y-p)+`ms\nTotal Duration: ${y-D}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:C})))}}class Q4{constructor(e,t){this.db=e,this.garbageCollector=new Y4(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return aS(e,r)}removeReference(e,t,r){return aS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aS(e,t)}Gn(e,t){return function(r,i){let s=!1;return yj(r).tt(l=>_j(r,l,i).next(c=>(c&&(s=!0),ce.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(l,c)=>{if(c<=t){const p=this.Gn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ft.min()),vf(e).delete([0,Zs(l.path)])))});i.push(p)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aS(e,t)}Kn(e,t){const r=vf(e);let i,s=Ro.at;return r.Z({index:"documentTargetsIndex"},([l,c],{path:p,sequenceNumber:y})=>{0===l?(s!==Ro.at&&t(new et(ic(i)),s),s=y,i=p):s=Ro.at}).next(()=>{s!==Ro.at&&t(new et(ic(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aS(n,e){return vf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zs(e.path),sequenceNumber:r}));var r}class wj{constructor(){this.changes=new mf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class J4{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jg(e).put(r)}removeEntry(e,t,r){return jg(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],tS(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=sr.newInvalidDocument(t);return jg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sw(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:sr.newInvalidDocument(t)};return jg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sw(t))},(i,s)=>{r={document:this.jn(t,s),size:sS(s)}}).next(()=>r)}getEntries(e,t){let r=Oo();return this.zn(e,t,(i,s)=>{const l=this.jn(i,s);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Oo(),i=new Gr(et.comparator);return this.zn(e,t,(s,l)=>{const c=this.jn(s,l);r=r.insert(s,c),i=i.insert(s,sS(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new $n(Tj);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(Sw(i.first()),Sw(i.last())),l=i.getIterator();let c=l.getNext();return jg(e).Z({index:"documentKeyIndex",range:s},(p,y,D)=>{const C=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;c&&Tj(c,C)<0;)r(c,null),c=l.getNext();c&&c.isEqual(C)&&(r(c,y),c=l.hasNext()?l.getNext():null),c?D.j(Sw(c)):D.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jg(e).W(IDBKeyRange.bound(i,s,!0)).next(l=>{let c=Oo();for(const p of l){const y=this.jn(et.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);c=c.insert(y.key,y)}return c})}getAllFromCollectionGroup(e,t,r,i){let s=Oo();const l=Cj(t,r),c=Cj(t,fa.max());return jg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(p,y,D)=>{const C=this.jn(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(C.key,C),s.size===i&&D.done()}).next(()=>s)}newChangeBuffer(e){return new X4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ej(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Qn(e,t){return Ej(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function V4(n,e){let t;if(e.document)t=qU(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=Pg(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=et.fromSegments(e.unknownDocument.path),i=Pg(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return Ft.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return sr.newInvalidDocument(e)}}function Dj(n){return new J4(n)}class X4 extends wj{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new mf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((s,l)=>Wt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const c=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,c.readTime)),l.isValidDocument()){const p=sj(this.Yn.It,l);i=i.add(s.path.popLast()),r+=sS(p)-c.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=c.size,this.trackRemovals){const p=sj(this.Yn.It,l.convertToNoDocument(Ft.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,l)=>{this.Xn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function Ej(n){return Vi(n,"remoteDocumentGlobal")}function jg(n){return Vi(n,"remoteDocumentsV14")}function Sw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Cj(n,e){const t=e.documentKey.path.toArray();return[n,tS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Tj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Wt(t[s],r[s]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class eK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ij{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&fw(r.mutation,i,pa.empty(),Er.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=nc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=pw();return s.forEach((c,p)=>{l=l.insert(c,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=nc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let s=Oo();const l=gw(),c=gw();return t.forEach((p,y)=>{const D=r.get(y.key);i.has(y.key)&&(void 0===D||D.mutation instanceof Pd)?s=s.insert(y.key,y):void 0!==D&&(l.set(y.key,D.mutation.getFieldMask()),fw(D.mutation,y,D.mutation.getFieldMask(),Er.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,D)=>l.set(y,D)),t.forEach((y,D)=>{var C;return c.set(y,new eK(D,null!==(C=l.get(y))&&void 0!==C?C:null))}),c))}recalculateAndSaveOverlays(e,t){const r=gw();let i=new Gr((l,c)=>l-c),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let D=r.get(p)||pa.empty();D=c.applyToLocalView(y,D),r.set(p,D);const C=(i.get(c.batchId)||Yt()).add(p);i=i.insert(c.batchId,C)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const p=c.getNext(),y=p.key,D=p.value,C=FU();D.forEach(M=>{if(!s.has(M)){const R=SU(t.get(M),r.get(M));null!==R&&C.set(M,R),s=s.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,C))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):MR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(nc());let c=-1,p=s;return l.next(y=>ce.forEach(y,(D,C)=>(c<C.largestBatchId&&(c=C.largestBatchId),s.get(D)?ce.resolve():this.getBaseDocument(e,D,C).next(M=>{p=p.insert(D,M)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Yt())).next(D=>({batchId:c,changes:PU(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=pw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=pw();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,c=>{const p=(y=t,D=c.child(i),new kd(D,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,D;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((D,C)=>{s=s.insert(D,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((c,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,sr.newInvalidDocument(y)))});let l=pw();return i.forEach((c,p)=>{const y=s.get(c);void 0!==y&&fw(y.mutation,p,pa.empty(),Er.now()),RR(t,p)&&(l=l.insert(c,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(sr.newInvalidDocument(t))}}class tK{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Li(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:HR(r.bundledQuery),readTime:Li(r.readTime)}),ce.resolve();var r}}class nK{constructor(){this.overlays=new Gr(et.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=nc(),s=t.length+1,l=new et(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const p=c.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Gr((y,D)=>y-D);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let D=s.get(y.largestBatchId);null===D&&(D=nc(),s=s.insert(y.largestBatchId,D)),D.set(y.getKey(),y)}}const c=nc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,D)=>c.set(y,D)),!(c.size()>=i)););return ce.resolve(c)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new jR(t,r));let s=this.es.get(t);void 0===s&&(s=Yt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class WR{constructor(){this.ns=new $n(Bi.ss),this.rs=new $n(Bi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Bi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Bi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new et(new bn([])),r=new Bi(t,e),i=new Bi(t,e+1),s=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),s.push(l.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new et(new bn([])),r=new Bi(t,e),i=new Bi(t,e+1);let s=Yt();return this.rs.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Bi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Bi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return et.comparator(e.key,t.key)||Wt(e._s,t._s)}static os(e,t){return Wt(e._s,t._s)||et.comparator(e.key,t.key)}}class rK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new $n(Bi.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const l=new BR(s,t,r,i);this.mutationQueue.push(l);for(const c of i)this.gs=this.gs.add(new Bi(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bi(t,0),i=new Bi(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],l=>{const c=this.ys(l._s);s.push(c)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Wt);return t.forEach(i=>{const s=new Bi(i,0),l=new Bi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,l],c=>{r=r.add(c._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const l=new Bi(new et(s),0);let c=new $n(Wt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(c=c.add(p._s)),!0)},l),ce.resolve(this.Is(c))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,i=>{const s=new Bi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Bi(t,0),i=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iK{constructor(e){this.Es=e,this.docs=new Gr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=Oo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sr.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=Oo();const s=new et(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:p}}=l.getNext();if(!t.isPrefixOf(c.path))break;c.path.length>t.length+1||DR(zB(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sK(this)}getSize(e){return ce.resolve(this.size)}}class sK extends wj{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class oK{constructor(e){this.persistence=e,this.Rs=new mf(t=>xg(t),cw),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new WR,this.targetCount=0,this.vs=Ug.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ug(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((l,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.Rs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class Sj{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ro(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new oK(this),this.indexManager=new W4,this.remoteDocumentCache=new iK(r=>this.referenceDelegate.xs(r)),this.It=new ij(t),this.Ns=new tK(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new rK(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new aK(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class aK extends KB{constructor(e){super(),this.currentSequenceNumber=e}}class lS{constructor(e){this.persistence=e,this.Fs=new WR,this.$s=null}static Bs(e){return new lS(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const i=et.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Ft.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class lK{constructor(e){this.It=e}$(e,t,r,i){const s=new HI("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XU,{unique:!0}),c.createObjectStore("documentMutations"),Nj(e),function(c){c.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Nj(e)),l=l.next(()=>function(c){const p=c.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(c,p){return p.store("mutations").W().next(y=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XU,{unique:!0});const D=p.store("mutations"),C=y.map(M=>D.put(M));return ce.waitFor(C)})}(e,s))),l=l.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(s))),r<6&&i>=6&&(l=l.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(s))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(s))),r<11&&i>=11&&(l=l.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(c){const p=c.createObjectStore("documentOverlays",{keyPath:O4});p.createIndex("collectionPathOverlayIndex",k4,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",P4,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(c){const p=c.createObjectStore("remoteDocumentsV14",{keyPath:D4});p.createIndex("documentKeyIndex",E4),p.createIndex("collectionGroupIndex",C4)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,s))),r<15&&i>=15&&(l=l.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:A4}).createIndex("sequenceNumberIndex",M4,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:x4}).createIndex("documentKeyIndex",R4,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=sS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ce.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(c=>ce.forEach(c,p=>{Pt(p.userId===s.userId);const y=Fg(this.It,p);return mj(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((l,c)=>{const p=new bn(l),y=[0,Zs(p)];s.push(t.get(y).next(D=>D?ce.resolve():t.put({targetId:0,path:Zs(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:N4});const r=t.store("collectionParents"),i=new $R,s=l=>{if(i.add(l)){const c=l.lastSegment(),p=l.popLast();return r.put({collectionId:c,parent:Zs(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,c)=>{const p=new bn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,c,p],y)=>{const D=ic(c);return s(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Dw(i),l=oj(this.It,s);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,l)=>{const c=t.store("remoteDocumentsV14"),p=(y=l,y.document?new et(bn.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):ft()).path.toArray();var y;const D={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(D))}).next(()=>ce.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Dj(this.It),s=new Sj(lS.Bs,this.It.re);return r.W().next(l=>{const c=new Map;return l.forEach(p=>{var y;let D=null!==(y=c.get(p.userId))&&void 0!==y?y:Yt();Fg(this.It,p).keys().forEach(C=>D=D.add(C)),c.set(p.userId,D)}),ce.forEach(c,(p,y)=>{const D=new Fi(y),C=nS.oe(this.It,D),M=s.getIndexManager(D),R=oS.oe(D,this.It,M,s.referenceDelegate);return new Ij(i,R,C,M).recalculateAndSaveOverlaysForDocumentKeys(new VR(t,Ro.at),p).next()})})}}function Nj(n){n.createObjectStore("targetDocuments",{keyPath:I4}).createIndex("documentTargetsIndex",S4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T4,{unique:!0}),n.createObjectStore("targetGlobal")}const zR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qR{constructor(e,t,r,i,s,l,c,p,y,D,C=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=l,this.document=c,this.Js=y,this.Ys=D,this.Xs=C,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!qR.C())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Q4(this,i),this.ii=t+"main",this.It=new ij(p),this.ri=new Hl(this.ii,this.Xs,new lK(this.It)),this.Cs=new q4(this.referenceDelegate,this.It),this.remoteDocumentCache=Dj(this.It),this.Ns=new B4,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&Kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,zR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ro(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(cf(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Nw(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return uS(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vi(r,"clientMetadata");return i.W().next(s=>{const l=e.Ii(s,18e5),c=s.filter(p=>-1===l.indexOf(p));return ce.forEach(c,p=>i.delete(p.clientId)).next(()=>c)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):Nw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,zR);return!1}}return!(!this.networkEnabled||!this.inForeground)||uS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new VR(t,Ro.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>uS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return oS.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z4(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return nS.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Xs)?L4:14===l?rj:13===l?nj:12===l?F4:11===l?tj:void ft();var l;let c;return this.ri.runTransaction(e,i,s,p=>(c=new VR(p,this.Ss?this.Ss.next():Ro.at),"readwrite-primary"===t?this.fi(c).next(y=>!!y||this.di(c)).next(y=>{if(!y)throw Kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(pe.FAILED_PRECONDITION,qB);return r(c)}).next(y=>this.wi(c).next(()=>y)):this.Vi(c).next(()=>r(c)))).then(p=>(c.raiseOnCommittedEvent(),p))}Vi(e){return Nw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,zR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nw(e).put("owner",t)}static C(){return Hl.C()}_i(e){const t=Nw(e);return t.get("owner").next(r=>this.mi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Kr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nw(n){return Vi(n,"owner")}function uS(n){return Vi(n,"clientMetadata")}function KR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ZR(e,t.fromCache,r,i)}}class Aj{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(gU(t))return ce.resolve(null);let r=Ks(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=KI(t,null,"F"),r=Ks(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=Yt(...s);return this.Ni.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,c);return this.$i(t,y,l,p.readTime)?this.ki(e,KI(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return gU(t)||i.isEqual(Ft.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const l=this.Fi(t,s);return this.$i(t,l,r,i)?this.Mi(e,t):(vR()<=jl.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xR(t)),this.Bi(e,l,t,WB(i,-1)))})}Fi(e,t){let r=new $n(yU(e));return t.forEach((i,s)=>{RR(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return vR()<=jl.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",xR(t)),this.Ni.getDocumentsMatchingQuery(e,t,fa.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class uK{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Gr(Wt),this.qi=new mf(s=>xg(s),cw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ij(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Mj(n,e,t,r){return new uK(n,e,t,r)}function xj(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,be.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],c=[];let p=Yt();for(const y of i){l.push(y.batchId);for(const D of y.mutations)p=p.add(D.key)}for(const y of s){c.push(y.batchId);for(const D of y.mutations)p=p.add(D.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:c}))})})}),YR.apply(this,arguments)}function cK(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,c,p,y){const D=p.batch,C=D.keys();let M=ce.resolve();return C.forEach(R=>{M=M.next(()=>y.getEntry(c,R)).next(F=>{const H=p.docVersions.get(R);Pt(null!==H),F.version.compareTo(H)<0&&(D.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),y.addEntry(F)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(c,D))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Yt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(c=c.add(l.batch.mutations[p].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Rj(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function dK(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const c=[];e.targetChanges.forEach((D,C)=>{const M=i.get(C);if(!M)return;c.push(t.Cs.removeMatchingKeys(s,D.removedDocuments,C).next(()=>t.Cs.addMatchingKeys(s,D.addedDocuments,C)));let R=M.withSequenceNumber(s.currentSequenceNumber);var F,H,K;e.targetMismatches.has(C)?R=R.withResumeToken(Ci.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):D.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(D.resumeToken,r)),i=i.insert(C,R),H=R,K=D,(0===(F=M).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&c.push(t.Cs.updateTargetData(s,R))});let p=Oo(),y=Yt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,D))}),c.push(Oj(s,l,e.documentUpdates).next(D=>{p=D.Wi,y=D.zi})),!r.isEqual(Ft.min())){const D=t.Cs.getLastRemoteSnapshotVersion(s).next(C=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(D)}return ce.waitFor(c).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ui=i,s))}function Oj(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Oo();return t.forEach((c,p)=>{const y=s.get(c);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(c)),p.isNoDocument()&&p.version.isEqual(Ft.min())?(e.removeEntry(c,p.readTime),l=l.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(c,p)):Be("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function hK(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ny(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new _f(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Ay(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,be.Z)(function*(n,e,t){const r=nt(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!cf(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),QR.apply(this,arguments)}function cS(n,e,t){const r=nt(n);let i=Ft.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(c,p,y){const D=nt(c),C=D.qi.get(y);return void 0!==C?ce.resolve(D.Ui.get(C)):D.Cs.getTargetData(p,y)}(r,l,Ks(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,c.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ft.min(),t?s:Yt())).next(c=>(Fj(r,_U(e),c),{documents:c,Hi:s})))}function kj(n,e){const t=nt(n),r=nt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(l=>l?l.target:null))}function Pj(n,e){const t=nt(n),r=t.Ki.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,WB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Fj(t,e,i),i))}function Fj(n,e,t){let r=n.Ki.get(e)||Ft.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function JR(){return JR=(0,be.Z)(function*(n,e,t,r){const i=nt(n);let s=Yt(),l=Oo();for(const y of t){const D=e.Ji(y.metadata.name);y.document&&(s=s.add(D));const C=e.Yi(y);C.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(D,C)}const c=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Ny(i,(y=r,Ks(yy(bn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>Oj(y,c,l).next(D=>(c.apply(y),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,D.Wi,D.zi)).next(()=>D.Wi)))}),JR.apply(this,arguments)}function pK(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,be.Z)(function*(n,e,t=Yt()){const r=yield Ny(n,Ks(HR(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Li(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(s,e);const c=r.withResumeToken(Ci.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(c.targetId,c),i.Cs.updateTargetData(s,c).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),XR.apply(this,arguments)}function Lj(n,e){return`firestore_clients_${n}_${e}`}function Vj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eO(n,e){return`firestore_targets_${n}_${e}`}class dS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Fe(i.error.code,i.error.message))),l?new dS(e,t,i.state,s):(Kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Aw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Fe(r.error.code,r.error.message))),s?new Aw(e,r.state,i):(Kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=JI();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=eU(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new hS(e,s):(Kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tO{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tO(t.clientId,t.onlineState):(Kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nO{constructor(){this.activeTargetIds=JI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rO{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gr(Wt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=Lj(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new nO),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(Lj(e.persistenceKey,i));if(s){const l=hS.Zi(i,s);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eO(this.persistenceKey,e));if(r){const i=Aw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let l=Ro.at;if(null!=s)try{const c=JSON.parse(s);Pt("number"==typeof c),l=c}catch(c){Kr("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(r.newValue);i!==Ro.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new dS(this.currentUser,e,t,r),s=Vj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=Vj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=eO(this.persistenceKey,e),s=new Aw(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return hS.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return dS.Zi(new Fi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Aw.Zi(i,t)}yr(e){return tO.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),l=[],c=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||c.push(p)}),this.syncEngine.Br(l,c).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=JI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Bj{constructor(){this.Lr=new nO,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new nO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gK{qr(e){}shutdown(){}}class Uj{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _K{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class yK extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const l=this.ho(e,t);Be("RestConnection","Sending: ",l,r);const c={};return this.lo(c,i,s),this.fo(e,l,c,r).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw Cg("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}_o(e,t,r,i,s,l){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${mK[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,l)=>{const c=new mq;c.setWithCredentials(!0),c.listenOnce(fq.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case yR.NO_ERROR:const y=c.getResponseJson();Be("Connection","XHR received:",JSON.stringify(y)),s(y);break;case yR.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case yR.HTTP_ERROR:const D=c.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",c.getResponseText()),D>0){const C=c.getResponseJson().error;if(C&&C.status&&C.message){const M=function(R){const F=R.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(F)>=0?F:pe.UNKNOWN}(C.status);l(new Fe(M,C.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);c.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dq(),l=hq(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new gq({})),this.lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Be("Connection","Creating WebChannel: "+p,c);const y=s.createWebChannel(p,c);let D=!1,C=!1;const M=new _K({Hr:F=>{C?Be("Connection","Not sending because WebChannel is closed:",F):(D||(Be("Connection","Opening WebChannel transport."),y.open(),D=!0),Be("Connection","WebChannel sending:",F),y.send(F))},Jr:()=>y.close()}),R=(F,H,K)=>{F.listen(H,ve=>{try{K(ve)}catch(Te){setTimeout(()=>{throw Te},0)}})};return R(y,BI.EventType.OPEN,()=>{C||Be("Connection","WebChannel transport opened.")}),R(y,BI.EventType.CLOSE,()=>{C||(C=!0,Be("Connection","WebChannel transport closed"),M.io())}),R(y,BI.EventType.ERROR,F=>{C||(C=!0,Cg("Connection","WebChannel transport errored:",F),M.io(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),R(y,BI.EventType.MESSAGE,F=>{var H;if(!C){const K=F.data[0];Pt(!!K);const ve=K,Te=ve.error||(null===(H=ve[0])||void 0===H?void 0:H.error);if(Te){Be("Connection","WebChannel received error:",Te);const ke=Te.status;let Ne=function(We){const ht=di[We];if(void 0!==ht)return OU(ht)}(ke),je=Te.message;void 0===Ne&&(Ne=pe.INTERNAL,je="Unknown error status: "+ke+" with message "+Te.message),C=!0,M.io(new Fe(Ne,je)),y.close()}else Be("Connection","WebChannel received:",K),M.ro(K)}}),R(l,pq.STAT_EVENT,F=>{F.stat===BB.PROXY?Be("Connection","Detected buffering proxy"):F.stat===BB.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function jj(){return typeof window<"u"?window:null}function fS(){return typeof document<"u"?document:null}function Mw(n){return new u4(n,!0)}class iO{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Hj{constructor(e,t,r,i,s,l,c,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new iO(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,be.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vK extends Hj{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function h4(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ft(),i=e.targetChange.targetIds||[],s=function(p,y){return p.gt?(Pt(void 0===y||"string"==typeof y),Ci.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),Ci.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const y=void 0===p.code?pe.UNKNOWN:OU(p.code);return new Fe(y,p.message||"")}(l);t=new VU(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=rc(n,r.document.name),s=Li(r.document.updateTime),l=new rs({mapValue:{fields:r.document.fields}}),c=sr.newFoundDocument(i,s,l);t=new XI(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=rc(n,r.document),s=r.readTime?Li(r.readTime):Ft.min(),l=sr.newNoDocument(i,s);t=new XI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=rc(n,r.document);t=new XI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,s=new t4(r.count||0);t=new LU(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ft.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ft.min():s.readTime?Li(s.readTime):Ft.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=bw(this.It),t.addTarget=function(i,s){let l;const c=s.target;return l=zI(c)?{documents:KU(i,c)}:{query:LR(i,c)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=HU(i,s.resumeToken):s.snapshotVersion.compareTo(Ft.min())>0&&(l.readTime=yw(i,s.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function p4(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=bw(this.It),t.removeTarget=e,this.Bo(t)}}class bK extends Hj{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function f4(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let s=Li(r.updateTime?r.updateTime:i);return s.isEqual(Ft.min())&&(s=Li(i)),new Jq(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.Zo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=bw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ww(this.It,r))};this.Bo(t)}}class wK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection._o(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(pe.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class EK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Kr(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class CK{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(c=>{r.enqueueAndForget((0,be.Z)(function*(){var p;Fd(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,be.Z)(function*(y){const D=nt(y);D._u.add(4),yield My(D),D.gu.set("Unknown"),D._u.delete(4),yield xw(D)}),function(y){return p.apply(this,arguments)})(l))}))}),this.gu=new EK(r,i)}}function xw(n){return oO.apply(this,arguments)}function oO(){return oO=(0,be.Z)(function*(n){if(Fd(n))for(const e of n.wu)yield e(!0)}),oO.apply(this,arguments)}function My(n){return aO.apply(this,arguments)}function aO(){return aO=(0,be.Z)(function*(n){for(const e of n.wu)yield e(!1)}),aO.apply(this,arguments)}function pS(n,e){const t=nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),cO(t)?uO(t):Ry(t).ko()&&lO(t,e))}function Rw(n,e){const t=nt(n),r=Ry(t);t.du.delete(e),r.ko()&&Gj(t,e),0===t.du.size&&(r.ko()?r.Fo():Fd(t)&&t.gu.set("Unknown"))}function lO(n,e){n.yu.Mt(e.targetId),Ry(n).zo(e)}function Gj(n,e){n.yu.Mt(e),Ry(n).Ho(e)}function uO(n){n.yu=new o4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ry(n).start(),n.gu.uu()}function cO(n){return Fd(n)&&!Ry(n).No()&&n.du.size>0}function Fd(n){return 0===nt(n)._u.size}function $j(n){n.yu=void 0}function TK(n){return dO.apply(this,arguments)}function dO(){return dO=(0,be.Z)(function*(n){n.du.forEach((e,t)=>{lO(n,e)})}),dO.apply(this,arguments)}function IK(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,be.Z)(function*(n,e){$j(n),cO(n)?(n.gu.hu(e),uO(n)):n.gu.set("Unknown")}),hO.apply(this,arguments)}function SK(n,e,t){return fO.apply(this,arguments)}function fO(){return fO=(0,be.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof VU&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,s){const l=s.cause;for(const c of s.targetIds)i.du.has(c)&&(yield i.remoteSyncer.rejectListen(c,l),i.du.delete(c),i.yu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gS(n,r)}else if(e instanceof XI?n.yu.Gt(e):e instanceof LU?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ft.min()))try{const r=yield Rj(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.yu.te(s);return l.targetChanges.forEach((c,p)=>{if(c.resumeToken.approximateByteSize()>0){const y=i.du.get(p);y&&i.du.set(p,y.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach(c=>{const p=i.du.get(c);if(!p)return;i.du.set(c,p.withResumeToken(Ci.EMPTY_BYTE_STRING,p.snapshotVersion)),Gj(i,c);const y=new _f(p.target,c,1,p.sequenceNumber);lO(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield gS(n,r)}var r}),fO.apply(this,arguments)}function gS(n,e,t){return pO.apply(this,arguments)}function pO(){return pO=(0,be.Z)(function*(n,e,t){if(!cf(e))throw e;n._u.add(1),yield My(n),n.gu.set("Offline"),t||(t=()=>Rj(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield xw(n)}))}),pO.apply(this,arguments)}function Wj(n,e){return e().catch(t=>gS(n,t,e))}function xy(n){return gO.apply(this,arguments)}function gO(){return gO=(0,be.Z)(function*(n){const e=nt(n),t=bf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;NK(e);)try{const i=yield hK(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,AK(e,i)}catch(i){yield gS(e,i)}zj(e)&&qj(e)}),gO.apply(this,arguments)}function NK(n){return Fd(n)&&n.fu.length<10}function AK(n,e){n.fu.push(e);const t=bf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function zj(n){return Fd(n)&&!bf(n).No()&&n.fu.length>0}function qj(n){bf(n).start()}function MK(n){return mO.apply(this,arguments)}function mO(){return mO=(0,be.Z)(function*(n){bf(n).eu()}),mO.apply(this,arguments)}function xK(n){return _O.apply(this,arguments)}function _O(){return _O=(0,be.Z)(function*(n){const e=bf(n);for(const t of n.fu)e.Xo(t.mutations)}),_O.apply(this,arguments)}function RK(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,be.Z)(function*(n,e,t){const r=n.fu.shift(),i=UR.from(r,e,t);yield Wj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xy(n)}),yO.apply(this,arguments)}function OK(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,be.Z)(function*(n,e){var t;e&&bf(n).Yo&&(yield(t=(0,be.Z)(function*(r,i){if(RU(s=i.code)&&s!==pe.ABORTED){const l=r.fu.shift();bf(r).Mo(),yield Wj(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield xy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),zj(n)&&qj(n)}),vO.apply(this,arguments)}function Kj(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,be.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Fd(t);t._u.add(3),yield My(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield xw(t)}),bO.apply(this,arguments)}function wO(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,be.Z)(function*(n,e){const t=nt(n);e?(t._u.delete(2),yield xw(t)):e||(t._u.add(2),yield My(t),t.gu.set("Unknown"))}),DO.apply(this,arguments)}function Ry(n){return n.pu||(n.pu=function(e,t,r){const i=nt(e);return i.su(),new vK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:TK.bind(null,n),Zr:IK.bind(null,n),Wo:SK.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.pu.Mo(),cO(n)?uO(n):n.gu.set("Unknown")):(yield n.pu.stop(),$j(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function bf(n){return n.Iu||(n.Iu=function(e,t,r){const i=nt(e);return i.su(),new bK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:MK.bind(null,n),Zr:OK.bind(null,n),tu:xK.bind(null,n),Zo:RK.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Mo(),yield xy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class EO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,c=new EO(e,t,l,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),cf(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=pw(),this.sortedSet=new Gr(this.comparator)}static emptySet(e){return new ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Zj{constructor(){this.Tu=new Gr(et.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ft():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Py{constructor(e,t,r,i,s,l,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Py(e,t,ky.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kK{constructor(){this.Au=void 0,this.listeners=[]}}class PK{constructor(){this.queries=new mf(e=>mU(e),dw),this.onlineState="Unknown",this.Ru=new Set}}function CO(n,e){return TO.apply(this,arguments)}function TO(){return TO=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new kK),i)try{s.Au=yield t.onListen(r)}catch(l){const c=Oy(l,`Initialization of query '${xR(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&NO(t)}),TO.apply(this,arguments)}function IO(n,e){return SO.apply(this,arguments)}function SO(){return SO=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),SO.apply(this,arguments)}function FK(n,e){const t=nt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const c of l.listeners)c.Pu(i)&&(r=!0);l.Au=i}}r&&NO(t)}function LK(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function NO(n){n.Ru.forEach(e=>{e.next()})}class AO{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class VK{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Yj{constructor(e){this.It=e}Ji(e){return rc(this.It,e)}Yi(e){return e.metadata.exists?qU(this.It,e.document,!1):sr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Li(e)}}class BK{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qj(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=bn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Yj(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const c=(t.get(l)||Yt()).add(s);t.set(l,c)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function fK(n,e,t,r){return JR.apply(this,arguments)}(e.localStore,new Yj(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield pK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Qj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Jj{constructor(e){this.key=e}}class Xj{constructor(e){this.key=e}}class eH{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=yU(e),this.Qu=new ky(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Zj,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,C)=>{const M=i.get(D),R=RR(this.query,C)?C:null,F=!!M&&this.mutatedKeys.has(M.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let K=!1;M&&R?M.data.isEqual(R.data)?F!==H&&(r.track({type:3,doc:R}),K=!0):this.Hu(M,R)||(r.track({type:2,doc:R}),K=!0,(p&&this.Gu(R,p)>0||y&&this.Gu(R,y)<0)&&(c=!0)):!M&&R?(r.track({type:0,doc:R}),K=!0):M&&!R&&(r.track({type:1,doc:M}),K=!0,(p||y)&&(c=!0)),K&&(R?(l=l.add(R),s=H?s.add(D):s.delete(D)):(l=l.delete(D),s=s.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),s=s.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,$i:c,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,D)=>function(C,M){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return R(C)-R(M)}(y.type,D.type)||this.Gu(y.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],c=0===this.Ku.size&&this.current?1:0,p=c!==this.qu;return this.qu=c,0!==s.length||p?{snapshot:new Py(this.query,e.Qu,i,s,e.mutatedKeys,0===c,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Zj,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Xj(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Jj(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Py.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class UK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jK{constructor(e){this.key=e,this.nc=!1}}class HK{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new mf(c=>mU(c),dw),this.rc=new Map,this.oc=new Set,this.uc=new Gr(et.comparator),this.cc=new Map,this.ac=new WR,this.hc={},this.lc=new Map,this.fc=Ug.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function GK(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,be.Z)(function*(n,e){const t=XO(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const l=yield Ny(t.localStore,Ks(e));t.isPrimaryClient&&pS(t.remoteStore,l);const c=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield xO(t,e,r,"current"===c,l.resumeToken)}return i}),MO.apply(this,arguments)}function xO(n,e,t,r,i){return RO.apply(this,arguments)}function RO(){return RO=(0,be.Z)(function*(n,e,t,r,i){n._c=(C,M,R)=>{return(F=(0,be.Z)(function*(H,K,ve,Te){let ke=K.view.Wu(ve);ke.$i&&(ke=yield cS(H.localStore,K.query,!1).then(({documents:We})=>K.view.Wu(We,ke)));const Ne=Te&&Te.targetChanges.get(K.targetId),je=K.view.applyChanges(ke,H.isPrimaryClient,Ne);return HO(H,K.targetId,je.Xu),je.snapshot}),function(H,K,ve,Te){return F.apply(this,arguments)})(n,C,M,R);var F};const s=yield cS(n.localStore,e,!0),l=new eH(e,s.Hi),c=l.Wu(s.documents),p=_w.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(c,n.isPrimaryClient,p);HO(n,t,y.Xu);const D=new UK(e,t,l);return n.ic.set(e,D),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),RO.apply(this,arguments)}function $K(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,be.Z)(function*(n,e){const t=nt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!dw(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ay(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Rw(t.remoteStore,r.targetId),Fy(t,r.targetId)}).catch(uf))):(Fy(t,r.targetId),yield Ay(t.localStore,r.targetId,!0))}),OO.apply(this,arguments)}function kO(){return kO=(0,be.Z)(function*(n,e,t){const r=ek(n);try{const i=yield function(s,l){const c=nt(s),p=Er.now(),y=l.reduce((M,R)=>M.add(R.key),Yt());let D,C;return c.persistence.runTransaction("Locally write mutations","readwrite",M=>{let R=Oo(),F=Yt();return c.Gi.getEntries(M,y).next(H=>{R=H,R.forEach((K,ve)=>{ve.isValidDocument()||(F=F.add(K))})}).next(()=>c.localDocuments.getOverlayedDocuments(M,R)).next(H=>{D=H;const K=[];for(const ve of l){const Te=e4(ve,D.get(ve.key).overlayedDocument);null!=Te&&K.push(new Pd(ve.key,Te,aU(Te.value.mapValue),Cr.exists(!0)))}return c.mutationQueue.addMutationBatch(M,p,K,l)}).next(H=>{C=H;const K=H.applyToLocalDocumentSet(D,F);return c.documentOverlayCache.saveOverlays(M,H.batchId,K)})}).then(()=>({batchId:C.batchId,changes:PU(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let p=s.hc[s.currentUser.toKey()];p||(p=new Gr(Wt)),p=p.insert(l,c),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ld(r,i.changes),yield xy(r.remoteStore)}catch(i){const s=Oy(i,"Failed to persist write");t.reject(s)}}),kO.apply(this,arguments)}function tH(n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,be.Z)(function*(n,e){const t=nt(n);try{const r=yield dK(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.cc.get(s);l&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Pt(l.nc):i.removedDocuments.size>0&&(Pt(l.nc),l.nc=!1))}),yield Ld(t,r,e)}catch(r){yield uf(r)}}),PO.apply(this,arguments)}function nH(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,l)=>{const c=l.view.bu(e);c.snapshot&&i.push(c.snapshot)}),function(s,l){const c=nt(s);c.onlineState=l;let p=!1;c.queries.forEach((y,D)=>{for(const C of D.listeners)C.bu(l)&&(p=!0)}),p&&NO(c)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zK(n,e,t){return FO.apply(this,arguments)}function FO(){return FO=(0,be.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let l=new Gr(et.comparator);l=l.insert(s,sr.newNoDocument(s,Ft.min()));const c=Yt().add(s),p=new mw(Ft.min(),new Map,new $n(Wt),l,c);yield tH(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),GO(r)}else yield Ay(r.localStore,e,!1).then(()=>Fy(r,e,t)).catch(uf)}),FO.apply(this,arguments)}function qK(n,e){return LO.apply(this,arguments)}function LO(){return LO=(0,be.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield cK(t.localStore,e);jO(t,r,null),UO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ld(t,i)}catch(i){yield uf(i)}}),LO.apply(this,arguments)}function KK(n,e,t){return VO.apply(this,arguments)}function VO(){return VO=(0,be.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(s,l){const c=nt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return c.mutationQueue.lookupMutationBatch(p,l).next(D=>(Pt(null!==D),y=D.keys(),c.mutationQueue.removeMutationBatch(p,D))).next(()=>c.mutationQueue.performConsistencyCheck(p)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>c.localDocuments.getDocuments(p,y))})}(r.localStore,e);jO(r,e,t),UO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ld(r,i)}catch(i){yield uf(i)}}),VO.apply(this,arguments)}function BO(){return BO=(0,be.Z)(function*(n,e){const t=nt(n);Fd(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=nt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),BO.apply(this,arguments)}function UO(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function jO(n,e,t){const r=nt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||rH(n,r)})}function rH(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Rw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),GO(n))}function HO(n,e,t){for(const r of t)r instanceof Jj?(n.ac.addReference(r.key,e),YK(n,r)):r instanceof Xj?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||rH(n,r.key)):ft()}function YK(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oc.add(r),GO(n))}function GO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new et(bn.fromString(e)),r=n.fc.next();n.cc.set(r,new jK(t)),n.uc=n.uc.insert(t,r),pS(n.remoteStore,new _f(Ks(yy(t.path)),r,2,Ro.at))}}function Ld(n,e,t){return $O.apply(this,arguments)}function $O(){return $O=(0,be.Z)(function*(n,e,t){const r=nt(n),i=[],s=[],l=[];var c;r.ic.isEmpty()||(r.ic.forEach((c,p)=>{l.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const D=ZR.Ci(p.targetId,y);s.push(D)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(c=(0,be.Z)(function*(p,y){const D=nt(p);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ce.forEach(y,M=>ce.forEach(M.Si,R=>D.persistence.referenceDelegate.addReference(C,M.targetId,R)).next(()=>ce.forEach(M.Di,R=>D.persistence.referenceDelegate.removeReference(C,M.targetId,R)))))}catch(C){if(!cf(C))throw C;Be("LocalStore","Failed to update sequence numbers: "+C)}for(const C of y){const M=C.targetId;if(!C.fromCache){const R=D.Ui.get(M),H=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);D.Ui=D.Ui.insert(M,H)}}}),function(p,y){return c.apply(this,arguments)})(r.localStore,s))}),$O.apply(this,arguments)}function QK(n,e){return WO.apply(this,arguments)}function WO(){return WO=(0,be.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield xj(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(c=>{c.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ld(t,r.ji)}var i}),WO.apply(this,arguments)}function JK(n,e){const t=nt(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const s=t.rc.get(e);if(!s)return i;for(const l of s){const c=t.ic.get(l);i=i.unionWith(c.view.ju)}return i}}function XK(n,e){return zO.apply(this,arguments)}function zO(){return zO=(0,be.Z)(function*(n,e){const t=nt(n),r=yield cS(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&HO(t,e.targetId,i.Xu),i}),zO.apply(this,arguments)}function e5(n,e){return qO.apply(this,arguments)}function qO(){return qO=(0,be.Z)(function*(n,e){const t=nt(n);return Pj(t.localStore,e).then(r=>Ld(t,r))}),qO.apply(this,arguments)}function t5(n,e,t,r){return KO.apply(this,arguments)}function KO(){return KO=(0,be.Z)(function*(n,e,t,r){const i=nt(n),s=yield function(l,c){const p=nt(l),y=nt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",D=>y.Tn(D,c).next(C=>C?p.localDocuments.getDocuments(D,C):ce.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield xy(i.remoteStore):"acknowledged"===t||"rejected"===t?(jO(i,e,r||null),UO(i,e),c=e,nt(nt(i.localStore).mutationQueue).An(c)):ft(),yield Ld(i,s)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),KO.apply(this,arguments)}function ZO(){return ZO=(0,be.Z)(function*(n,e){const t=nt(n);if(XO(t),ek(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield iH(t,r.toArray());t.dc=!0,yield wO(t.remoteStore,!0);for(const s of i)pS(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Fy(t,l),Ay(t.localStore,l,!0))),Rw(t.remoteStore,l)}),yield i,yield iH(t,r),function(s){const l=nt(s);l.cc.forEach((c,p)=>{Rw(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new Gr(et.comparator)}(t),t.dc=!1,yield wO(t.remoteStore,!1)}}),ZO.apply(this,arguments)}function iH(n,e,t){return YO.apply(this,arguments)}function YO(){return YO=(0,be.Z)(function*(n,e,t){const r=nt(n),i=[],s=[];for(const l of e){let c;const p=r.rc.get(l);if(p&&0!==p.length){c=yield Ny(r.localStore,Ks(p[0]));for(const y of p){const D=r.ic.get(y),C=yield XK(r,D);C.snapshot&&s.push(C.snapshot)}}else{const y=yield kj(r.localStore,l);c=yield Ny(r.localStore,y),yield xO(r,sH(y),l,!1,c.resumeToken)}i.push(c)}return r.sc.Wo(s),i}),YO.apply(this,arguments)}function sH(n){return pU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function r5(n){const e=nt(n);return nt(nt(e.localStore).persistence).vi()}function i5(n,e,t,r){return QO.apply(this,arguments)}function QO(){return QO=(0,be.Z)(function*(n,e,t,r){const i=nt(n);if(i.dc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Pj(i.localStore,_U(s[0])),c=mw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ci.EMPTY_BYTE_STRING);yield Ld(i,l,c);break}case"rejected":yield Ay(i.localStore,e,!0),Fy(i,e,r);break;default:ft()}}),QO.apply(this,arguments)}function s5(n,e,t){return JO.apply(this,arguments)}function JO(){return JO=(0,be.Z)(function*(n,e,t){const r=XO(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const s=yield kj(r.localStore,i),l=yield Ny(r.localStore,s);yield xO(r,sH(s),l.targetId,!1,l.resumeToken),pS(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Ay(r.localStore,i,!1).then(()=>{Rw(r.remoteStore,i),Fy(r,i)}).catch(uf))}}),JO.apply(this,arguments)}function XO(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zK.bind(null,e),e.sc.Wo=FK.bind(null,e.eventManager),e.sc.wc=LK.bind(null,e.eventManager),e}function ek(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KK.bind(null,e),e}class oH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=Mw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Mj(this.persistence,new Aj,e.initialUser,this.It)}yc(e){return new Sj(lS.Bs,this.It)}gc(e){return new Bj}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aH extends oH{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield ek(r.Ac.syncEngine),yield xy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Mj(this.persistence,new Aj,e.initialUser,this.It)}Tc(e,t){return new Z4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Rq(t,this.persistence);return new xq(e.asyncQueue,r)}yc(e){const t=KR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ko.withCacheSize(this.cacheSizeBytes):ko.DEFAULT;return new qR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jj(),fS(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Bj}}class a5 extends aH{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof rO&&(r.sharedClientState.syncEngine={Fr:t5.bind(null,i),$r:i5.bind(null,i),Br:s5.bind(null,i),vi:r5.bind(null,i),Mr:e5.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,be.Z)(function*(l){yield function n5(n,e){return ZO.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}gc(e){const t=jj();if(!rO.C(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tk{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QK.bind(null,r.syncEngine),yield wO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new PK}createDatastore(e){const t=Mw(e.databaseInfo.databaseId),r=new yK(e.databaseInfo);return new wK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>nH(this.syncEngine,c,0),l=Uj.C()?new Uj:new gK,new CK(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,c,p,y){const D=new HK(r,i,s,l,c,p);return y&&(D.dc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=nt(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield My(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nk(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lH(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uH(n){if(!et.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cH(n){if(et.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mS(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dH(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const hH=new Map;class fH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ow{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vq;switch(t.type){case"gapi":return new Eq(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hH.get(e);t&&(Be("ComponentProvider","Removing Datastore"),hH.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class sc extends vs{constructor(e,t,r){super(e,t,yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new et(e))}withConverter(e){return new sc(this.firestore,e,this._path)}}function gH(n,e,...t){if(n=(0,P.m9)(n),nk("collection","path",e),n instanceof Ow){const r=bn.fromString(e,...t);return cH(r),new sc(n,null,r)}{if(!(n instanceof hr||n instanceof sc))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return cH(r),new sc(n.firestore,null,r)}}function _S(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=GB.R()),nk("doc","path",e),n instanceof Ow){const r=bn.fromString(e,...t);return uH(r),new hr(n,null,new et(r))}{if(!(n instanceof hr||n instanceof sc))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return uH(r),new hr(n.firestore,n instanceof sc?n.converter:null,new et(r))}}function mH(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof hr||n instanceof sc)&&(e instanceof hr||e instanceof sc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rk(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof vs&&e instanceof vs&&n.firestore===e.firestore&&dw(n._query,e._query)&&n.converter===e.converter}function _H(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class u5{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ei,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new VK(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,be.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class h5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(s,l){const c=nt(s),p=bw(c.It)+"/documents",y={documents:l.map(R=>vw(c.It,R))},D=yield c._o("BatchGetDocuments",p,y,l.length),C=new Map;D.forEach(R=>{const F=function d4(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=rc(t,r.found.name),s=Li(r.found.updateTime),l=new rs({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(i,s,l)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=rc(t,r.missing),s=Li(r.readTime);return sr.newNoDocument(i,s)}(n,e):ft()}(c.It,R);C.set(F.key.toString(),F)});const M=[];return l.forEach(R=>{const F=C.get(R.toString());Pt(!!F),M.push(F)}),M}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ey(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=et.fromPath(i);e.mutations.push(new OR(s,e.precondition(s)))}),yield(r=(0,be.Z)(function*(i,s){const l=nt(i),c=bw(l.It)+"/documents",p={writes:s.map(y=>ww(l.It,y))};yield l.ao("Commit",c,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ft.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class f5{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new iO(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,be.Z)(function*(){const t=new h5(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!sw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!RU(t)}return!1}}class p5{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fi.UNAUTHENTICATED,this.clientId=GB.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,be.Z)(function*(c){Be("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Oy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yH(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(s){r.isEqual(s)||(yield xj(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ik.apply(this,arguments)}function vH(n,e){return sk.apply(this,arguments)}function sk(){return sk=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ok(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Kj(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Kj(e.remoteStore,s)),n.onlineComponents=e}),sk.apply(this,arguments)}function ok(n){return ak.apply(this,arguments)}function ak(){return ak=(0,be.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield yH(n,new oH)),n.offlineComponents}),ak.apply(this,arguments)}function vS(n){return lk.apply(this,arguments)}function lk(){return lk=(0,be.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield vH(n,new tk)),n.onlineComponents}),lk.apply(this,arguments)}function bH(n){return ok(n).then(e=>e.persistence)}function bS(n){return ok(n).then(e=>e.localStore)}function uk(n){return vS(n).then(e=>e.remoteStore)}function ck(n){return vS(n).then(e=>e.syncEngine)}function Ly(n){return dk.apply(this,arguments)}function dk(){return dk=(0,be.Z)(function*(n){const e=yield vS(n),t=e.eventManager;return t.onListen=GK.bind(null,e.syncEngine),t.onUnlisten=$K.bind(null,e.syncEngine),t}),dk.apply(this,arguments)}function DH(n,e,t={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,s,l,c,p){const y=new yS({next:C=>{s.enqueueAndForget(()=>IO(i,D));const M=C.docs.has(l);!M&&C.fromCache?p.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&C.fromCache&&c&&"server"===c.source?p.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(C)},error:C=>p.reject(C)}),D=new AO(yy(l.path),y,{includeMetadataChanges:!0,Nu:!0});return CO(i,D)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}function EH(n,e,t={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,s,l,c,p){const y=new yS({next:C=>{s.enqueueAndForget(()=>IO(i,D)),C.fromCache&&"server"===c.source?p.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(C)},error:C=>p.reject(C)}),D=new AO(l,y,{includeMetadataChanges:!0,Nu:!0});return CO(i,D)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}class D5{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new iO(this,"async_queue_retry"),this.Wc=()=>{const t=fS();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=fS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=fS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ei;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!cf(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Kr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=EO.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&ft()}verifyOperationInProgress(){}Xc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function hk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class E5{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends Ow{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new D5,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CH(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||CH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CH(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Pq(n._databaseId,s,n._persistenceKey,(c=t).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var s,c;n._firestoreClient=new p5(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TH(n,e,t){const r=new Ei;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield yH(n,t),yield vH(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;Cg("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function IH(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oc(Ci.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oc(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hg{constructor(e){this._methodName=e}}class wS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const O5=/^__.*__$/;class k5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dy(e,this.data,t,this.fieldTransforms)}}class SH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class DS{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new DS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return TS(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(NH(this.sa)&&O5.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class P5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Mw(e)}da(e,t,r,i=!1){return new DS({sa:e,methodName:t,fa:r,path:Hr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Gg(n){const e=n._freezeSettings(),t=Mw(n._databaseId);return new P5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ES(n,e,t,r,i,s={}){const l=n.da(s.merge||s.mergeFields?2:0,e,t,i);mk("Data must be an object, but it was:",l,r);const c=xH(r,l);let p,y;if(s.merge)p=new pa(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const D=[];for(const C of s.mergeFields){const M=_k(e,C,t);if(!l.contains(M))throw new Fe(pe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);OH(D,M)||D.push(M)}p=new pa(D),y=l.fieldTransforms.filter(C=>p.covers(C.field))}else p=null,y=l.fieldTransforms;return new k5(new rs(c),p,y)}class kw extends Hg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kw}}function AH(n,e,t){return new DS({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class fk extends Hg{_toFieldTransform(e){return new hw(e.path,new by)}isEqual(e){return e instanceof fk}}class F5 extends Hg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=AH(this,e,!0),r=this._a.map(s=>$g(s,t)),i=new Rg(r);return new hw(e.path,i)}isEqual(e){return this===e}}class L5 extends Hg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=AH(this,e,!0),r=this._a.map(s=>$g(s,t)),i=new Og(r);return new hw(e.path,i)}isEqual(e){return this===e}}class V5 extends Hg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new wy(e.It,wU(e.It,this.wa));return new hw(e.path,t)}isEqual(e){return this===e}}function pk(n,e,t,r){const i=n.da(1,e,t);mk("Data must be an object, but it was:",i,r);const s=[],l=rs.empty();Sg(r,(p,y)=>{const D=CS(e,p,t);y=(0,P.m9)(y);const C=i.ca(D);if(y instanceof kw)s.push(D);else{const M=$g(y,C);null!=M&&(s.push(D),l.set(D,M))}});const c=new pa(s);return new SH(l,c,i.fieldTransforms)}function gk(n,e,t,r,i,s){const l=n.da(1,e,t),c=[_k(e,r,t)],p=[i];if(s.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)c.push(_k(e,s[M])),p.push(s[M+1]);const y=[],D=rs.empty();for(let M=c.length-1;M>=0;--M)if(!OH(y,c[M])){const R=c[M];let F=p[M];F=(0,P.m9)(F);const H=l.ca(R);if(F instanceof kw)y.push(R);else{const K=$g(F,H);null!=K&&(y.push(R),D.set(R,K))}}const C=new pa(y);return new SH(D,C,l.fieldTransforms)}function MH(n,e,t,r=!1){return $g(t,n.da(r?4:3,e))}function $g(n,e){if(RH(n=(0,P.m9)(n)))return mk("Unsupported field value:",e,n),xH(n,e);if(n instanceof Hg)return function(t,r){if(!NH(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let c=$g(l,r.aa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wU(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:yw(r.It,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yw(r.It,i)}}if(t instanceof wS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof oc)return{bytesValue:HU(r.It,t._byteString)};if(t instanceof hr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:kR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${mS(t)}`)}(n,e)}function xH(n,e){const t={};return QB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sg(n,(r,i)=>{const s=$g(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function RH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof wS||n instanceof oc||n instanceof hr||n instanceof Hg)}function mk(n,e,t){if(!RH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mS(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function _k(n,e,t){if((e=(0,P.m9)(e))instanceof Vd)return e._internalPath;if("string"==typeof e)return CS(n,e);throw TS("Field path arguments must be of type string or ",n,!1,void 0,t)}const B5=new RegExp("[~\\*/\\[\\]]");function CS(n,e,t){if(e.search(B5)>=0)throw TS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vd(...e.split("."))._internalPath}catch{throw TS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function TS(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Fe(pe.INVALID_ARGUMENT,c+n+p)}function OH(n,e){return n.some(t=>t.isEqual(e))}class Pw{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new U5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class U5 extends Pw{data(){return super.data()}}function IS(n,e){return"string"==typeof e?CS(n,e):e instanceof Vd?e._internalPath:e._delegate._internalPath}function kH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fw{}function wf(n,...e){for(const t of e)n=t._apply(n);return n}class j5 extends Fw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Gg(e.firestore),r=function(i,s,l,c,p,y,D){let C;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){UH(D,y);const R=[];for(const F of D)R.push(BH(c,i,F));C={arrayValue:{values:R}}}else C=BH(c,i,D)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||UH(D,y),C=MH(l,"where",D,"in"===y||"not-in"===y);const M=is.create(p,y,C);return function(R,F){if(F.dt()){const K=AR(R);if(null!==K&&!K.isEqual(F.field))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${K.toString()}' and '${F.field.toString()}'`);const ve=NR(R);null!==ve&&jH(0,F.field,ve)}const H=function(K,ve){for(const Te of K.filters)if(ve.indexOf(Te.op)>=0)return Te.op;return null}(R,function(K){switch(K){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==H)throw new Fe(pe.INVALID_ARGUMENT,H===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${H.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new vs(e.firestore,e.converter,function(i,s){const l=i.filters.concat([s]);return new kd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class G5 extends Fw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new _y(i,s);return function(c,p){if(null===NR(c)){const y=AR(c);null!==y&&jH(0,y,p.field)}}(r,l),l}(e._query,this.ma,this.pa);return new vs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new kd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class PH extends Fw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new vs(e.firestore,e.converter,KI(e._query,this.Ia,this.Ta))}}class FH extends Fw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=VH(e,this.type,this.Ea,this.Aa);return new vs(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LH extends Fw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=VH(e,this.type,this.Ea,this.Aa);return new vs(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function VH(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof Pw)return function(i,s,l,c,p){if(!c)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const D of vy(i))if(D.field.isKeyField())y.push(Mg(s,c.key));else{const C=c.data.field(D.field);if(TR(C))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const M=D.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(C)}return new gf(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Gg(n.firestore);return function(s,l,c,p,y,D){const C=s.explicitOrderBy;if(y.length>C.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let R=0;R<y.length;R++){const F=y[R];if(C[R].field.isKeyField()){if("string"!=typeof F)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!MR(s)&&-1!==F.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const H=s.path.child(bn.fromString(F));if(!et.isDocumentKey(H))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const K=new et(H);M.push(Mg(l,K))}else{const H=MH(c,p,F);M.push(H)}}return new gf(M,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BH(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MR(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bn.fromString(t));if(!et.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mg(n,new et(r))}if(t instanceof hr)return Mg(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mS(t)}.`)}function UH(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jH(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yk{convertValue(e,t="none"){switch(Ag(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ng(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Sg(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new wS($r(e.latitude),$r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XB(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(iw(e));default:return null}}convertTimestamp(e){const t=df(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);Pt(QU(r));const i=new hf(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(t)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function SS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Q5 extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bd extends Pw{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Lw extends Bd{data(e={}){return super.data(e)}}class Df{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lw(this._firestore,this._userDataWriter,r.key,r,new Wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Lw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const c=new Lw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:J5(l.type),doc:c,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function J5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function HH(n,e){return n instanceof Bd&&e instanceof Bd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Df&&e instanceof Df&&n._firestore===e._firestore&&rk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ef extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function GH(n,e,t){n=pn(n,hr);const r=pn(n.firestore,fr),i=SS(n.converter,e,t);return Vy(r,[ES(Gg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Cr.none())])}function $H(n,e,t,...r){n=pn(n,hr);const i=pn(n.firestore,fr),s=Gg(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof Vd?gk(s,"updateDoc",n._key,e,t,r):pk(s,"updateDoc",n._key,e),Vy(i,[l.toMutation(n._key,Cr.exists(!0))])}function WH(n,...e){var t,r,i;n=(0,P.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||hk(e[l])||(s=e[l],l++);const c={includeMetadataChanges:s.includeMetadataChanges};if(hk(e[l])){const C=e[l];e[l]=null===(t=C.next)||void 0===t?void 0:t.bind(C),e[l+1]=null===(r=C.error)||void 0===r?void 0:r.bind(C),e[l+2]=null===(i=C.complete)||void 0===i?void 0:i.bind(C)}let p,y,D;if(n instanceof hr)y=pn(n.firestore,fr),D=yy(n._key.path),p={next:C=>{e[l]&&e[l](vk(y,n,C))},error:e[l+1],complete:e[l+2]};else{const C=pn(n,vs);y=pn(C.firestore,fr),D=C._query;const M=new Ef(y);p={next:R=>{e[l]&&e[l](new Df(y,M,C,R))},error:e[l+1],complete:e[l+2]},kH(n._query)}return function(C,M,R,F){const H=new yS(F),K=new AO(M,H,R);return C.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return CO(yield Ly(C),K)})),()=>{H.bc(),C.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return IO(yield Ly(C),K)}))}}(Zr(y),D,c,p)}function Vy(n,e){return function(t,r){const i=new Ei;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function WK(n,e,t){return kO.apply(this,arguments)}(yield ck(t),r,i)})),i.promise}(Zr(n),e)}function vk(n,e,t){const r=t.docs.get(e._key),i=new Ef(n);return new Bd(n,i,e._key,r,new Wg(t.hasPendingWrites,t.fromCache),e.converter)}const lZ={maxAttempts:5};class zH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gg(e)}set(e,t,r){this._verifyNotCommitted();const i=Cf(e,this._firestore),s=SS(i.converter,t,r),l=ES(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Cf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Vd?gk(this._dataReader,"WriteBatch.update",s._key,t,r,i):pk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cf(e,this._firestore);return this._mutations=this._mutations.concat(new Ey(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gg(e)}get(e){const t=Cf(e,this._firestore),r=new Q5(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const s=i[0];if(s.isFoundDocument())return new Pw(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Pw(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Cf(e,this._firestore),s=SS(i.converter,t,r),l=ES(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Cf(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Vd?gk(this._dataReader,"Transaction.update",s._key,t,r,i):pk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cf(e,this._firestore),r=new Ef(this._firestore);return super.get(e).then(i=>new Bd(this._firestore,r,t._key,i._document,new Wg(!1,!1),t.converter))}}function bk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KH(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function ZH(){if(!function Oq(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fy=ms.SDK_VERSION,(0,ms._registerComponent)(new qa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new fr(new wq(t.getProvider("auth-internal")),new Cq(t.getProvider("app-check-internal")),function(c,p){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hf(c.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(UB,"3.7.2",n),(0,ms.registerVersion)(UB,"3.7.2","esm2017")}();class Vw{constructor(e){this._delegate=e}static fromBase64String(e){return ZH(),new Vw(oc.fromBase64String(e))}static fromUint8Array(e){return KH(),new Vw(oc.fromUint8Array(e))}toBase64(){return ZH(),this._delegate.toBase64()}toUint8Array(){return KH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wk(n){return function yZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vZ{enableIndexedDbPersistence(e,t){return function T5(n,e){IH(n=pn(n,fr));const t=Zr(n),r=n._freezeSettings(),i=new tk;return TH(t,i,new aH(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function I5(n){IH(n=pn(n,fr));const e=Zr(n),t=n._freezeSettings(),r=new tk;return TH(e,r,new a5(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function S5(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ei;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Hl.C())return Promise.resolve();const i=r+"main";yield Hl.delete(i)}),function(r){return t.apply(this,arguments)})(KR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YH{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pH(n,e,t,r={}){var i;const s=(n=pn(n,Ow))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Cg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,c;if("string"==typeof r.mockUserToken)l=r.mockUserToken,c=Fi.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Fi(p)}n._authCredentials=new bq(new jB(l,c))}}(this._delegate,e,t,r)}enableNetwork(){return function A5(n){return function g5(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bH(n),t=yield uk(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i._u.delete(0),xw(i)}(t)}))}(Zr(n=pn(n,fr)))}(this._delegate)}disableNetwork(){return function M5(n){return function m5(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bH(n),t=yield uk(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const s=nt(i);s._u.add(0),yield My(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=pn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function N5(n){return function(e){const t=new Ei;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function ZK(n,e){return BO.apply(this,arguments)}(yield ck(e),t)})),t.promise}(Zr(n=pn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function aZ(n,e){return function v5(n,e){const t=new yS(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Ly(n),i=t,nt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Ly(n),i=t,void nt(r).Ru.delete(i);var r,i}))}}(Zr(n=pn(n,fr)),hk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new By(this,gH(this._delegate,e))}catch(t){throw Ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ya(this,_S(this._delegate,e))}catch(t){throw Ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function l5(n,e){if(n=pn(n,Ow),nk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(t=e,new kd(bn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cZ(n,e,t){n=pn(n,fr);const r=Object.assign(Object.assign({},lZ),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const c=new Ei;return i.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const p=yield function wH(n){return vS(n).then(e=>e.datastore)}(i);new f5(i.asyncQueue,p,l,s,c).run()})),c.promise}(Zr(n),i=>e(new uZ(n,i)),r)}(this._delegate,t=>e(new QH(this,t)))}batch(){return Zr(this._delegate),new JH(new zH(this._delegate,e=>Vy(this._delegate,e)))}loadBundle(e){return function x5(n,e){const t=Zr(n=pn(n,fr)),r=new E5;return function b5(n,e,t,r){const i=function(s,l){let c;return c="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return _H(p,y);if(p instanceof ArrayBuffer)return _H(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new u5(p,l);var p}(t,Mw(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function o5(n,e,t){const r=nt(n);var i;(i=(0,be.Z)(function*(s,l,c){try{const p=yield l.getMetadata();if(yield function(M,R){const F=nt(M),H=Li(R.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",K=>F.Ns.getBundleMetadata(K,R.id)).then(K=>!!K&&K.createTime.compareTo(H)>=0)}(s.localStore,p))return yield l.close(),c._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);c._updateProgress(Qj(p));const y=new BK(p,s.localStore,l.It);let D=yield l.mc();for(;D;){const M=yield y.Fu(D);M&&c._updateProgress(M),D=yield l.mc()}const C=yield y.complete();return yield Ld(s,C.Lu,void 0),yield function(M,R){const F=nt(M);return F.persistence.runTransaction("Save bundle","readwrite",H=>F.Ns.saveBundleMetadata(H,R))}(s.localStore,p),c._completeWith(C.progress),Promise.resolve(C.Bu)}catch(p){return Cg("SyncEngine",`Loading bundle failed with ${p}`),c._failWith(p),Promise.resolve(new Set)}var M}),function(s,l,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ck(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function R5(n,e){return function w5(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield bS(n),e)}))}(Zr(n=pn(n,fr)),e).then(t=>t?new vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qs(this,t):null)}}class NS extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vw(new oc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ya.forKey(t,this.firestore,null)}}class QH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new NS(e)}get(e){const t=qg(e);return this._delegate.get(t).then(r=>new Bw(this._firestore,new Bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=qg(e);return r?(bk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=qg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=qg(e);return this._delegate.delete(t),this}}class JH{constructor(e){this._delegate=e}set(e,t,r){const i=qg(e);return r?(bk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=qg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=qg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Lw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Uw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new zg(e,new NS(e),t),i.set(t,s)),s}}zg.INSTANCES=new WeakMap;class Ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ya(t,new hr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new Ya(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new By(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new By(this.firestore,gH(this._delegate,e))}catch(t){throw Ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof hr&&mH(this._delegate,e)}set(e,t){t=bk("DocumentReference.set",t);try{return t?GH(this._delegate,e,t):GH(this._delegate,e)}catch(r){throw Ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$H(this._delegate,e):$H(this._delegate,e,t,...r)}catch(i){throw Ys(i,"updateDoc()","DocumentReference.update()")}}delete(){return function sZ(n){return Vy(pn(n.firestore,fr),[new Ey(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=XH(e),r=eG(e,i=>new Bw(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WH(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function eZ(n){n=pn(n,hr);const e=pn(n.firestore,fr),t=Zr(e),r=new Ef(e);return function _5(n,e){const t=new Ei;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,s,l){try{const c=yield function(p,y){const D=nt(p);return D.persistence.runTransaction("read document","readonly",C=>D.localDocuments.getDocument(C,y))}(i,s);c.isFoundDocument()?l.resolve(c):c.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const p=Oy(c,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield bS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bd(e,r,n._key,i,new Wg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function tZ(n){n=pn(n,hr);const e=pn(n.firestore,fr);return DH(Zr(e),n._key,{source:"server"}).then(t=>vk(e,n,t))}(this._delegate):function X5(n){n=pn(n,hr);const e=pn(n.firestore,fr);return DH(Zr(e),n._key).then(t=>vk(e,n,t))}(this._delegate),t.then(r=>new Bw(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ya(this.firestore,this._delegate.withConverter(e?zg.getInstance(this.firestore,e):null))}}function Ys(n,e,t){return n.message=n.message.replace(e,t),n}function XH(n){for(const e of n)if("object"==typeof e&&!wk(e))return e;return{}}function eG(n,e){var t,r;let i;return i=wk(n[0])?n[0]:wk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Bw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HH(this._delegate,e._delegate)}}class Uw extends Bw{data(e){const t=this._delegate.data(e);return function yq(n,e){n||ft()}(void 0!==t),t}}class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NS(e)}where(e,t,r){try{return new Qs(this.firestore,wf(this._delegate,function H5(n,e,t){const r=e,i=IS("where",n);return new j5(i,r,t)}(e,t,r)))}catch(i){throw Ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qs(this.firestore,wf(this._delegate,function $5(n,e="asc"){const t=e,r=IS("orderBy",n);return new G5(r,t)}(e,t)))}catch(r){throw Ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,wf(this._delegate,function W5(n){return dH("limit",n),new PH("limit",n,"F")}(e)))}catch(t){throw Ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,wf(this._delegate,function z5(n){return dH("limitToLast",n),new PH("limitToLast",n,"L")}(e)))}catch(t){throw Ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,wf(this._delegate,function q5(...n){return new FH("startAt",n,!0)}(...e)))}catch(t){throw Ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,wf(this._delegate,function K5(...n){return new FH("startAfter",n,!1)}(...e)))}catch(t){throw Ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,wf(this._delegate,function Z5(...n){return new LH("endBefore",n,!1)}(...e)))}catch(t){throw Ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,wf(this._delegate,function Y5(...n){return new LH("endAt",n,!0)}(...e)))}catch(t){throw Ys(t,"endAt()","Query.endAt()")}}isEqual(e){return rk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rZ(n){n=pn(n,vs);const e=pn(n.firestore,fr),t=Zr(e),r=new Ef(e);return function y5(n,e){const t=new Ei;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,s,l){try{const c=yield cS(i,s,!0),p=new eH(s,c.Hi),y=p.Wu(c.documents),D=p.applyChanges(y,!1);l.resolve(D.snapshot)}catch(c){const p=Oy(c,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield bS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Df(e,r,n,i))}(this._delegate):"server"===e?.source?function iZ(n){n=pn(n,vs);const e=pn(n.firestore,fr),t=Zr(e),r=new Ef(e);return EH(t,n._query,{source:"server"}).then(i=>new Df(e,r,n,i))}(this._delegate):function nZ(n){n=pn(n,vs);const e=pn(n.firestore,fr),t=Zr(e),r=new Ef(e);return kH(n._query),EH(t,n._query).then(i=>new Df(e,r,n,i))}(this._delegate),t.then(r=>new Dk(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XH(e),r=eG(e,i=>new Dk(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WH(this._delegate,t,r)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?zg.getInstance(this.firestore,e):null))}}class wZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Uw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Uw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Uw(this._firestore,r))})}isEqual(e){return HH(this._delegate,e._delegate)}}class By extends Qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ya(this.firestore,e):null}doc(e){try{return new Ya(this.firestore,void 0===e?_S(this._delegate):_S(this._delegate,e))}catch(t){throw Ys(t,"doc()","CollectionReference.doc()")}}add(e){return function oZ(n,e){const t=pn(n.firestore,fr),r=_S(n),i=SS(n.converter,e);return Vy(t,[ES(Gg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ya(this.firestore,t))}isEqual(e){return mH(this._delegate,e._delegate)}withConverter(e){return new By(this.firestore,this._delegate.withConverter(e?zg.getInstance(this.firestore,e):null))}}function qg(n){return pn(n,hr)}class Ek{constructor(...e){this._delegate=new Vd(...e)}static documentId(){return new Ek(Hr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Vd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hZ(){return new fk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kg(e)}static delete(){const e=function dZ(){return new kw("deleteField")}();return e._methodName="FieldValue.delete",new Kg(e)}static arrayUnion(...e){const t=function fZ(...n){return new F5("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kg(t)}static arrayRemove(...e){const t=function pZ(...n){return new L5("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kg(t)}static increment(e){const t=function gZ(n){return new V5("increment",n)}(e);return t._methodName="FieldValue.increment",new Kg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DZ={Firestore:YH,GeoPoint:wS,Timestamp:Er,Blob:Vw,Transaction:QH,WriteBatch:JH,DocumentReference:Ya,DocumentSnapshot:Bw,Query:Qs,QueryDocumentSnapshot:Uw,QuerySnapshot:Dk,CollectionReference:By,FieldPath:Ek,FieldValue:Kg,setLogLevel:function bZ(n){!function _q(n){lf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CZ(n){(function EZ(n,e){n.INTERNAL.registerComponent(new qa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DZ)))})(n,(e,t)=>new YH(e,t,new vZ)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(Ab.Z);var AS=V(5363),TZ=V(6063);class IZ extends nn.x{constructor(e=1/0,t=1/0,r=TZ.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let c=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)c=p;c&&r.splice(0,c+1)}}}function tG(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Mu.B)({connector:()=>new IZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nG(n,e){return(0,yi.m)(e)?mn(()=>n,e):mn(()=>n)}var Ck=V(9468);const Tk=new d.OlP("angularfire2.auth.use-emulator"),Ik=new d.OlP("angularfire2.auth.settings"),Sk=new d.OlP("angularfire2.auth.tenant-id"),Nk=new d.OlP("angularfire2.auth.langugage-code"),Ak=new d.OlP("angularfire2.auth.use-device-language"),Mk=new d.OlP("angularfire.auth.persistence"),xk=(n,e,t,r,i,s,l,c)=>(0,ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[y,D]of Object.entries(l))p.settings[y]=D;return c&&p.setPersistence(c),p},[t,r,i,s,l,c]);let Rk=(()=>{class n{constructor(t,r,i,s,l,c,p,y,D,C,M,R){const F=new nn.x,H=Je(void 0).pipe((0,AS.Q)(l.outsideAngular),mn(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1277)))),(0,ct.U)(()=>(0,ci.on)(t,s,r)),(0,ct.U)(K=>xk(K,s,c,y,D,C,p,M)),tG({bufferSize:1,refCount:!1}));if(Ur(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{H.pipe(Ga()).subscribe();const ve=H.pipe(mn(Ne=>Ne.getRedirectResult().then(je=>je,()=>null)),Cn.iC,tG({bufferSize:1,refCount:!1})),Te=H.pipe(mn(Ne=>new rr.y(je=>({unsubscribe:s.runOutsideAngular(()=>Ne.onAuthStateChanged(We=>je.next(We),We=>je.error(We),()=>je.complete()))})))),ke=H.pipe(mn(Ne=>new rr.y(je=>({unsubscribe:s.runOutsideAngular(()=>Ne.onIdTokenChanged(We=>je.next(We),We=>je.error(We),()=>je.complete()))}))));this.authState=ve.pipe(nG(Te),(0,Ck.R)(l.outsideAngular),(0,AS.Q)(l.insideAngular)),this.user=ve.pipe(nG(ke),(0,Ck.R)(l.outsideAngular),(0,AS.Q)(l.insideAngular)),this.idToken=this.user.pipe(mn(Ne=>Ne?(0,ln.D)(Ne.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(mn(Ne=>Ne?(0,ln.D)(Ne.getIdTokenResult()):Je(null))),this.credential=(0,qe.T)(ve,F,this.authState.pipe(En(Ne=>!Ne))).pipe((0,ct.U)(Ne=>Ne?.user?Ne:null),(0,Ck.R)(l.outsideAngular),(0,AS.Q)(l.insideAngular))}return(0,ci.pX)(this,H,s,{spy:{apply:(K,ve,Te)=>{(K.startsWith("signIn")||K.startsWith("createUser"))&&Te.then(ke=>F.next(ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cn.HU),d.LFG(Tk,8),d.LFG(Ik,8),d.LFG(Sk,8),d.LFG(Nk,8),d.LFG(Ak,8),d.LFG(Mk,8),d.LFG(Fb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function rG(n,e){return function NZ(n,e=ks.z){return new rr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Ok(n,e){return rG(n,e).pipe((0,ct.U)(t=>({payload:t,type:"query"})))}function MS(n,e){return Ok(n,e).pipe(bi(void 0),Rx(),(0,ct.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,c)=>{const p=i.find(D=>D.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:l}})}),s}))}function iG(n,e,t){return MS(n,t).pipe(zu((r,i)=>function MZ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xZ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),hs(),(0,ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function kk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function sG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oG{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bi(void 0),Rx(),En(([r,i])=>i.length>0||!r),(0,ct.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sG(e);return iG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ok(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new aG(this.ref.doc(e),this.afs)}}class aG{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=cG(r,t);return new oG(i,s,this.afs)}snapshotChanges(){return function AZ(n,e){return rG(n,e).pipe(bi(void 0),Rx(),(0,ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Cn.iC)}}class RZ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),En(t=>t.length>0),Cn.iC):MS(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sG(e);return iG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ok(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Cn.iC)}}const lG=new d.OlP("angularfire2.enableFirestorePersistence"),uG=new d.OlP("angularfire2.firestore.persistenceSettings"),OZ=new d.OlP("angularfire2.firestore.settings"),kZ=new d.OlP("angularfire2.firestore.use-emulator");function cG(n,e=(t=>t)){return{query:e(n),ref:n}}let dG=(()=>{class n{constructor(t,r,i,s,l,c,p,y,D,C,M,R,F,H,K,ve,Te){this.schedulers=p;const ke=(0,ci.on)(t,c,r),Ne=D;C&&xk(ke,c,M,F,H,K,R,ve),[this.firestore,this.persistenceEnabled$]=(0,ci.cc)(`${ke.name}.firestore`,"AngularFirestore",ke.name,()=>{const je=c.runOutsideAngular(()=>ke.firestore());if(s&&je.settings(s),Ne&&je.useEmulator(...Ne),i&&!Ur(l)){const We=()=>{try{return(0,ln.D)(je.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ht){return typeof console<"u"&&console.warn(ht),Je(!1)}};return[je,c.runOutsideAngular(We)]}return[je,Je(!1)]},[s,Ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=cG(i,r),c=this.schedulers.ngZone.run(()=>s);return new oG(c,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new RZ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new aG(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(lG,8),d.LFG(OZ,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cn.HU),d.LFG(uG,8),d.LFG(kZ,8),d.LFG(Rk,8),d.LFG(Tk,8),d.LFG(Ik,8),d.LFG(Sk,8),d.LFG(Nk,8),d.LFG(Ak,8),d.LFG(Mk,8),d.LFG(Fb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PZ=(()=>{class n{constructor(){xx.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lG,useValue:!0},{provide:uG,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[dG]}),n})();const hG="@firebase/database",fG="0.13.10";let Pk="";function pG(n){Pk=n}class LZ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class VZ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const gG=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LZ(e)}}catch{}return new VZ},Zg=gG("localStorage"),Fk=gG("sessionStorage"),Uy=new jl.Yd("@firebase/database"),mG=function(){let n=1;return function(){return n++}}(),_G=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},jw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jw.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let Yg=null,yG=!0;const vG=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Uy.logLevel=jl.in.VERBOSE,Yg=Uy.log.bind(Uy),e&&Fk.set("logging_enabled",!0)):"function"==typeof n?Yg=n:(Yg=null,Fk.remove("logging_enabled"))},Ui=function(...n){if(!0===yG&&(yG=!1,null===Yg&&!0===Fk.get("logging_enabled")&&vG(!0)),Yg){const e=jw.apply(null,n);Yg(e)}},Hw=function(n){return function(...e){Ui(n,...e)}},Lk=function(...n){const e="FIREBASE INTERNAL ERROR: "+jw(...n);Uy.error(e)},ac=function(...n){const e=`FIREBASE FATAL ERROR: ${jw(...n)}`;throw Uy.error(e),new Error(e)},bs=function(...n){const e="FIREBASE WARNING: "+jw(...n);Uy.warn(e)},xS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ud="[MIN_NAME]",lc="[MAX_NAME]",Qg=function(n,e){if(n===e)return 0;if(n===Ud||e===lc)return-1;if(e===Ud||n===lc)return 1;{const t=RS(n),r=RS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},jZ=function(n,e){return n===e?0:n<e?-1:1},Gw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},Vk=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Wl)(e[r]),t+=":",t+=Vk(n[e[r]]);return t+="}",t},bG=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const wG=function(n){(0,P.hu)(!xS(n),"Invalid JSON number");const r=1023;let i,s,l,c,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=c+r,l=Math.round(n*Math.pow(2,52-c)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const D=y.join("");let C="";for(p=0;p<64;p+=8){let M=parseInt(D.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),C+=M}return C.toLowerCase()},WZ=new RegExp("^-?(0*)\\d{1,10}$"),DG=-2147483648,Bk=2147483647,RS=function(n){if(WZ.test(n)){const e=Number(n);if(e>=DG&&e<=Bk)return e}return null},jy=function(n){try{n()}catch(e){setTimeout(()=>{throw bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},$w=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class qZ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class KZ{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bs(e)}}let Ww=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const SG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MG="websocket",xG="long_polling";class jk{constructor(e,t,r,i,s=!1,l="",c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function RG(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===MG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==xG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ZZ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ji(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class YZ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const Hk={},Gk={};function $k(n){const e=n.toString();return Hk[e]||(Hk[e]=new YZ),Hk[e]}class JZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tf{constructor(e,t,r,i,s,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hw(e),this.stats_=$k(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),RG(t,xG,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new JZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wk((...s)=>{const[l,c,p,y,D]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=c,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&SG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tf.forceAllow_=!0}static forceDisallow(){Tf.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Tf.forceAllow_&&(Tf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=bG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Wk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=mG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Wk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){Ui("frame writing exception"),c.stack&&Ui(c.stack),Ui(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let kS=null;typeof MozWebSocket<"u"?kS=MozWebSocket:typeof WebSocket<"u"&&(kS=WebSocket);let Hy=(()=>{class n{constructor(t,r,i,s,l,c,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hw(this.connId),this.stats_=$k(r),this.connURL=n.connectionURL_(r,c,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const c={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&SG.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),s&&(c.ac=s),l&&(c.p=l),RG(t,MG,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zg.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Pk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,c=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;c&&(i.proxy={origin:c})}this.mySock=new kS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==kS&&!n.forceDisallow_}static previouslyFailed(){return Zg.isInMemoryStorage||!0===Zg.get("previous_websocket_failure")}markConnectionHealthy(){Zg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=bG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),BG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Tf,Hy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Hy&&Hy.isAvailable();let i=r&&!Hy.previouslyFailed();if(t.webSocketOnly&&(r||bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hy];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class zG{constructor(e,t,r,i,s,l,c,p,y,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hw("c:"+this.id+":"),this.transportManager_=new BG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$w(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Gw("t",e),r=Gw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Gw("t",e),r=Gw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Gw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Lk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),$w(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$w(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class KG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class PS extends KG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new PS}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new Pn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function If(n){return n.pieces_.length-n.pieceNum_}function er(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function qk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function zw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function QG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function Tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function Js(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return Js(er(n),er(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function b7(n,e){const t=zw(n,0),r=zw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Qg(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Kk(n,e){if(If(n)!==If(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Qa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(If(n)>If(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class w7{constructor(e,t){this.errorPrefix_=t,this.parts_=zw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);JG(this)}}function JG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jg(n))}function Jg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Zk extends KG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Zk}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const qw=1e3;let LS,Xg=(()=>{class n extends qG{constructor(t,r,i,s,l,c,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Hw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&PS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:c=>{const p=c.d;"ok"===c.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(c).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,D=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==D&&this.removeListen_(i,s),t.onComplete&&t.onComplete(D,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,c=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const c={p:r,d:i};void 0!==l&&(c.h=l),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Lk("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,c=t.lastSessionId;let p=!1,y=null;const D=function(){y?y.close():(p=!0,s())};t.realtime_={close:D,sendRequest:function(R){(0,P.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,F]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=F&&F.token,y=new zG(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,H=>{bs(H+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},c))}catch(R){t.log_("Failed to get token: "+R),p||(t.repoInfo_.nodeAdmin&&bs(R),D())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=qw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Vk(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ui("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ui("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Pk.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=PS.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class FS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(Ud,e),i=new un(Ud,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class t$ extends FS{static get __EMPTY_NODE(){return LS}static set __EMPTY_NODE(e){LS=e}compare(e,t){return Qg(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(lc,LS)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,LS)}toString(){return".key"}}const uc=new t$;class VS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Qk,Gl=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Po.EMPTY_NODE,this.right=l??Po.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Po.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Po.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Po{constructor(e,t=Po.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Po(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gl.BLACK,null,null))}remove(e){return new Po(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VS(this.root_,null,this.comparator_,!0,e)}}function A7(n,e){return Qg(n.name,e.name)}function Yk(n,e){return Qg(n,e)}Po.EMPTY_NODE=new class N7{copy(e,t,r,i,s){return this}insert(e,t,r){return new Gl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const n$=function(n){return"number"==typeof n?"number:"+wG(n):"string:"+n},r$=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===Qk||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===Qk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let i$,s$,o$,Gy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),r$(this.priorityNode_)}static set __childrenNodeConstructor(t){i$=t}static get __childrenNodeConstructor(){return i$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===If(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(er(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+n$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?wG(this.value_):this.value_,this.lazyHash_=_G(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(s>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const or=new class O7 extends FS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Qg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(lc,new Gy("[PRIORITY-POST]",o$))}makePost(e,t){const r=s$(e);return new un(t,new Gy("[PRIORITY-POST]",r))}toString(){return".priority"}},k7=Math.log(2);class P7{constructor(e){this.count=parseInt(Math.log(e+1)/k7,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const BS=function(n,e,t,r){n.sort(e);const i=function(p,y){const D=y-p;let C,M;if(0===D)return null;if(1===D)return C=n[p],M=t?t(C):C,new Gl(M,C.node,Gl.BLACK,null,null);{const R=parseInt(D/2,10)+p,F=i(p,R),H=i(R+1,y);return C=n[R],M=t?t(C):C,new Gl(M,C.node,Gl.BLACK,F,H)}},c=function(p){let y=null,D=null,C=n.length;const M=function(F,H){const K=C-F,ve=C;C-=F;const Te=i(K+1,ve),ke=n[K],Ne=t?t(ke):ke;R(new Gl(Ne,ke.node,H,null,Te))},R=function(F){y?(y.left=F,y=F):(D=F,y=F)};for(let F=0;F<p.count;++F){const H=p.nextBitIsOne(),K=Math.pow(2,p.count-(F+1));H?M(K,Gl.BLACK):(M(K,Gl.BLACK),M(K,Gl.RED))}return D}(new P7(n.length));return new Po(r||e,c)};let Jk;const $y={};class jd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)($y&&or,"ChildrenNode.ts has not been loaded"),Jk=Jk||new jd({".priority":$y},{".priority":or}),Jk}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Po?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==uc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(un.Wrap);let c,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();c=i?BS(r,e.getCompare()):$y;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const D=Object.assign({},this.indexes_);return D[p]=c,new jd(D,y)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,s)=>{const l=(0,P.DV)(this.indexSet_,s);if((0,P.hu)(l,"Missing index implementation for "+s),i===$y){if(l.isDefinedOn(e.node)){const c=[],p=t.getIterator(un.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&c.push(y),y=p.getNext();return c.push(e),BS(c,l.getCompare())}return $y}{const c=t.get(e.name);let p=i;return c&&(p=p.remove(new un(e.name,c))),p.insert(e,e.node)}});return new jd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===$y)return i;{const s=t.get(e.name);return s?i.remove(new un(e.name,s)):i}});return new jd(r,this.indexSet_)}}let Kw,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&r$(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kw||(Kw=new n(new Po(Yk),null,jd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Kw:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(er(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?Kw:this.priorityNode_;return new n(s,c,l)}}updateChild(t,r){const i=rn(t);if(null===i)return r;{(0,P.hu)(".priority"!==rn(t)||1===If(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(er(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(or,(c,p)=>{r[c]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):l=!1}),!t&&l&&s<2*i){const c=[];for(const p in r)c[p]=r[p];return c}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+n$(this.getPriority().val())+":"),this.forEachChild(or,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":_G(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new un(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,un.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zw?-1:0}withIndex(t){if(t===uc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===uc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(or),s=r.getIterator(or);let l=i.getNext(),c=s.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=s.getNext()}return null===l&&null===c}return!1}return!1}}resolveIndex_(t){return t===uc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Zw=new class F7 extends qt{constructor(){super(new Po(Yk),qt.EMPTY_NODE,jd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};function Fr(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gy(n,Fr(e));if(n instanceof Array){let t=qt.EMPTY_NODE;return ji(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const s=Fr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Fr(e))}{const t=[];let r=!1;if(ji(n,(l,c)=>{if("."!==l.substring(0,1)){const p=Fr(c);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new un(l,p)))}}),0===t.length)return qt.EMPTY_NODE;const s=BS(t,A7,l=>l.name,Yk);if(r){const l=BS(t,or.getCompare());return new qt(s,Fr(e),new jd({".priority":l},{".priority":or}))}return new qt(s,Fr(e),jd.Default)}}Object.defineProperties(un,{MIN:{value:new un(Ud,qt.EMPTY_NODE)},MAX:{value:new un(lc,Zw)}}),t$.__EMPTY_NODE=qt.EMPTY_NODE,Gy.__childrenNodeConstructor=qt,function M7(n){Qk=n}(Zw),function R7(n){o$=n}(Zw),function x7(n){s$=n}(Fr);class Xk extends FS{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Qg(e.name,t.name):s}makePost(e,t){const r=Fr(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,Zw);return new un(lc,e)}toString(){return zw(this.indexPath_,0).join("/")}}const eP=new class V7 extends FS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Qg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Fr(e);return new un(t,r)}toString(){return".value"}},Wy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",B7=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Wy.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Wy.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),u$=function(n){if(n===""+Bk)return"-";const e=RS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return lc;const s=Wy.charAt(Wy.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},c$=function(n){if(n===""+DG)return Ud;const e=RS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Bk:(delete t[t.length-1],t.join("")):(t[t.length-1]=Wy.charAt(Wy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function d$(n){return{type:"value",snapshotNode:n}}function zy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Yw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Qw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class nP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Yw(t,c)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(zy(t,r)):l.trackChildChange(Qw(t,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(or,(i,s)=>{t.hasChild(i)||r.trackChildChange(Yw(i,s))}),t.isLeafNode()||t.forEachChild(or,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(Qw(i,s,l))}else r.trackChildChange(zy(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Jw{constructor(e){this.indexedFilter_=new nP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Jw.getStartPost_(e),this.endPost_=Jw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,l){return this.matches(new un(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const s=this;return t.forEachChild(or,(l,c)=>{s.matches(new un(l,c))||(i=i.updateImmediateChild(l,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class j7{constructor(e){this.rangedFilter_=new Jw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new un(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=qt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const c=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(c.name,c.node),l++}}else{let s,l,c,p;if(i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const C=this.index_.getCompare();c=(M,R)=>C(R,M)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();let y=0,D=!1;for(;p.hasNext();){const C=p.getNext();!D&&c(s,C)<=0&&(D=!0),D&&y<this.limit_&&c(C,l)<=0?y++:i=i.updateImmediateChild(C.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const C=this.index_.getCompare();l=(M,R)=>C(R,M)}else l=this.index_.getCompare();const c=e;(0,P.hu)(c.numChildren()===this.limit_,"");const p=new un(t,r),y=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),D=this.rangedFilter_.matches(p);if(c.hasChild(t)){const C=c.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||c.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const R=null==M?1:l(M,p);if(D&&!r.isEmpty()&&R>=0)return s?.trackChildChange(Qw(t,r,C)),c.updateImmediateChild(t,r);{s?.trackChildChange(Yw(t,C));const H=c.updateImmediateChild(t,qt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(zy(M.name,M.node)),H.updateImmediateChild(M.name,M.node)):H}}return r.isEmpty()?e:D&&l(y,p)>=0?(null!=s&&(s.trackChildChange(Yw(y.name,y.node)),s.trackChildChange(zy(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(y.name,qt.EMPTY_NODE)):e}}class US{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=or}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===or}copy(){const e=new US;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function iP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jS(n,e){const t=n.copy();return t.index_=e,t}function h$(n){const e={};if(n.isDefault())return e;let t;return n.index_===or?t="$priority":n.index_===eP?t="$value":n.index_===uc?t="$key":((0,P.hu)(n.index_ instanceof Xk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_&&(e.startAt=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function f$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==or&&(e.i=n.index_.toString()),e}class HS extends qG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=HS.getListenId_(e,r),c={};this.listens_[l]=c;const p=h$(e._queryParams);this.restRequest_(s+".json",p,(y,D)=>{let C=D;if(404===y&&(C=null,y=null),null===y&&this.onDataUpdate_(s,C,!1,r),(0,P.DV)(this.listens_,l)===c){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=HS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=h$(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(s,l)=>{let c=l;404===s&&(c=null,s=null),null===s?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&4===c.readyState){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let p=null;if(c.status>=200&&c.status<300){try{p=(0,P.cI)(c.responseText)}catch{bs("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,p)}else 401!==c.status&&404!==c.status&&bs("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}class q7{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function GS(){return{value:null,children:new Map}}function qy(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,GS()),qy(n.children.get(r),e=er(e),t)}}function sP(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(or,(r,i)=>{qy(n,new Pn(r),i)}),sP(n,e)}}if(n.children.size>0){const t=rn(e);return e=er(e),n.children.has(t)&&sP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function oP(n,e,t){null!==n.value?t(e,n.value):function K7(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{oP(i,new Pn(e.toString()+"/"+r),t)})}class Z7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ji(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class J7{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Z7(e);const r=1e4+2e4*Math.random();$w(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ji(e,(i,s)=>{s>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),$w(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ja=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ja||(Ja={})),Ja))();function uP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class $S{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new $S(Nn(),t,this.revert)}}return(0,P.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new $S(er(this.path),this.affectedTree,this.revert)}}class Xw{constructor(e,t){this.source=e,this.path=t,this.type=Ja.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new Xw(this.source,Nn()):new Xw(this.source,er(this.path))}}class em{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ja.OVERWRITE}operationForChild(e){return sn(this.path)?new em(this.source,Nn(),this.snap.getImmediateChild(e)):new em(this.source,er(this.path),this.snap)}}class Ky{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ja.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new em(this.source,Nn(),t.value):new Ky(this.source,Nn(),t)}return(0,P.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ky(this.source,er(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class X7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eD(n,e,t,r,i,s){const l=r.filter(c=>c.type===t);l.sort((c,p)=>function nY(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,c,p)),l.forEach(c=>{const p=function tY(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,c,s);i.forEach(y=>{y.respondsTo(c.type)&&e.push(y.createEvent(p,n.query_))})})}function WS(n,e){return{eventCache:n,serverCache:e}}function tD(n,e,t,r){return WS(new Sf(e,t,r),n.serverCache)}function g$(n,e,t,r){return WS(n.eventCache,new Sf(e,t,r))}function zS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let cP;class ar{constructor(e,t=(()=>(cP||(cP=new Po(jZ)),cP))()){this.value=e,this.children=t}static fromObject(e){let t=new ar(null);return ji(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(sn(e))return null;{const r=rn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(er(e),t);return null!=s?{path:Tr(new Pn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(er(e)):new ar(null)}}set(e,t){if(sn(e))return new ar(t,this.children);{const r=rn(e),s=(this.children.get(r)||new ar(null)).set(er(e),t),l=this.children.insert(r,s);return new ar(this.value,l)}}remove(e){if(sn(e))return this.children.isEmpty()?new ar(null):new ar(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const i=r.remove(er(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new ar(null):new ar(this.value,s)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(er(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),s=(this.children.get(r)||new ar(null)).setTree(er(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new ar(this.value,l)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(sn(e))return null;{const s=rn(e),l=this.children.get(s);return l?l.findOnPath_(er(e),Tr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const i=rn(e),s=this.children.get(i);return s?s.foreachOnPath_(er(e),Tr(t,i),r):new ar(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class $l{constructor(e){this.writeTree_=e}static empty(){return new $l(new ar(null))}}function nD(n,e,t){if(sn(e))return new $l(new ar(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=Js(i,e);return s=s.updateChild(l,t),new $l(n.writeTree_.set(i,s))}{const i=new ar(t),s=n.writeTree_.setTree(e,i);return new $l(s)}}}function dP(n,e,t){let r=n;return ji(t,(i,s)=>{r=nD(r,Tr(e,i),s)}),r}function m$(n,e){if(sn(e))return $l.empty();{const t=n.writeTree_.setTree(e,new ar(null));return new $l(t)}}function hP(n,e){return null!=nm(n,e)}function nm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Js(t.path,e)):null}function _$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(or,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function Nf(n,e){if(sn(e))return n;{const t=nm(n,e);return new $l(null!=t?new ar(t):n.writeTree_.subtree(e))}}function fP(n){return n.writeTree_.isEmpty()}function Zy(n,e){return y$(Nn(),n.writeTree_,e)}function y$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,P.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=y$(Tr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Tr(n,".priority"),r)),t}}function qS(n,e){return E$(e,n)}function lY(n,e){if(n.snap)return Qa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qa(Tr(n.path,t),e))return!0;return!1}function cY(n){return n.visible}function v$(n,e,t){let r=$l.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let c;if(s.snap)Qa(t,l)?(c=Js(t,l),r=nD(r,c,s.snap)):Qa(l,t)&&(c=Js(l,t),r=nD(r,Nn(),s.snap.getChild(c)));else{if(!s.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Qa(t,l))c=Js(t,l),r=dP(r,c,s.children);else if(Qa(l,t))if(c=Js(l,t),sn(c))r=dP(r,Nn(),s.children);else{const p=(0,P.DV)(s.children,rn(c));if(p){const y=p.getChild(er(c));r=nD(r,Nn(),y)}}}}}return r}function b$(n,e,t,r,i){if(r||i){const s=Nf(n.visibleWrites,e);return!i&&fP(s)?t:i||null!=t||hP(s,Nn())?Zy(v$(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Qa(y.path,e)||Qa(e,y.path))},e),t||qt.EMPTY_NODE):null}{const s=nm(n.visibleWrites,e);if(null!=s)return s;{const l=Nf(n.visibleWrites,e);return fP(l)?t:null!=t||hP(l,Nn())?Zy(l,t||qt.EMPTY_NODE):null}}}function KS(n,e,t,r){return b$(n.writeTree,n.treePath,e,t,r)}function pP(n,e){return function dY(n,e,t){let r=qt.EMPTY_NODE;const i=nm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(or,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=Nf(n.visibleWrites,e);return t.forEachChild(or,(l,c)=>{const p=Zy(Nf(s,new Pn(l)),c);r=r.updateImmediateChild(l,p)}),_$(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return _$(Nf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function w$(n,e,t,r){return function hY(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Tr(e,t);if(hP(n.visibleWrites,s))return null;{const l=Nf(n.visibleWrites,s);return fP(l)?i.getChild(t):Zy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ZS(n,e){return function pY(n,e){return nm(n.visibleWrites,e)}(n.writeTree,Tr(n.treePath,e))}function gP(n,e,t){return function fY(n,e,t,r){const i=Tr(e,t),s=nm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Zy(Nf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function D$(n,e){return E$(Tr(n.treePath,e),n.writeTree)}function E$(n,e){return{treePath:n,writeTree:e}}class yY{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Qw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Yw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,zy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Qw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const C$=new class vY{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class mP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tm(this.viewCache_),s=function _Y(n,e,t,r,i,s){return function gY(n,e,t,r,i,s,l){let c;const p=Nf(n.visibleWrites,e),y=nm(p,Nn());if(null!=y)c=y;else{if(null==t)return[];c=Zy(p,t)}if(c=c.withIndex(l),c.isEmpty()||c.isLeafNode())return[];{const D=[],C=l.getCompare(),M=s?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let R=M.getNext();for(;R&&D.length<i;)0!==C(R,r)&&D.push(R),R=M.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function T$(n,e,t,r,i,s){const l=e.eventCache;if(null!=ZS(r,t))return e;{let c,p;if(sn(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=tm(e),C=pP(r,y instanceof qt?y:qt.EMPTY_NODE);c=n.filter.updateFullNode(e.eventCache.getNode(),C,s)}else{const y=KS(r,tm(e));c=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=rn(t);if(".priority"===y){(0,P.hu)(1===If(t),"Can't have a priority with additional path components");const D=l.getNode();p=e.serverCache.getNode();const C=w$(r,t,D,p);c=null!=C?n.filter.updatePriority(D,C):l.getNode()}else{const D=er(t);let C;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const M=w$(r,t,l.getNode(),p);C=null!=M?l.getNode().getImmediateChild(y).updateChild(D,M):l.getNode().getImmediateChild(y)}else C=gP(r,y,e.serverCache);c=null!=C?n.filter.updateChild(l.getNode(),y,C,D,i,s):l.getNode()}}return tD(e,c,l.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function YS(n,e,t,r,i,s,l,c){const p=e.serverCache;let y;const D=l?n.filter:n.filter.getIndexedFilter();if(sn(t))y=D.updateFullNode(p.getNode(),r,null);else if(D.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(t,r);y=D.updateFullNode(p.getNode(),R,null)}else{const R=rn(t);if(!p.isCompleteForPath(t)&&If(t)>1)return e;const F=er(t),K=p.getNode().getImmediateChild(R).updateChild(F,r);y=".priority"===R?D.updatePriority(p.getNode(),K):D.updateChild(p.getNode(),R,K,F,C$,null)}const C=g$(e,y,p.isFullyInitialized()||sn(t),D.filtersNodes());return T$(n,C,t,i,new mP(i,C,s),c)}function _P(n,e,t,r,i,s,l){const c=e.eventCache;let p,y;const D=new mP(i,e,s);if(sn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=tD(e,y,!0,n.filter.filtersNodes());else{const C=rn(t);if(".priority"===C)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=tD(e,y,c.isFullyInitialized(),c.isFiltered());else{const M=er(t),R=c.getNode().getImmediateChild(C);let F;if(sn(M))F=r;else{const H=D.getCompleteChild(C);F=null!=H?".priority"===qk(M)&&H.getChild(QG(M)).isEmpty()?H:H.updateChild(M,r):qt.EMPTY_NODE}p=R.equals(F)?e:tD(e,n.filter.updateChild(c.getNode(),C,F,M,D,l),c.isFullyInitialized(),n.filter.filtersNodes())}}return p}function I$(n,e){return n.eventCache.isCompleteForChild(e)}function S$(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function yP(n,e,t,r,i,s,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=sn(t)?r:new ar(null).setTree(t,r);const D=e.serverCache.getNode();return y.children.inorderTraversal((C,M)=>{if(D.hasChild(C)){const F=S$(0,e.serverCache.getNode().getImmediateChild(C),M);p=YS(n,p,new Pn(C),F,i,s,l,c)}}),y.children.inorderTraversal((C,M)=>{const R=!e.serverCache.isCompleteForChild(C)&&null===M.value;if(!D.hasChild(C)&&!R){const H=S$(0,e.serverCache.getNode().getImmediateChild(C),M);p=YS(n,p,new Pn(C),H,i,s,l,c)}}),p}class NY{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new nP(r.getIndex()),s=function H7(n){return n.loadsAllData()?new nP(n.getIndex()):n.hasLimit()?new j7(n):new Jw(n)}(r);this.processor_=function bY(n){return{filter:n}}(s);const l=t.serverCache,c=t.eventCache,p=i.updateFullNode(qt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(qt.EMPTY_NODE,c.getNode(),null),D=new Sf(p,l.isFullyInitialized(),i.filtersNodes()),C=new Sf(y,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=WS(C,D),this.eventGenerator_=new X7(this.query_)}get query(){return this.query_}}function xY(n,e){const t=tm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function N$(n){return 0===n.eventRegistrations_.length}function A$(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function M$(n,e,t,r){e.type===Ja.MERGE&&null!==e.source.queryId&&((0,P.hu)(tm(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(zS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function DY(n,e,t,r,i){const s=new yY;let l,c;if(t.type===Ja.OVERWRITE){const y=t;y.source.fromUser?l=_P(n,e,y.path,y.snap,r,i,s):((0,P.hu)(y.source.fromServer,"Unknown source."),c=y.source.tagged||e.serverCache.isFiltered()&&!sn(y.path),l=YS(n,e,y.path,y.snap,r,i,c,s))}else if(t.type===Ja.MERGE){const y=t;y.source.fromUser?l=function CY(n,e,t,r,i,s,l){let c=e;return r.foreach((p,y)=>{const D=Tr(t,p);I$(e,rn(D))&&(c=_P(n,c,D,y,i,s,l))}),r.foreach((p,y)=>{const D=Tr(t,p);I$(e,rn(D))||(c=_P(n,c,D,y,i,s,l))}),c}(n,e,y.path,y.children,r,i,s):((0,P.hu)(y.source.fromServer,"Unknown source."),c=y.source.tagged||e.serverCache.isFiltered(),l=yP(n,e,y.path,y.children,r,i,c,s))}else if(t.type===Ja.ACK_USER_WRITE){const y=t;l=y.revert?function SY(n,e,t,r,i,s){let l;if(null!=ZS(r,t))return e;{const c=new mP(r,e,i),p=e.eventCache.getNode();let y;if(sn(t)||".priority"===rn(t)){let D;if(e.serverCache.isFullyInitialized())D=KS(r,tm(e));else{const C=e.serverCache.getNode();(0,P.hu)(C instanceof qt,"serverChildren would be complete if leaf node"),D=pP(r,C)}y=n.filter.updateFullNode(p,D,s)}else{const D=rn(t);let C=gP(r,D,e.serverCache);null==C&&e.serverCache.isCompleteForChild(D)&&(C=p.getImmediateChild(D)),y=null!=C?n.filter.updateChild(p,D,C,er(t),c,s):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(p,D,qt.EMPTY_NODE,er(t),c,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=KS(r,tm(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=ZS(r,Nn()),tD(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function TY(n,e,t,r,i,s,l){if(null!=ZS(i,t))return e;const c=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(sn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return YS(n,e,t,p.getNode().getChild(t),i,s,c,l);if(sn(t)){let y=new ar(null);return p.getNode().forEachChild(uc,(D,C)=>{y=y.set(new Pn(D),C)}),yP(n,e,t,y,i,s,c,l)}return e}{let y=new ar(null);return r.foreach((D,C)=>{const M=Tr(t,D);p.isCompleteForPath(M)&&(y=y.set(D,p.getNode().getChild(M)))}),yP(n,e,t,y,i,s,c,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Ja.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function IY(n,e,t,r,i){const s=e.serverCache;return T$(n,g$(e,s.getNode(),s.isFullyInitialized()||sn(t),s.isFiltered()),t,r,C$,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function EY(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(d$(zS(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function wY(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,P.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,x$(n,s.changes,s.viewCache.eventCache.getNode(),null)}function x$(n,e,t,r){return function eY(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function U7(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),eD(n,i,"child_removed",e,r,t),eD(n,i,"child_added",e,r,t),eD(n,i,"child_moved",s,r,t),eD(n,i,"child_changed",e,r,t),eD(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let QS,XS;class R${constructor(){this.views=new Map}}function vP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,P.hu)(null!=s,"SyncTree gave us an op for an invalid query."),M$(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(M$(l,e,t,r));return s}}function O$(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let c=KS(t,i?r:null),p=!1;c?p=!0:r instanceof qt?(c=pP(t,r),p=!1):(c=qt.EMPTY_NODE,p=!1);const y=WS(new Sf(c,p,!1),new Sf(r,i,!1));return new NY(e,y)}return l}function k$(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Af(n,e){let t=null;for(const r of n.views.values())t=t||xY(r,e);return t}function P$(n,e){return e._queryParams.loadsAllData()?JS(n):n.views.get(e._queryIdentifier)}function F$(n,e){return null!=P$(n,e)}function Mf(n){return null!=JS(n)}function JS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let jY=1;class L${constructor(e){this.listenProvider_=e,this.syncPointTree_=new ar(null),this.pendingWriteTree_=function mY(){return{visibleWrites:$l.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bP(n,e,t,r,i){return function iY(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=nD(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Yy(n,new em({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function xf(n,e,t=!1){const r=function oY(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function aY(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&lY(c,r.path)?i=!1:Qa(r.path,c.path)&&(s=!0)),l--}return!!i&&(s?(function uY(n){n.visibleWrites=v$(n.allWrites,cY,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=m$(n.visibleWrites,r.path):ji(r.children,p=>{n.visibleWrites=m$(n.visibleWrites,Tr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new ar(null);return null!=r.snap?s=s.set(Nn(),!0):ji(r.children,l=>{s=s.set(new Pn(l),!0)}),Yy(n,new $S(r.path,s,t))}return[]}function rD(n,e,t){return Yy(n,new em({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function e1(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let c=[];if(l&&("default"===e._queryIdentifier||F$(l,e))){const p=function VY(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const c=Mf(n);if("default"===i)for(const[p,y]of n.views.entries())l=l.concat(A$(y,t,r)),N$(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(l=l.concat(A$(p,t,r)),N$(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return c&&!Mf(n)&&s.push(new(function PY(){return(0,P.hu)(QS,"Reference.ts has not been loaded"),QS}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function FY(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(c=p.events,!i){const D=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(s,(M,R)=>Mf(R));if(D&&!C){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const R=function KY(n){return n.fold((e,t,r)=>{if(t&&Mf(t))return[JS(t)];{let i=[];return t&&(i=k$(t)),ji(r,(s,l)=>{i=i.concat(l)}),i}})}(M);for(let F=0;F<R.length;++F){const H=R[F],K=H.query,ve=j$(n,H);n.listenProvider_.startListening(sD(K),iD(n,K),ve.hashFn,ve.onComplete)}}}!C&&y.length>0&&!r&&(D?n.listenProvider_.stopListening(sD(e),null):y.forEach(M=>{const R=n.queryToTagMap.get(n1(M));n.listenProvider_.stopListening(sD(M),R)}))}!function ZY(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=n1(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return c}function V$(n,e,t,r){const i=DP(n,r);if(null!=i){const s=EP(i),l=s.path,c=s.queryId,p=Js(l,e);return CP(n,l,new em(uP(c),p,t))}return[]}function wP(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(M,R)=>{const F=Js(M,i);s=s||Af(R,F),l=l||Mf(R)});let p,c=n.syncPointTree_.get(i);c?(l=l||Mf(c),s=s||Af(c,Nn())):(c=new R$,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=s?p=!0:(p=!1,s=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((R,F)=>{const H=Af(F,Nn());H&&(s=s.updateImmediateChild(R,H))}));const y=F$(c,e);if(!y&&!e._queryParams.loadsAllData()){const M=n1(e);(0,P.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const R=function YY(){return jY++}();n.queryToTagMap.set(M,R),n.tagToQueryMap.set(R,M)}let C=function LY(n,e,t,r,i,s){const l=O$(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function RY(n,e){n.eventRegistrations_.push(e)}(l,t),function OY(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(or,(s,l)=>{r.push(zy(s,l))}),t.isFullyInitialized()&&r.push(d$(t.getNode())),x$(n,r,t.getNode(),e)}(l,t)}(c,e,t,qS(n.pendingWriteTree_,i),s,p);if(!y&&!l&&!r){const M=P$(c,e);C=C.concat(function QY(n,e,t){const r=e._path,i=iD(n,e),s=j$(n,t),l=n.listenProvider_.startListening(sD(e),i,s.hashFn,s.onComplete),c=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Mf(c.value),"If we're adding a query, it shouldn't be shadowed");else{const p=c.fold((y,D,C)=>{if(!sn(y)&&D&&Mf(D))return[JS(D).query];{let M=[];return D&&(M=M.concat(k$(D).map(R=>R.query))),ji(C,(R,F)=>{M=M.concat(F)}),M}});for(let y=0;y<p.length;++y){const D=p[y];n.listenProvider_.stopListening(sD(D),iD(n,D))}}return l}(n,e,M))}return C}function t1(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,c)=>{const y=Af(c,Js(l,e));if(y)return y});return b$(i,e,s,t,!0)}function Yy(n,e){return B$(e,n.syncPointTree_,null,qS(n.pendingWriteTree_,Nn()))}function B$(n,e,t,r){if(sn(n.path))return U$(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Af(i,Nn()));let s=[];const l=rn(n.path),c=n.operationForChild(l),p=e.children.get(l);if(p&&c){const y=t?t.getImmediateChild(l):null,D=D$(r,l);s=s.concat(B$(c,p,y,D))}return i&&(s=s.concat(vP(i,n,r,t))),s}}function U$(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Af(i,Nn()));let s=[];return e.children.inorderTraversal((l,c)=>{const p=t?t.getImmediateChild(l):null,y=D$(r,l),D=n.operationForChild(l);D&&(s=s.concat(U$(D,c,p,y)))}),i&&(s=s.concat(vP(i,n,r,t))),s}function j$(n,e){const t=e.query,r=iD(n,t);return{hashFn:()=>(function AY(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function WY(n,e,t){const r=DP(n,t);if(r){const i=EP(r),s=i.path,l=i.queryId,c=Js(s,e);return CP(n,s,new Xw(uP(l),c))}return[]}(n,t._path,r):function $Y(n,e){return Yy(n,new Xw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function $Z(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return e1(n,t,null,s)}}}}function iD(n,e){const t=n1(e);return n.queryToTagMap.get(t)}function n1(n){return n._path.toString()+"$"+n._queryIdentifier}function DP(n,e){return n.tagToQueryMap.get(e)}function EP(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function CP(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),vP(r,t,qS(n.pendingWriteTree_,e),null)}function sD(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function UY(){return(0,P.hu)(XS,"Reference.ts has not been loaded"),XS}())(n._repo,n._path):n}class TP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new TP(t)}node(){return this.node_}}class IP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tr(this.path_,e);return new IP(this.syncTree_,t)}node(){return t1(this.syncTree_,this.path_)}}const H$=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?XY(n[".sv"],e,t):"object"==typeof n[".sv"]?e9(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},XY=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},e9=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},G$=function(n,e,t,r){return NP(e,new IP(t,n),r)},SP=function(n,e,t){return NP(n,new TP(e),t)};function NP(n,e,t){const r=n.getPriority().val(),i=H$(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,c=H$(l.getValue(),e,t);return c!==l.getValue()||i!==l.getPriority().val()?new Gy(c,Fr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Gy(i))),l.forEachChild(or,(c,p)=>{const y=NP(p,e.getImmediateChild(c),t);y!==p&&(s=s.updateImmediateChild(c,y))}),s}}class AP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function r1(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=rn(t);for(;null!==i;){const s=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new AP(i,r,s),t=er(t),i=rn(t)}return r}function rm(n){return n.node.value}function MP(n,e){n.node.value=e,xP(n)}function $$(n){return n.node.childCount>0}function i1(n,e){ji(n.node.children,(t,r)=>{e(new AP(t,n,r))})}function W$(n,e,t,r){t&&!r&&e(n),i1(n,i=>{W$(i,e,!0,r)}),t&&r&&e(n)}function oD(n){return new Pn(null===n.parent?n.name:oD(n.parent)+"/"+n.name)}function xP(n){null!==n.parent&&function r9(n,e,t){const r=function t9(n){return void 0===rm(n)&&!$$(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xP(n))}(n.parent,n.name,n)}const i9=/[\[\].#$\/\u0000-\u001F\u007F]/,s9=/[\[\].#$\u0000-\u001F\u007F]/,RP=10485760,s1=function(n){return"string"==typeof n&&0!==n.length&&!i9.test(n)},z$=function(n){return"string"==typeof n&&0!==n.length&&!s9.test(n)},aD=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!xS(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},cc=function(n,e,t,r){r&&void 0===e||lD((0,P.gK)(n,"value"),e,t)},lD=function(n,e,t){const r=t instanceof Pn?new w7(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Jg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Jg(r)+" with contents = "+e.toString());if(xS(e))throw new Error(n+"contains "+e.toString()+" "+Jg(r));if("string"==typeof e&&e.length>RP/3&&(0,P.ug)(e)>RP)throw new Error(n+"contains a string greater than "+RP+" utf8 bytes "+Jg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ji(e,(l,c)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!s1(l)))throw new Error(n+" contains an invalid key ("+l+") "+Jg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function D7(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),JG(n)})(r,l),lD(n,c,r),function E7(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Jg(r)+" in addition to actual children.")}},q$=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ji(e,(l,c)=>{const p=new Pn(l);if(lD(i,c,Tr(t,p)),".priority"===qk(p)&&!aD(c))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=zw(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!s1(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(b7);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Qa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},OP=function(n,e,t){if(!t||void 0!==e){if(xS(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!aD(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uD=function(n,e,t,r){if(!(r&&void 0===t||s1(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cD=function(n,e,t,r){if(!(r&&void 0===t||z$(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xa=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},K$=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!s1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z$(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class u9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function o1(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Kk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Z$(n,e,t){o1(n,t),Y$(n,r=>Kk(r,e))}function ga(n,e,t){o1(n,t),Y$(n,r=>Qa(r,e)||Qa(e,r))}function Y$(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(c9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function c9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Yg&&Ui("event: "+t.toString()),jy(r)}}}const Q$="repo_interrupt";class h9{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GS(),this.transactionQueueTree_=new AP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function J$(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dD(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:J$(n)})}function X$(n,e,t,r,i){n.dataUpdateCount++;const s=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,P.UI)(t,y=>Fr(y));l=function zY(n,e,t,r){const i=DP(n,r);if(i){const s=EP(i),l=s.path,c=s.queryId,p=Js(l,e),y=ar.fromObject(t);return CP(n,l,new Ky(uP(c),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Fr(t);l=V$(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,P.UI)(t,y=>Fr(y));l=function GY(n,e,t){const r=ar.fromObject(t);return Yy(n,new Ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Fr(t);l=rD(n.serverSyncTree_,s,p)}let c=s;l.length>0&&(c=Jy(n,s)),ga(n.eventQueue_,c,l)}function e3(n,e){kP(n,"connected",e),!1===e&&function _9(n){Qy(n,"onDisconnectEvents");const e=dD(n),t=GS();oP(n.onDisconnect_,Nn(),(i,s)=>{const l=G$(i,s,n.serverSyncTree_,e);qy(t,i,l)});let r=[];oP(t,Nn(),(i,s)=>{r=r.concat(rD(n.serverSyncTree_,i,s));const l=VP(n,i);Jy(n,l)}),n.onDisconnect_=GS(),ga(n.eventQueue_,Nn(),r)}(n)}function kP(n,e,t){const r=new Pn("/.info/"+e),i=Fr(t);n.infoData_.updateSnapshot(r,i);const s=rD(n.infoSyncTree_,r,i);ga(n.eventQueue_,r,s)}function a1(n){return n.nextWriteId_++}function PP(n,e,t,r,i){Qy(n,"set",{path:e.toString(),value:t,priority:r});const s=dD(n),l=Fr(t,r),c=t1(n.serverSyncTree_,e),p=SP(l,c,s),y=a1(n),D=bP(n.serverSyncTree_,e,p,y,!0);o1(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(M,R)=>{const F="ok"===M;F||bs("set at "+e+" failed: "+M);const H=xf(n.serverSyncTree_,y,!F);ga(n.eventQueue_,e,H),Rf(0,i,M,R)});const C=VP(n,e);Jy(n,C),ga(n.eventQueue_,C,[])}function y9(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&sP(n.onDisconnect_,e),Rf(0,t,r,i)})}function t3(n,e,t,r){const i=Fr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&qy(n.onDisconnect_,e,i),Rf(0,r,s,l)})}function FP(n,e,t){let r;r=".info"===rn(e._path)?e1(n.infoSyncTree_,e,t):e1(n.serverSyncTree_,e,t),Z$(n.eventQueue_,e._path,r)}function n3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Q$)}function Qy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function Rf(n,e,t,r){e&&jy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function LP(n,e,t){return t1(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function l1(n,e=n.transactionQueueTree_){if(e||u1(n,e),rm(e)){const t=s3(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function C9(n,e,t){const r=t.map(y=>y.currentWriteId),i=LP(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const D=t[y];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const C=Js(e,D.path);s=s.updateChild(C,D.currentOutputSnapshotRaw)}const c=s.val(!0),p=e;n.server_.put(p.toString(),c,y=>{Qy(n,"transaction put response",{path:p.toString(),status:y});let D=[];if("ok"===y){const C=[];for(let M=0;M<t.length;M++)t[M].status=2,D=D.concat(xf(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&C.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();u1(n,r1(n.transactionQueueTree_,e)),l1(n,n.transactionQueueTree_),ga(n.eventQueue_,e,D);for(let M=0;M<C.length;M++)jy(C[M])}else{if("datastale"===y)for(let C=0;C<t.length;C++)t[C].status=3===t[C].status?4:0;else{bs("transaction at "+p.toString()+" failed: "+y);for(let C=0;C<t.length;C++)t[C].status=4,t[C].abortReason=y}Jy(n,e)}},l)}(n,oD(e),t)}else $$(e)&&i1(e,t=>{l1(n,t)})}function Jy(n,e){const t=r3(n,e),r=oD(t);return function T9(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(c=>0===c.status).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const p=e[c],y=Js(t,p.path);let C,D=!1;if((0,P.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)D=!0,C=p.abortReason,i=i.concat(xf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)D=!0,C="maxretry",i=i.concat(xf(n.serverSyncTree_,p.currentWriteId,!0));else{const M=LP(n,p.path,l);p.currentInputSnapshot=M;const R=e[c].update(M.val());if(void 0!==R){lD("transaction failed: Data returned ",R,p.path);let F=Fr(R);"object"==typeof R&&null!=R&&(0,P.r3)(R,".priority")||(F=F.updatePriority(M.getPriority()));const K=p.currentWriteId,ve=dD(n),Te=SP(F,M,ve);p.currentOutputSnapshotRaw=F,p.currentOutputSnapshotResolved=Te,p.currentWriteId=a1(n),l.splice(l.indexOf(K),1),i=i.concat(bP(n.serverSyncTree_,p.path,Te,p.currentWriteId,p.applyLocally)),i=i.concat(xf(n.serverSyncTree_,K,!0))}else D=!0,C="nodata",i=i.concat(xf(n.serverSyncTree_,p.currentWriteId,!0))}ga(n.eventQueue_,t,i),i=[],D&&(e[c].status=2,setTimeout(e[c].unwatcher,Math.floor(0)),e[c].onComplete&&r.push("nodata"===C?()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot):()=>e[c].onComplete(new Error(C),!1,null)))}u1(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)jy(r[c]);l1(n,n.transactionQueueTree_)}(n,s3(n,t),r),r}function r3(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===rm(r);)r=r1(r,t),t=rn(e=er(e));return r}function s3(n,e){const t=[];return o3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function o3(n,e,t){const r=rm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);i1(e,i=>{o3(n,i,t)})}function u1(n,e){const t=rm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,MP(e,t.length>0?t:void 0)}i1(e,r=>{u1(n,r)})}function VP(n,e){const t=oD(r3(n,e)),r=r1(n.transactionQueueTree_,e);return function n9(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{BP(n,i)}),BP(n,r),W$(r,i=>{BP(n,i)}),t}function BP(n,e){const t=rm(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(xf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?MP(e,void 0):t.length=s+1,ga(n.eventQueue_,oD(e),i);for(let l=0;l<r.length;l++)jy(r[l])}}const UP=function(n,e){const t=N9(n),r=t.namespace;return"firebase.com"===t.domain&&ac(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ac("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Pn(t.pathString)}},N9=function(n){let e="",t="",r="",i="",s="",l=!0,c="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(c=n.substring(0,y-1),n=n.substring(y+2));let D=n.indexOf("/");-1===D&&(D=n.length);let C=n.indexOf("?");-1===C&&(C=n.length),e=n.substring(0,Math.min(D,C)),D<C&&(i=function I9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,C)));const M=function S9(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,C)));y=e.indexOf(":"),y>=0?(l="https"===c||"wss"===c,p=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const F=e.indexOf(".");r=e.substring(0,F).toLowerCase(),t=e.substring(F+1),s=r}"ns"in M&&(s=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:c,pathString:i,namespace:s}};class a3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class l3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class jP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class u3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return y9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Xa("OnDisconnect.remove",this._path);const e=new P.BH;return t3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Xa("OnDisconnect.set",this._path),cc("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return t3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Xa("OnDisconnect.setWithPriority",this._path),cc("OnDisconnect.setWithPriority",e,this._path,!1),OP("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function v9(n,e,t,r,i){const s=Fr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,c)=>{"ok"===l&&qy(n.onDisconnect_,e,s),Rf(0,i,l,c)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Xa("OnDisconnect.update",this._path),q$("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function b9(n,e,t,r){if((0,P.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void Rf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ji(t,(l,c)=>{const p=Fr(c);qy(n.onDisconnect_,Tr(e,l),p)}),Rf(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return sn(this._path)?null:qk(this._path)}get ref(){return new el(this._repo,this._path)}get _queryIdentifier(){const e=f$(this._queryParams),t=Vk(e);return"{}"===t?"default":t}get _queryObject(){return f$(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof Fo))return!1;const t=this._repo===e._repo,r=Kk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function v7(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function c1(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Of(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===uc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ud)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==lc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===or){if(null!=e&&!aD(e)||null!=t&&!aD(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Xk||n.getIndex()===eP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function d1(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class el extends Fo{constructor(e,t){super(e,t,new US,!1)}get parent(){const e=QG(this._path);return null===e?null:new el(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class im{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=sm(this.ref,e);return new im(this._node.getChild(t),r,or)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new im(i,sm(this.ref,r),or)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function c3(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?sm(n._root,e):n._root}function d3(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=UP(e,n._repo.repoInfo_.nodeAdmin);K$("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ac("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),c3(n,t.path.toString())}function sm(n,e){return null===rn((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cD("child","path",t,!1)):cD("child","path",e,!1),new el(n._repo,Tr(n._path,e));var t}function HP(n,e){n=(0,P.m9)(n),Xa("set",n._path),cc("set",e,n._path,!1);const t=new P.BH;return PP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function O9(n,e){q$("update",e,n._path,!1);const t=new P.BH;return function m9(n,e,t,r){Qy(n,"update",{path:e.toString(),value:t});let i=!0;const s=dD(n),l={};if(ji(t,(c,p)=>{i=!1,l[c]=G$(Tr(e,c),Fr(p),n.serverSyncTree_,s)}),i)Ui("update() called with empty data.  Don't do anything."),Rf(0,r,"ok",void 0);else{const c=a1(n),p=function HY(n,e,t,r){!function sY(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=dP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=ar.fromObject(t);return Yy(n,new Ky({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,c);o1(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,D)=>{const C="ok"===y;C||bs("update at "+e+" failed: "+y);const M=xf(n.serverSyncTree_,c,!C),R=M.length>0?Jy(n,e):e;ga(n.eventQueue_,R,M),Rf(0,r,y,D)}),ji(t,y=>{const D=VP(n,Tr(e,y));Jy(n,D)}),ga(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function k9(n){n=(0,P.m9)(n);const e=new jP(()=>{}),t=new hD(e);return function g9(n,e,t){const r=function qY(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,D)=>{const C=Js(y,t);r=r||Af(D,C)});let i=n.syncPointTree_.get(t);i?r=r||Af(i,Nn()):(i=new R$,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new Sf(r,!0,!1):null;return function MY(n){return zS(n.viewCache_)}(O$(i,e,qS(n.pendingWriteTree_,e._path),s?l.getNode():qt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Fr(i).withIndex(e._queryParams.getIndex());let l;if(wP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=rD(n.serverSyncTree_,e._path,s);else{const c=iD(n.serverSyncTree_,e);l=V$(n.serverSyncTree_,e._path,s,c)}return ga(n.eventQueue_,e._path,l),e1(n.serverSyncTree_,e,t,null,!0),s},i=>(Qy(n,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new im(r,new el(n._repo,n._path),n._queryParams.getIndex()))}class hD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new a3("value",this,new im(e.snapshotNode,new el(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l3(this,e,t):null}matches(e){return e instanceof hD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class h1{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l3(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=sm(new el(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new a3(e.type,this,new im(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof h1&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fD(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(D,C)=>{FP(n._repo,n,c),p(D,C)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new jP(t,s||void 0),c="value"===e?new hD(l):new h1(e,l);return function w9(n,e,t){let r;r=".info"===rn(e._path)?wP(n.infoSyncTree_,e,t):wP(n.serverSyncTree_,e,t),Z$(n.eventQueue_,e._path,r)}(n._repo,n,c),()=>FP(n._repo,n,c)}function GP(n,e,t,r){return fD(n,"value",e,t,r)}function h3(n,e,t,r){return fD(n,"child_added",e,t,r)}function f3(n,e,t,r){return fD(n,"child_changed",e,t,r)}function p3(n,e,t,r){return fD(n,"child_moved",e,t,r)}function g3(n,e,t,r){return fD(n,"child_removed",e,t,r)}function m3(n,e,t){let r=null;const i=t?new jP(t):null;"value"===e?r=new hD(i):e&&(r=new h1(e,i)),FP(n._repo,n,r)}class Wl{}class _3 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("endAt",this._value,e._path,!0);const t=iP(e._queryParams,this._value,this._key);if(d1(t),Of(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class F9 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("endBefore",this._value,e._path,!1);const t=function z7(n,e,t){let r,i;return n.index_===uc?("string"==typeof e&&(e=c$(e)),i=iP(n,e,t)):(r=null==t?Ud:c$(t),i=iP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(d1(t),Of(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class y3 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("startAt",this._value,e._path,!0);const t=rP(e._queryParams,this._value,this._key);if(d1(t),Of(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class B9 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("startAfter",this._value,e._path,!1);const t=function W7(n,e,t){let r;if(n.index_===uc)"string"==typeof e&&(e=u$(e)),r=rP(n,e,t);else{let i;i=null==t?lc:u$(t),r=rP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(d1(t),Of(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class j9 extends Wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function G7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class G9 extends Wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function $7(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class W9 extends Wl{constructor(e){super(),this._path=e}_apply(e){c1(e,"orderByChild");const t=new Pn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Xk(t),i=jS(e._queryParams,r);return Of(i),new Fo(e._repo,e._path,i,!0)}}class q9 extends Wl{_apply(e){c1(e,"orderByKey");const t=jS(e._queryParams,uc);return Of(t),new Fo(e._repo,e._path,t,!0)}}class Z9 extends Wl{_apply(e){c1(e,"orderByPriority");const t=jS(e._queryParams,or);return Of(t),new Fo(e._repo,e._path,t,!0)}}class Q9 extends Wl{_apply(e){c1(e,"orderByValue");const t=jS(e._queryParams,eP);return Of(t),new Fo(e._repo,e._path,t,!0)}}class X9 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(cc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _3(this._value,this._key)._apply(new y3(this._value,this._key)._apply(e))}}function zl(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function kY(n){(0,P.hu)(!QS,"__referenceConstructor has already been defined"),QS=n})(el),function BY(n){(0,P.hu)(!XS,"__referenceConstructor has already been defined"),XS=n}(el);const $P={};function b3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ac("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=UP(s,i),c=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${c.namespace}`,l=UP(s,i),c=l.repoInfo):p=!l.repoInfo.secure;const D=i&&p?new Ww(Ww.OWNER):new KZ(n.name,n.options,e);K$("Invalid Firebase Database URL",l),sn(l.path)||ac("Database URL must point to the root of a Firebase Database (not including a child path).");const C=function iQ(n,e,t,r){let i=$P[e.name];i||(i={},$P[e.name]=i);let s=i[n.toURLString()];return s&&ac("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new h9(n,false,t,r),i[n.toURLString()]=s,s}(c,n,D,new qZ(n.name,t));return new oQ(C,n)}class oQ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function f9(n,e,t){if(n.stats_=$k(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HS(n.repoInfo_,(r,i,s,l)=>{X$(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>e3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Xg(n.repoInfo_,e,(r,i,s,l)=>{X$(n,r,i,s,l)},r=>{e3(n,r)},r=>{!function p9(n,e){ji(e,(t,r)=>{kP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function QZ(n,e){const t=n.toString();return Gk[t]||(Gk[t]=e()),Gk[t]}(n.repoInfo_,()=>new J7(n.stats_,n.server_)),n.infoData_=new q7,n.infoSyncTree_=new L$({startListening:(r,i,s,l)=>{let c=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(c=rD(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),kP(n,"connected",!1),n.serverSyncTree_=new L$({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(c,p)=>{const y=l(c,p);ga(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new el(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function rQ(n,e){const t=$P[e];(!t||t[n.key]!==n)&&ac(`Database ${e}(${n.repoInfo_}) has already been deleted.`),n3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ac("Cannot call "+e+" on a deleted database.")}}function w3(){BG.IS_TRANSPORT_INITIALIZED&&bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function aQ(){w3(),Tf.forceDisallow()}function lQ(){w3(),Hy.forceDisallow(),Tf.forceAllow()}function dQ(n,e){vG(n,e)}const fQ={".sv":"timestamp"};class mQ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Xg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function hQ(n){pG(ms.SDK_VERSION),(0,ms._registerComponent)(new qa.wA("database",(e,{instanceIdentifier:t})=>b3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(hG,fG,n),(0,ms.registerVersion)(hG,fG,"esm2017")}();const bQ=new jl.Yd("@firebase/database-compat"),E3=function(n){bQ.warn("FIREBASE WARNING: "+n)};class EQ{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,E3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class CQ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cD("DataSnapshot.child","path",e,!1),new kf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new kf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new ma(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ss{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=ss.getCancelAndContextArgs_("Query.on",r,i),c=(y,D)=>{t.call(l.context,new kf(this.database,y),D)};c.userCallback=t,c.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return GP(this._delegate,c,p),t;case"child_added":return h3(this._delegate,c,p),t;case"child_removed":return g3(this._delegate,c,p),t;case"child_changed":return f3(this._delegate,c,p),t;case"child_moved":return p3(this._delegate,c,p),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,m3(this._delegate,e,i)}else m3(this._delegate,e)}get(){return k9(this._delegate).then(e=>new kf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const s=ss.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,c=(y,D)=>{const C=new kf(this.database,y);t&&t.call(s.context,C,D),l.resolve(C)};c.userCallback=t,c.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":GP(this._delegate,c,p,{onlyOnce:!0});break;case"child_added":h3(this._delegate,c,p,{onlyOnce:!0});break;case"child_removed":g3(this._delegate,c,p,{onlyOnce:!0});break;case"child_changed":f3(this._delegate,c,p,{onlyOnce:!0});break;case"child_moved":p3(this._delegate,c,p,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ss(this.database,zl(this._delegate,function H9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new j9(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ss(this.database,zl(this._delegate,function $9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new G9(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ss(this.database,zl(this._delegate,function z9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cD("orderByChild","path",n,!1),new W9(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ss(this.database,zl(this._delegate,function K9(){return new q9}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ss(this.database,zl(this._delegate,function Y9(){return new Z9}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ss(this.database,zl(this._delegate,function J9(){return new Q9}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ss(this.database,zl(this._delegate,function V9(n=null,e){return uD("startAt","key",e,!0),new y3(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ss(this.database,zl(this._delegate,function U9(n,e){return uD("startAfter","key",e,!0),new B9(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ss(this.database,zl(this._delegate,function P9(n,e){return uD("endAt","key",e,!0),new _3(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ss(this.database,zl(this._delegate,function L9(n,e){return uD("endBefore","key",e,!0),new F9(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ss(this.database,zl(this._delegate,function eQ(n,e){return uD("equalTo","key",e,!0),new X9(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ss))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ma(this.database,new el(this._delegate._repo,this._delegate._path))}}class ma extends ss{constructor(e,t){super(e,new Fo(t._repo,t._path,new US,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ma(this.database,sm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ma(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new ma(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=HP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,E3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xa("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=O9(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function R9(n,e,t){if(Xa("setWithPriority",n._path),cc("setWithPriority",e,n._path,!1),OP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return PP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function M9(n){return Xa("remove",n._path),HP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function _Q(n,e,t){var r;if(n=(0,P.m9)(n),Xa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new P.BH,c=GP(n,()=>{});return function E9(n,e,t,r,i,s){Qy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:mG(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=LP(n,e,void 0);l.currentInputSnapshot=c;const p=l.update(c.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{lD("transaction failed: Data returned ",p,l.path),l.status=0;const y=r1(n.transactionQueueTree_,e),D=rm(y)||[];let C;D.push(l),MP(y,D),"object"==typeof p&&null!==p&&(0,P.r3)(p,".priority")?(C=(0,P.DV)(p,".priority"),(0,P.hu)(aD(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(t1(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const M=dD(n),R=Fr(p,C),F=SP(R,c,M);l.currentOutputSnapshotRaw=R,l.currentOutputSnapshotResolved=F,l.currentWriteId=a1(n);const H=bP(n.serverSyncTree_,e,F,l.currentWriteId,l.applyLocally);ga(n.eventQueue_,e,H),l1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,D)=>{let C=null;p?s.reject(p):(C=new im(D,new el(n._repo,n._path),or),s.resolve(new mQ(y,C)))},c,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new CQ(s.committed,new kf(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function x9(n,e){n=(0,P.m9)(n),Xa("setPriority",n._path),OP("setPriority",e,!1);const t=new P.BH;return PP(n._repo,Tr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function A9(n,e){n=(0,P.m9)(n),Xa("push",n._path),cc("push",e,n._path,!0);const t=J$(n._repo),r=B7(t),i=sm(n,r),s=sm(n,r);let l;return l=null!=e?HP(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ma(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new ma(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Xa("Reference.onDisconnect",this._delegate._path),new EQ(new u3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class pD{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:aQ,forceLongPolling:lQ}}useEmulator(e,t,r={}){!function D3(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ac("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ac('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ww(Ww.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);s=new Ww(l)}!function nQ(n,e,t,r){n.repoInfo_=new jk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof ma){const t=d3(this._delegate,e.toString());return new ma(this,t)}{const t=c3(this._delegate,e);return new ma(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=d3(this._delegate,e);return new ma(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function uQ(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),n3(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function cQ(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function D9(n){n.persistentConnection_&&n.persistentConnection_.resume(Q$)}(n._repo)}(this._delegate)}}pD.ServerValue={TIMESTAMP:function pQ(){return fQ}(),increment:n=>function gQ(n){return{".sv":{increment:n}}}(n)};var IQ=Object.freeze({__proto__:null,initStandalone:function TQ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){pG(t);const l=new qa.zt("auth-internal",new qa.H0("database-standalone"));return l.setComponent(new qa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new pD(b3(n,l,void 0,e,s),n),namespace:i}}});const SQ=pD.ServerValue;function C3(n){return null==n}function T3(n){return"function"==typeof n.set}function I3(n,e){return T3(e)?e:n.ref(e)}function S3(n,e){if(function AQ(n){return"string"==typeof n}(n))return e.stringCase();if(T3(n))return e.firebaseCase();if(function MQ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function gD(n,e,t="on",r=ks.z){return new rr.y(i=>{let s=null;return s=n[t](e,(l,c)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:c})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ct.U)(i=>{const{snapshot:s,prevKey:l}=i;let c=null;return s.exists()&&(c=s.key),{type:e,payload:s,prevKey:l,key:c}}),(0,Mu.B)())}function N3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function OQ(n,e){const{payload:t,prevKey:r,key:i}=e,s=N3(n,i),l=function RQ(n,e){if(C3(e))return 0;{const t=N3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let c=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:c,key:p.key};return c=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const c=n[s-1];(c&&c.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(c=>c.payload.key!==t.key);case"child_changed":return n.map(c=>c.payload.key===i?e:c);case"child_moved":if(s>-1){const c=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,c),n}return n;default:return n}}function A3(n){return(C3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function M3(n,e,t){return function xQ(n,e,t){return gD(n,"value","once",t).pipe(mn(r=>{const i=[Je(r)];return e.forEach(s=>i.push(gD(n,s,"on",t))),(0,qe.T)(...i).pipe(zu(OQ,[]))}),hs())}(n,e=A3(e),t)}function x3(n,e,t){const r=(e=A3(e)).map(i=>gD(n,i,"on",t));return(0,qe.T)(...r)}function R3(n,e){return function(r,i){return S3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function LQ(n){return function(t){return t?S3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function O3(n,e){return function(){return gD(n,"value","on",e)}}!function NQ(n){n.INTERNAL.registerComponent(new qa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new pD(i,r)},"PUBLIC").setServiceProps({Reference:ma,Query:ss,Database:pD,DataSnapshot:kf,enableLogging:dQ,INTERNAL:IQ,ServerValue:SQ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Ab.Z);const UQ=new d.OlP("angularfire2.realtimeDatabaseURL"),jQ=new d.OlP("angularfire2.database.use-emulator");let HQ=(()=>{class n{constructor(t,r,i,s,l,c,p,y,D,C,M,R,F,H,K){this.schedulers=c;const ve=p,Te=(0,ci.on)(t,l,r);y&&xk(Te,l,D,M,R,F,C,H),this.database=(0,ci.cc)(`${Te.name}.database.${i}`,"AngularFireDatabase",Te.name,()=>{const ke=l.runOutsideAngular(()=>Te.database(i||void 0));return ve&&ke.useEmulator(...ve),ke},[ve])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>I3(this.database,t));let s=i;return r&&(s=r(i)),function VQ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:R3(r,"update"),set:R3(r,"set"),push:i=>r.push(i),remove:LQ(r),snapshotChanges:i=>M3(n,i,t).pipe(Cn.iC),stateChanges:i=>x3(n,i,t).pipe(Cn.iC),auditTrail:i=>function kQ(n,e,t){return function FQ(n,e,t){return function PQ(n,e){return gD(n,"value","on",e).pipe((0,ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(fs(e),(0,ct.U)(([i,s])=>{const l=i.lastKeyToLoad,c=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:c}}),function FZ(n){return(0,Bt.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,vn.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ct.U)(i=>i.actions))}(n,x3(n,e).pipe(zu((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,s)=>M3(n,i,t).pipe((0,ct.U)(c=>c.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Cn.iC)}}(s,this)}object(t){return function BQ(n,e){return{query:n,snapshotChanges:()=>O3(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>O3(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>I3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(UQ,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cn.HU),d.LFG(jQ,8),d.LFG(Rk,8),d.LFG(Tk,8),d.LFG(Ik,8),d.LFG(Sk,8),d.LFG(Nk,8),d.LFG(Ak,8),d.LFG(Mk,8),d.LFG(Fb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GQ=(()=>{class n{constructor(){xx.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[HQ]}),n})();const k3_firebase={apiKey:"AIzaSyDo1Wgw2KHNhXNS2_S2GBrQQ8DkABXLovw",authDomain:"secretsantagenerator-eed41.firebaseapp.com",projectId:"secretsantagenerator-eed41",storageBucket:"secretsantagenerator-eed41.appspot.com",messagingSenderId:"175331469998",appId:"1:175331469998:web:479cf365b5838629269b3f",measurementId:"G-LHFDM8FQJ2"};let P3=(()=>{class n{constructor(t){this.db=t,this.dbPath="/paths",this.databaseRef=t.collection(this.dbPath)}create(t){return this.databaseRef.add({...t})}update(t,r){return this.databaseRef.doc(t).update(r)}delete(t){return this.databaseRef.doc(t).delete()}getAll(){return this.databaseRef}generateAlphabet(){let r=1==Math.floor(2*Math.random());const i=[...Array(26)].map((s,l)=>String.fromCharCode(l+(r?65:97)));return i[Math.floor(Math.random()*i.length)]}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $Q(n,e){if(1&n&&(d.TgZ(0,"ul",5)(1,"li",6),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t)}}function WQ(n,e){if(1&n&&(d.TgZ(0,"ul",5)(1,"li",7),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t)}}let zQ=(()=>{class n{constructor(t,r){this.route=t,this.databaseService=r,this.param="",this.dbEntry=""}ngOnInit(){this.param=this.route.snapshot.queryParamMap.get("key"),this.databaseService.getAll().snapshotChanges().pipe((0,ct.U)(t=>t.map(r=>({key:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.paths=t,this.dbEntry=this.paths.find(r=>r.key===this.param),console.log(this.dbEntry)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zu),d.Y36(P3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-display-saved"]],decls:12,vars:2,consts:[[1,"d-flex","flex-row","justify-content-center",2,"margin-top","2.6rem !important","min-height","67.4vh"],[1,"col-sm-2","mt-auto","mb-auto"],[1,"card","px-3","to-from-card"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"bi","bi-arrow-right","mt-auto","mb-auto","col-sm-3",2,"font-size","3rem","width","8rem","text-align","center","color","white"],[1,"list-group","list-group-flush"],[1,"list-group-item",2,"text-align","right"],[1,"list-group-item"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h6"),d._uU(3,"From"),d.qZA(),d.TgZ(4,"div",2),d.YNc(5,$Q,3,1,"ul",3),d.qZA()(),d._UZ(6,"i",4),d.TgZ(7,"div",1)(8,"h6"),d._uU(9,"To"),d.qZA(),d.TgZ(10,"div",2),d.YNc(11,WQ,3,1,"ul",3),d.qZA()()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.dbEntry.from),d.xp6(6),d.Q6J("ngForOf",r.dbEntry.to))},dependencies:[Ni]}),n})(),F3=(()=>{class n{constructor(){this.names=new nn.x}setNames(t){this.names.next(t)}getNames(){return this.names.asObservable()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qQ=(()=>{class n{constructor(t,r){this.formBuilder=t,this.FormService=r,this.namesForm=this.formBuilder.group({names:""}),this.arrayOfNames=[]}ngOnInit(){}onSubmit(){null==this.namesForm.value.names||""==this.namesForm.value.names?alert("Du skrev inte in n\xe5gra namn!"):(this.arrayOfNames=this.namesForm.value.names.split("\n"),this.FormService.setNames(this.arrayOfNames))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ha),d.Y36(F3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-form"]],decls:9,vars:1,consts:[[1,"col-sm-12",3,"formGroup","submit"],[1,"d-flex","flex-column"],["for","names"],["id","nameHelp",1,"form-text","text-muted"],["id","names","formControlName","names","placeholder","John Doe...","rows","10","required","",1,"mb-3","mt-3"],["type","submit",1,"btn","btn-outline-light"]],template:function(t,r){1&t&&(d.TgZ(0,"form",0),d.NdJ("submit",function(){return r.onSubmit()}),d.TgZ(1,"div",1)(2,"label",2),d._uU(3,"Type in names of the participants"),d.qZA(),d.TgZ(4,"small",3),d._uU(5,"Type one name on each row"),d.qZA(),d._UZ(6,"textarea",4),d.TgZ(7,"button",5),d._uU(8,"Randomize"),d.qZA()()()),2&t&&d.Q6J("formGroup",r.namesForm)},dependencies:[br,ia,Ru,dv,Xm,rd,bv]}),n})();class KQ{}class ZQ{constructor(e,t){this._document=t;const r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=e,r.readOnly=!0,this._document.body.appendChild(r)}copy(){const e=this._textarea;let t=!1;try{if(e){const r=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),r&&r.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let L3=(()=>{class n{constructor(t){this._document=t}copy(t){const r=this.beginCopy(t),i=r.copy();return r.destroy(),i}beginCopy(t){return new ZQ(t,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const YQ=new d.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let QQ=(()=>{class n{constructor(t,r,i){this._clipboard=t,this._ngZone=r,this.text="",this.attempts=1,this.copied=new d.vpe,this._pending=new Set,i&&null!=i.attempts&&(this.attempts=i.attempts)}copy(t=this.attempts){if(t>1){let r=t;const i=this._clipboard.beginCopy(this.text);this._pending.add(i);const s=()=>{const l=i.copy();l||!--r||this._destroyed?(this._currentTimeout=null,this._pending.delete(i),i.destroy(),this.copied.emit(l)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(s,1))};s()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(L3),d.Y36(d.R0b),d.Y36(YQ,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),n})(),JQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function XQ(n,e){if(1&n&&(d.TgZ(0,"ul",8)(1,"li",9),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t)}}function eJ(n,e){if(1&n&&(d.TgZ(0,"ul",8)(1,"li",10),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t)}}function tJ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11)(1,"button",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.save())}),d._uU(2,"Save this list"),d.qZA(),d.TgZ(3,"small",13),d._uU(4,"By saving the list you agree that the names of the participants will be stored in a database."),d.qZA()()}}function nJ(n,e){if(1&n&&(d.TgZ(0,"div",14),d._UZ(1,"input",15),d.TgZ(2,"button",16),d._uU(3,"Copy"),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("value",t.link),d.xp6(1),d.Q6J("cdkCopyToClipboard",t.link)}}let rJ=(()=>{class n{constructor(t,r,i){this.formService=t,this.databaseService=r,this.clipboard=i,this.from=["Santa Claus"],this.to=["Mrs Claus"],this.enabledButton=!1,this.enabledLink=!1,this.link="https://esanic.github.io/SecretSantaGenerator/saved?key=",this.set=new KQ}ngOnInit(){this.formService.getNames().subscribe(t=>{this.enabledButton=!0,this.from=[],this.to=[];let r=[...t],i=[...t];for(let s=0;s<r.length;s=0){let l=Math.floor(Math.random()*r.length),c=Math.floor(Math.random()*i.length);r[l]!=i[c]&&(this.from.push(r[l]),this.to.push(i[c]),r.splice(l,1),i.splice(c,1)),1==r.length&&1==i.length&&i[0]==r[0]&&(this.from=[],this.to=[],r=[...t],i=[...t])}})}save(){let t="";for(let r=0;r<15;r++)t+=this.databaseService.generateAlphabet();this.set.key=t,this.set.from=this.from,this.set.to=this.to,this.databaseService.create(this.set),this.enabledButton=!1,this.enabledLink=!0,this.link=this.link+this.set.key}copy(){this.clipboard.copy(this.link)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(F3),d.Y36(P3),d.Y36(L3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-display"]],decls:15,vars:4,consts:[[1,"d-flex","flex-row","justify-content-center",2,"margin-top","2.6rem !important"],[1,"col-sm-3","mt-auto","mb-auto"],[1,"card","px-3","to-from-card"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"bi","bi-arrow-right","mt-auto","mb-auto","col-sm-3",2,"font-size","3rem","width","8rem","text-align","center","color","white"],[1,"w-100","pt-5"],["class","mx-auto d-flex flex-column","style","width:fit-content",4,"ngIf"],["class","mx-auto d-flex flex-row justify-content-center","style","width:100%",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item",2,"text-align","right"],[1,"list-group-item"],[1,"mx-auto","d-flex","flex-column",2,"width","fit-content"],["type","button",1,"btn","btn-outline-light","mx-auto",3,"click"],[1,"form-text","text-muted"],[1,"mx-auto","d-flex","flex-row","justify-content-center",2,"width","100%"],["id","link","readonly","true",2,"width","73%","margin-right","1vw",3,"value"],["type","button","ngbPopover","Copied!",1,"btn","btn-outline-light",3,"cdkCopyToClipboard"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h6"),d._uU(3,"From"),d.qZA(),d.TgZ(4,"div",2),d.YNc(5,XQ,3,1,"ul",3),d.qZA()(),d._UZ(6,"i",4),d.TgZ(7,"div",1)(8,"h6"),d._uU(9,"To"),d.qZA(),d.TgZ(10,"div",2),d.YNc(11,eJ,3,1,"ul",3),d.qZA()()(),d.TgZ(12,"div",5),d.YNc(13,tJ,5,0,"div",6),d.YNc(14,nJ,4,2,"div",7),d.qZA()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.from),d.xp6(6),d.Q6J("ngForOf",r.to),d.xp6(2),d.Q6J("ngIf",1==r.enabledButton),d.xp6(1),d.Q6J("ngIf",1==r.enabledLink))},dependencies:[Ni,jn,E_,QQ]}),n})(),iJ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-start"]],decls:19,vars:0,consts:[[1,"d-flex","flex-column"],[1,"container","mt-3"],[1,"container","mt-3","px-4","d-flex","justify-content-center"],[1,"col-12","row","gx-5","d-flex","column"],[1,"col-sm-4"],[1,"col-sm-8","flex-grow-1",2,"min-height","47.6vh"],[1,"col-12"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"p"),d._uU(3,"In my and my wife's families we always randomize who is gonna buy a christmas gift to whom."),d._UZ(4,"br"),d._uU(5," Not does this only save alot of money but it also ease up on the stress that christmas is highly associated with."),d.qZA(),d.TgZ(6,"p"),d._uU(7,"Although all of the generators available online (atleast from what I've found) is way too complex, requires emails and yadayada."),d._UZ(8,"br"),d._uU(9," So therefore I decided to make this simple generator."),d.qZA(),d.TgZ(10,"p"),d._uU(11,'Simply type in the names of the participants to the left, press the "randomize"-button and it\'s all done!'),d.qZA(),d._UZ(12,"hr"),d.qZA(),d.TgZ(13,"div",2)(14,"div",3)(15,"div",4),d._UZ(16,"app-form"),d.qZA(),d.TgZ(17,"div",5),d._UZ(18,"app-display",6),d.qZA()()()())},dependencies:[qQ,rJ]}),n})();class V3{}const Hd="*";function B3(n,e=null){return{type:2,steps:n,options:e}}function U3(n){return{type:6,styles:n,offset:null}}function j3(n){Promise.resolve().then(n)}class mD{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){j3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class H3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?j3(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,c)=>Math.max(l,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function G3(n){return new d.vHH(3e3,!1)}function UJ(){return typeof window<"u"&&typeof window.document<"u"}function zP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Pf(n){switch(n.length){case 0:return new mD;case 1:return n[0];default:return new H3(n)}}function $3(n,e,t,r,i=new Map,s=new Map){const l=[],c=[];let p=-1,y=null;if(r.forEach(D=>{const C=D.get("offset"),M=C==p,R=M&&y||new Map;D.forEach((F,H)=>{let K=H,ve=F;if("offset"!==H)switch(K=e.normalizePropertyName(K,l),ve){case"!":ve=i.get(H);break;case Hd:ve=s.get(H);break;default:ve=e.normalizeStyleValue(H,K,ve,l)}R.set(K,ve)}),M||c.push(R),y=R,p=C}),l.length)throw function NJ(n){return new d.vHH(3502,!1)}();return c}function qP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&KP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&KP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&KP(t,"destroy",n)))}}function KP(n,e,t){const s=ZP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function ZP(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function _a(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function W3(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let YP=(n,e)=>!1,z3=(n,e,t)=>[],q3=null;function QP(n){const e=n.parentNode||n.host;return e===q3?null:e}(zP()||typeof Element<"u")&&(UJ()?(q3=(()=>document.documentElement)(),YP=(n,e)=>{for(;e;){if(e===n)return!0;e=QP(e)}return!1}):YP=(n,e)=>n.contains(e),z3=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let om=null,K3=!1;const Z3=YP,Y3=z3;let Q3=(()=>{class n{validateStyleProperty(t){return function HJ(n){om||(om=function GJ(){return typeof document<"u"?document.body:null}()||{},K3=!!om.style&&"WebkitAppearance"in om.style);let e=!0;return om.style&&!function jJ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in om.style,!e&&K3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in om.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Z3(t,r)}getParentElement(t){return QP(t)}query(t,r,i){return Y3(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,c=[],p){return new mD(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),JP=(()=>{class n{}return n.NOOP=new Q3,n})();const XP="ng-enter",f1="ng-leave",p1="ng-trigger",g1=".ng-trigger",X3="ng-animating",eF=".ng-animating";function Gd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tF(parseFloat(e[1]),e[2])}function tF(n,e){return"s"===e?1e3*n:n}function m1(n,e,t){return n.hasOwnProperty("duration")?n:function zJ(n,e,t){let i,s=0,l="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(G3()),{duration:0,delay:0,easing:""};i=tF(parseFloat(c[1]),c[2]);const p=c[3];null!=p&&(s=tF(parseFloat(p),c[4]));const y=c[5];y&&(l=y)}else i=n;if(!t){let c=!1,p=e.length;i<0&&(e.push(function oJ(){return new d.vHH(3100,!1)}()),c=!0),s<0&&(e.push(function aJ(){return new d.vHH(3101,!1)}()),c=!0),c&&e.splice(p,0,G3())}return{duration:i,delay:s,easing:l}}(n,e,t)}function _D(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function eW(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ff(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function nW(n,e,t){return t?e+":"+t+";":""}function rW(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=nW(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=nW(0,YJ(t),n.style[t]));n.setAttribute("style",e)}function dc(n,e,t){n.style&&(e.forEach((r,i)=>{const s=rF(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),zP()&&rW(n))}function am(n,e){n.style&&(e.forEach((t,r)=>{const i=rF(r);n.style[i]=""}),zP()&&rW(n))}function yD(n){return Array.isArray(n)?1==n.length?n[0]:B3(n):n}const nF=new RegExp("{{\\s*(.+?)\\s*}}","g");function iW(n){let e=[];if("string"==typeof n){let t;for(;t=nF.exec(n);)e.push(t[1]);nF.lastIndex=0}return e}function vD(n,e,t){const r=n.toString(),i=r.replace(nF,(s,l)=>{let c=e[l];return null==c&&(t.push(function uJ(n){return new d.vHH(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function _1(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const ZJ=/-+([a-z0-9])/g;function rF(n){return n.replace(ZJ,(...e)=>e[1].toUpperCase())}function YJ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ya(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function cJ(n){return new d.vHH(3004,!1)}()}}function sW(n,e){return window.getComputedStyle(n)[e]}function nX(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function rX(n,e,t){if(":"==n[0]){const p=function iX(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function CJ(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function EJ(n){return new d.vHH(3015,!1)}()),e;const i=r[1],s=r[2],l=r[3];e.push(oW(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(oW(l,i))}(r,t,e)):t.push(n),t}const w1=new Set(["true","1"]),D1=new Set(["false","0"]);function oW(n,e){const t=w1.has(n)||D1.has(n),r=w1.has(e)||D1.has(e);return(i,s)=>{let l="*"==n||n==i,c="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?w1.has(n):D1.has(n)),!c&&r&&"boolean"==typeof s&&(c=s?w1.has(e):D1.has(e)),l&&c}}const sX=new RegExp("s*:selfs*,?","g");function iF(n,e,t,r){return new oX(n).build(e,t,r)}class oX{constructor(e){this._driver=e}build(e,t,r){const i=new uX(t);return this._resetContextStyleTimingState(i),ya(this,yD(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function hJ(){return new d.vHH(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const p=c,y=p.name;y.toString().split(/\s*,\s*/).forEach(D=>{p.name=D,s.push(this.visitState(p,t))}),p.name=y}else if(1==c.type){const p=this.visitTransition(c,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function fJ(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(p=>{iW(p).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(_1(s.values()),t.errors.push(function pJ(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ya(this,yD(e.animation),t);return{type:1,matchers:nX(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:lm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ya(this,r,t)),options:lm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const c=ya(this,l,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:s,options:lm(e.options)}}visitAnimate(e,t){const r=function dX(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return sF(m1(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sF(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=m1(t,e);return sF(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:U3({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,c=!1;if(!l){c=!0;const y={};r.easing&&(y.easing=r.easing),l=U3(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=c,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===Hd?r.push(c):t.errors.push(new d.vHH(3002,!1)):r.push(eW(c));let s=!1,l=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(l=c.get("easing"),c.delete("easing")),!s))for(let p of c.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((c,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),D=y.get(p);let C=!0;D&&(s!=i&&s>=D.startTime&&i<=D.endTime&&(t.errors.push(function mJ(n,e,t,r,i){return new d.vHH(3010,!1)}()),C=!1),s=D.startTime),C&&y.set(p,{startTime:s,endTime:i}),t.options&&function KJ(n,e,t){const r=e.params||{},i=iW(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function lJ(n){return new d.vHH(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function _J(){return new d.vHH(3011,!1)}()),r;let s=0;const l=[];let c=!1,p=!1,y=0;const D=e.steps.map(ve=>{const Te=this._makeStyleAst(ve,t);let ke=null!=Te.offset?Te.offset:function cX(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Te.styles),Ne=0;return null!=ke&&(s++,Ne=Te.offset=ke),p=p||Ne<0||Ne>1,c=c||Ne<y,y=Ne,l.push(Ne),Te});p&&t.errors.push(function yJ(){return new d.vHH(3012,!1)}()),c&&t.errors.push(function vJ(){return new d.vHH(3200,!1)}());const C=e.steps.length;let M=0;s>0&&s<C?t.errors.push(function bJ(){return new d.vHH(3202,!1)}()):0==s&&(M=1/(C-1));const R=C-1,F=t.currentTime,H=t.currentAnimateTimings,K=H.duration;return D.forEach((ve,Te)=>{const ke=M>0?Te==R?1:M*Te:l[Te],Ne=ke*K;t.currentTime=F+H.delay+Ne,H.duration=Ne,this._validateStyleAst(ve,t),ve.offset=ke,r.styles.push(ve)}),r}visitReference(e,t){return{type:8,animation:ya(this,yD(e.animation),t),options:lm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:lm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:lm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function aX(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(sX,"")),n=n.replace(/@\*/g,g1).replace(/@\w+/g,t=>g1+"-"+t.slice(1)).replace(/:animating/g,eF),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,_a(t.collectedStyles,t.currentQuerySelector,new Map);const c=ya(this,yD(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:c,originalSelector:e.selector,options:lm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wJ(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:m1(e.timings,t.errors,!0);return{type:12,animation:ya(this,yD(e.animation),t),timings:r,options:null}}}class uX{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function lm(n){return n?(n=_D(n)).params&&(n.params=function lX(n){return n?_D(n):null}(n.params)):n={},n}function sF(n,e,t){return{duration:n,delay:e,easing:t}}function oF(n,e,t,r,i,s,l=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:c}}class E1{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const pX=new RegExp(":enter","g"),mX=new RegExp(":leave","g");function aF(n,e,t,r,i,s=new Map,l=new Map,c,p,y=[]){return(new _X).buildKeyframes(n,e,t,r,i,s,l,c,p,y)}class _X{buildKeyframes(e,t,r,i,s,l,c,p,y,D=[]){y=y||new E1;const C=new lF(e,t,y,i,s,D,[]);C.options=p;const M=p.delay?Gd(p.delay):0;C.currentTimeline.delayNextStep(M),C.currentTimeline.setStyles([l],null,C.errors,p),ya(this,r,C);const R=C.timelines.filter(F=>F.containsAnimation());if(R.length&&c.size){let F;for(let H=R.length-1;H>=0;H--){const K=R[H];if(K.element===t){F=K;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([c],null,C.errors,p)}return R.length?R.map(F=>F.buildKeyframes()):[oF(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const l="number"==typeof s?s:Gd(vD(s,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?Gd(r.duration):null,c=null!=r.delay?Gd(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,c);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ya(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=C1);const l=Gd(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ya(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Gd(e.options.delay):0;e.steps.forEach(l=>{const c=t.createSubContext(e.options);s&&c.delayNextStep(s),ya(this,l,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return m1(t.params?vD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(p=>{c.forwardTime((p.offset||0)*s),c.setStyles(p.styles,p.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Gd(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=C1);let l=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let p=null;c.forEach((y,D)=>{t.currentQueryIndex=D;const C=t.createSubContext(e.options,y);s&&C.delayNextStep(s),y===t.element&&(p=C.currentTimeline),ya(this,e.animation,C),C.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,C.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),c=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=c-p;break;case"full":p=r.currentStaggerTime}const D=t.currentTimeline;p&&D.delayNextStep(p);const C=D.currentTime;ya(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-C+(i.startTime-r.currentTimeline.startTime)}}const C1={};class lF{constructor(e,t,r,i,s,l,c,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=C1,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new T1(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Gd(r.duration)),null!=r.delay&&(i.delay=Gd(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(c=>{(!t||!l.hasOwnProperty(c))&&(l[c]=vD(s[c],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new lF(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=C1,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new yX(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(pX,"."+this._enterClassName)).replace(mX,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),c.push(...y)}return!s&&0==c.length&&l.push(function DJ(n){return new d.vHH(3014,!1)}()),c}}class T1{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new T1(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Hd),this._currentKeyframe.set(t,Hd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},l=function vX(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Hd)}else Ff(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,p]of l){const y=vD(p,s,r);this._pendingStyles.set(c,y),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??Hd),this._updateStyle(c,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,p)=>{const y=Ff(c,new Map,this._backFill);y.forEach((D,C)=>{"!"===D?e.add(C):D===Hd&&t.add(C)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?_1(e.values()):[],l=t.size?_1(t.values()):[];if(r){const c=i[0],p=new Map(c);c.set("offset",0),p.set("offset",1),i=[c,p]}return oF(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class yX extends T1{constructor(e,t,r,i,s,l,c=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,c=t/l,p=Ff(e[0]);p.set("offset",0),s.push(p);const y=Ff(e[0]);y.set("offset",uW(c)),s.push(y);const D=e.length-1;for(let C=1;C<=D;C++){let M=Ff(e[C]);const R=M.get("offset");M.set("offset",uW((t+R*r)/l)),s.push(M)}r=l,t=0,i="",e=s}return oF(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function uW(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uF{}const bX=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wX extends uF{normalizePropertyName(e,t){return rF(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(bX.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function dJ(n,e){return new d.vHH(3005,!1)}())}return l+s}}function cW(n,e,t,r,i,s,l,c,p,y,D,C,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:c,queriedElements:p,preStyleProps:y,postStyleProps:D,totalTime:C,errors:M}}const cF={};class dW{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function DX(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,l,c,p,y,D){const C=[],M=this.ast.options&&this.ast.options.params||cF,F=this.buildStyles(r,c&&c.params||cF,C),H=p&&p.params||cF,K=this.buildStyles(i,H,C),ve=new Set,Te=new Map,ke=new Map,Ne="void"===i,je={params:EX(H,M),delay:this.ast.options?.delay},We=D?[]:aF(e,t,this.ast.animation,s,l,F,K,je,y,C);let ht=0;if(We.forEach(In=>{ht=Math.max(In.duration+In.delay,ht)}),C.length)return cW(t,this._triggerName,r,i,Ne,F,K,[],[],Te,ke,ht,C);We.forEach(In=>{const Un=In.element,Ir=_a(Te,Un,new Set);In.preStyleProps.forEach(Lr=>Ir.add(Lr));const os=_a(ke,Un,new Set);In.postStyleProps.forEach(Lr=>os.add(Lr)),Un!==t&&ve.add(Un)});const Lt=_1(ve.values());return cW(t,this._triggerName,r,i,Ne,F,K,We,Lt,Te,ke,ht)}}function EX(n,e){const t=_D(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class CX{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=_D(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(i[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,c)=>{l&&(l=vD(l,i,t));const p=this.normalizer.normalizePropertyName(c,t);l=this.normalizer.normalizeStyleValue(c,p,l,t),r.set(p,l)})}),r}}class IX{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new CX(i.style,i.options&&i.options.params||{},r))}),hW(this.states,"true","1"),hW(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new dW(e,i,this.states))}),this.fallbackTransition=function SX(n,e,t){return new dW(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function hW(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const NX=new E1;class AX{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=iF(this._driver,t,r,[]);if(r.length)throw function AJ(n){return new d.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=$3(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let l;const c=new Map;if(s?(l=aF(this._driver,t,s,XP,f1,new Map,new Map,r,NX,i),l.forEach(D=>{const C=_a(c,D.element,new Map);D.postStyleProps.forEach(M=>C.set(M,null))})):(i.push(function MJ(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function xJ(n){return new d.vHH(3504,!1)}();c.forEach((D,C)=>{D.forEach((M,R)=>{D.set(R,this._driver.computeStyle(C,R,Hd))})});const y=Pf(l.map(D=>{const C=c.get(D.element);return this._buildPlayer(D,new Map,C)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function RJ(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=ZP(t,"","","");return qP(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const fW="ng-animate-queued",dF="ng-animate-disabled",kX=[],pW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tl="__ng_removed";class hF{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function BX(n){return n??null}(r?e.value:e),r){const s=_D(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const bD="void",fF=new hF(bD);class FX{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,nl(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function OJ(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function kJ(n){return new d.vHH(3303,!1)}();if(!function UX(n){return"start"==n||"done"==n}(r))throw function PJ(n,e){return new d.vHH(3400,!1)}();const s=_a(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const c=_a(this._engine.statesByElement,e,new Map);return c.has(t)||(nl(e,p1),nl(e,p1+"-"+t),c.set(t,fF)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function FJ(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new pF(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(nl(e,p1),nl(e,p1+"-"+t),this._engine.statesByElement.set(e,c=new Map));let p=c.get(t);const y=new hF(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),c.set(t,y),p||(p=fF),y.value!==bD&&p.value===y.value){if(!function GX(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const H=[],K=s.matchStyles(p.value,p.params,H),ve=s.matchStyles(y.value,y.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{am(e,K),dc(e,ve)})}return}const M=_a(this._engine.playersByElement,e,[]);M.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let R=s.matchTransition(p.value,y.value,e,y.params),F=!1;if(!R){if(!i)return;R=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:p,toState:y,player:l,isFallbackTransition:F}),F||(nl(e,fW),l.onStart(()=>{Xy(e,fW)})),l.onDone(()=>{let H=this.players.indexOf(l);H>=0&&this.players.splice(H,1);const K=this._engine.playersByElement.get(e);if(K){let ve=K.indexOf(l);ve>=0&&K.splice(ve,1)}}),this.players.push(l),M.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,g1,!0);r.forEach(i=>{if(i[tl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const c=[];if(s.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const D=this.trigger(e,y,bD,i);D&&c.push(D)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Pf(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers.get(l).fallbackTransition,y=r.get(l)||fF,D=new hF(bD),C=new pF(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:D,player:C,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[tl];(!s||s===pW)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){nl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(c=>{if(c.name==r.triggerName){const p=ZP(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,qP(r.player,c.phase,p,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class LX{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new FX(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,c=this.driver.getParentElement(t);for(;c;){const p=i.get(c);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),l=!0;break}c=this.driver.getParentElement(c)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(I1(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!I1(t))return;const s=t[tl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),nl(e,dF)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xy(e,dF))}removeNode(e,t,r,i){if(I1(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[tl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return I1(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,g1,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eF,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Pf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[tl];if(t&&t.setForRemoval){if(e[tl]=pW,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dF)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)nl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Pf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function LJ(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new E1,i=[],s=new Map,l=[],c=new Map,p=new Map,y=new Map,D=new Set;this.disabledNodes.forEach(it=>{D.add(it);const pt=this.driver.query(it,".ng-animate-queued",!0);for(let At=0;At<pt.length;At++)D.add(pt[At])});const C=this.bodyNode,M=Array.from(this.statesByElement.keys()),R=_W(M,this.collectedEnterElements),F=new Map;let H=0;R.forEach((it,pt)=>{const At=XP+H++;F.set(pt,At),it.forEach(Qt=>nl(Qt,At))});const K=[],ve=new Set,Te=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const pt=this.collectedLeaveElements[it],At=pt[tl];At&&At.setForRemoval&&(K.push(pt),ve.add(pt),At.hasAnimation?this.driver.query(pt,".ng-star-inserted",!0).forEach(Qt=>ve.add(Qt)):Te.add(pt))}const ke=new Map,Ne=_W(M,Array.from(ve));Ne.forEach((it,pt)=>{const At=f1+H++;ke.set(pt,At),it.forEach(Qt=>nl(Qt,At))}),e.push(()=>{R.forEach((it,pt)=>{const At=F.get(pt);it.forEach(Qt=>Xy(Qt,At))}),Ne.forEach((it,pt)=>{const At=ke.get(pt);it.forEach(Qt=>Xy(Qt,At))}),K.forEach(it=>{this.processLeaveNode(it)})});const je=[],We=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(At=>{const Qt=At.player,Vr=At.element;if(je.push(Qt),this.collectedEnterElements.length){const Yr=Vr[tl];if(Yr&&Yr.setForMove){if(Yr.previousTriggersValues&&Yr.previousTriggersValues.has(At.triggerName)){const Xs=Yr.previousTriggersValues.get(At.triggerName),ws=this.statesByElement.get(At.element);if(ws&&ws.has(At.triggerName)){const ev=ws.get(At.triggerName);ev.value=Xs,ws.set(At.triggerName,ev)}}return void Qt.destroy()}}const Lo=!C||!this.driver.containsElement(C,Vr),Ti=ke.get(Vr),va=F.get(Vr),Fn=this._buildInstruction(At,r,va,Ti,Lo);if(Fn.errors&&Fn.errors.length)return void We.push(Fn);if(Lo)return Qt.onStart(()=>am(Vr,Fn.fromStyles)),Qt.onDestroy(()=>dc(Vr,Fn.toStyles)),void i.push(Qt);if(At.isFallbackTransition)return Qt.onStart(()=>am(Vr,Fn.fromStyles)),Qt.onDestroy(()=>dc(Vr,Fn.toStyles)),void i.push(Qt);const ql=[];Fn.timelines.forEach(Yr=>{Yr.stretchStartingKeyframe=!0,this.disabledNodes.has(Yr.element)||ql.push(Yr)}),Fn.timelines=ql,r.append(Vr,Fn.timelines),l.push({instruction:Fn,player:Qt,element:Vr}),Fn.queriedElements.forEach(Yr=>_a(c,Yr,[]).push(Qt)),Fn.preStyleProps.forEach((Yr,Xs)=>{if(Yr.size){let ws=p.get(Xs);ws||p.set(Xs,ws=new Set),Yr.forEach((ev,cm)=>ws.add(cm))}}),Fn.postStyleProps.forEach((Yr,Xs)=>{let ws=y.get(Xs);ws||y.set(Xs,ws=new Set),Yr.forEach((ev,cm)=>ws.add(cm))})});if(We.length){const it=[];We.forEach(pt=>{it.push(function VJ(n,e){return new d.vHH(3505,!1)}())}),je.forEach(pt=>pt.destroy()),this.reportError(it)}const ht=new Map,Lt=new Map;l.forEach(it=>{const pt=it.element;r.has(pt)&&(Lt.set(pt,pt),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,ht))}),i.forEach(it=>{const pt=it.element;this._getPreviousPlayers(pt,!1,it.namespaceId,it.triggerName,null).forEach(Qt=>{_a(ht,pt,[]).push(Qt),Qt.destroy()})});const In=K.filter(it=>vW(it,p,y)),Un=new Map;mW(Un,this.driver,Te,y,Hd).forEach(it=>{vW(it,p,y)&&In.push(it)});const os=new Map;R.forEach((it,pt)=>{mW(os,this.driver,new Set(it),p,"!")}),In.forEach(it=>{const pt=Un.get(it),At=os.get(it);Un.set(it,new Map([...Array.from(pt?.entries()??[]),...Array.from(At?.entries()??[])]))});const Lr=[],hc=[],fc={};l.forEach(it=>{const{element:pt,player:At,instruction:Qt}=it;if(r.has(pt)){if(D.has(pt))return At.onDestroy(()=>dc(pt,Qt.toStyles)),At.disabled=!0,At.overrideTotalTime(Qt.totalTime),void i.push(At);let Vr=fc;if(Lt.size>1){let Ti=pt;const va=[];for(;Ti=Ti.parentNode;){const Fn=Lt.get(Ti);if(Fn){Vr=Fn;break}va.push(Ti)}va.forEach(Fn=>Lt.set(Fn,Vr))}const Lo=this._buildAnimation(At.namespaceId,Qt,ht,s,os,Un);if(At.setRealPlayer(Lo),Vr===fc)Lr.push(At);else{const Ti=this.playersByElement.get(Vr);Ti&&Ti.length&&(At.parentPlayer=Pf(Ti)),i.push(At)}}else am(pt,Qt.fromStyles),At.onDestroy(()=>dc(pt,Qt.toStyles)),hc.push(At),D.has(pt)&&i.push(At)}),hc.forEach(it=>{const pt=s.get(it.element);if(pt&&pt.length){const At=Pf(pt);it.setRealPlayer(At)}}),i.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<K.length;it++){const pt=K[it],At=pt[tl];if(Xy(pt,f1),At&&At.hasAnimation)continue;let Qt=[];if(c.size){let Lo=c.get(pt);Lo&&Lo.length&&Qt.push(...Lo);let Ti=this.driver.query(pt,eF,!0);for(let va=0;va<Ti.length;va++){let Fn=c.get(Ti[va]);Fn&&Fn.length&&Qt.push(...Fn)}}const Vr=Qt.filter(Lo=>!Lo.destroyed);Vr.length?jX(this,pt,Vr):this.processLeaveNode(pt)}return K.length=0,Lr.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const pt=this.players.indexOf(it);this.players.splice(pt,1)}),it.play()}),Lr}elementContainsData(e,t){let r=!1;const i=t[tl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(l=c)}else{const c=this.playersByElement.get(e);if(c){const p=!s||s==bD;c.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,D=y!==s,C=_a(r,y,[]);this._getPreviousPlayers(y,D,l,c,t.toState).forEach(R=>{const F=R.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),R.destroy(),C.push(R)})}am(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const c=t.triggerName,p=t.element,y=[],D=new Set,C=new Set,M=t.timelines.map(F=>{const H=F.element;D.add(H);const K=H[tl];if(K&&K.removedBeforeQueried)return new mD(F.duration,F.delay);const ve=H!==p,Te=function HX(n){const e=[];return yW(n,e),e}((r.get(H)||kX).map(ht=>ht.getRealPlayer())).filter(ht=>!!ht.element&&ht.element===H),ke=s.get(H),Ne=l.get(H),je=$3(0,this._normalizer,0,F.keyframes,ke,Ne),We=this._buildPlayer(F,je,Te);if(F.subTimeline&&i&&C.add(H),ve){const ht=new pF(e,c,H);ht.setRealPlayer(We),y.push(ht)}return We});y.forEach(F=>{_a(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function VX(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,F.element,F))}),D.forEach(F=>nl(F,X3));const R=Pf(M);return R.onDestroy(()=>{D.forEach(F=>Xy(F,X3)),dc(p,t.toStyles)}),C.forEach(F=>{_a(i,F,[]).push(R)}),R}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new mD(e.duration,e.delay)}}class pF{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new mD,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>qP(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_a(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function I1(n){return n&&1===n.nodeType}function gW(n,e){const t=n.style.display;return n.style.display=e??"none",t}function mW(n,e,t,r,i){const s=[];t.forEach(p=>s.push(gW(p)));const l=[];r.forEach((p,y)=>{const D=new Map;p.forEach(C=>{const M=e.computeStyle(y,C,i);D.set(C,M),(!M||0==M.length)&&(y[tl]=PX,l.push(y))}),n.set(y,D)});let c=0;return t.forEach(p=>gW(p,s[c++])),l}function _W(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(c){if(!c)return 1;let p=s.get(c);if(p)return p;const y=c.parentNode;return p=t.has(y)?y:i.has(y)?1:l(y),s.set(c,p),p}return e.forEach(c=>{const p=l(c);1!==p&&t.get(p).push(c)}),t}function nl(n,e){n.classList?.add(e)}function Xy(n,e){n.classList?.remove(e)}function jX(n,e,t){Pf(t).onDone(()=>n.processLeaveNode(e))}function yW(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof H3?yW(r.players,e):e.push(r)}}function vW(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class S1{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new LX(e,t,r),this._timelineEngine=new AX(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let c=this._triggerCache[l];if(!c){const p=[],D=iF(this._driver,s,p,[]);if(p.length)throw function SJ(n,e){return new d.vHH(3404,!1)}();c=function TX(n,e,t){return new IX(n,e,t)}(i,D,this._normalizer),this._triggerCache[l]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=W3(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,c]=W3(r);return this._timelineEngine.listen(l,t,c,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let WX=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&dc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dc(this._element,this._initialStyles),this._endStyles&&(dc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(am(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(am(this._element,this._endStyles),this._endStyles=null),dc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gF(n){let e=null;return n.forEach((t,r)=>{(function zX(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class bW{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:sW(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class qX{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Z3(e,t)}getParentElement(e){return QP(e)}query(e,t,r){return Y3(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,D=l.filter(R=>R instanceof bW);(function QJ(n,e){return 0===n||0===e})(r,i)&&D.forEach(R=>{R.currentSnapshot.forEach((F,H)=>y.set(H,F))});let C=function qJ(n){return n.length?n[0]instanceof Map?n:n.map(e=>eW(e)):[]}(t).map(R=>Ff(R));C=function JJ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,l)=>{r.has(l)||i.push(l),r.set(l,s)}),i.length)for(let s=1;s<e.length;s++){let l=e[s];i.forEach(c=>l.set(c,sW(n,c)))}}return e}(e,C,y);const M=function $X(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=gF(e[0]),e.length>1&&(r=gF(e[e.length-1]))):e instanceof Map&&(t=gF(e)),t||r?new WX(n,t,r):null}(e,C);return new bW(e,C,p,M)}}let KX=(()=>{class n extends V3{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?B3(t):t;return wW(this._renderer,null,r,"register",[i]),new ZX(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ZX extends class sJ{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new YX(this._id,e,t||{},this._renderer)}}class YX{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return wW(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function wW(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const DW="@.disabled";let QX=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const c=l?.parentNode(s);c&&l.removeChild(c,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let D=this._rendererCache.get(s);return D||(D=new EW("",s,this.engine),this._rendererCache.set(s,D)),D}const l=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const p=D=>{Array.isArray(D)?D.forEach(p):this.engine.registerTrigger(l,c,t,D.name,D)};return r.data.animation.forEach(p),new JX(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,c]=s;l(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(S1),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class EW{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==DW?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class JX extends EW{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==DW?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function XX(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function eee(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}let tee=(()=>{class n extends S1{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(JP),d.LFG(uF),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const CW=[{provide:V3,useClass:KX},{provide:uF,useFactory:function nee(){return new wX}},{provide:S1,useClass:tee},{provide:d.FYo,useFactory:function ree(n,e,t){return new QX(n,e,t)},deps:[Ko,S1,d.R0b]}],mF=[{provide:JP,useFactory:()=>new qX},{provide:d.QbO,useValue:"BrowserAnimations"},...CW],TW=[{provide:JP,useClass:Q3},{provide:d.QbO,useValue:"NoopAnimations"},...CW];let iee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?TW:mF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:mF,imports:[Eu]}),n})();const see=[{path:"",component:iJ},{path:"saved",component:zQ}];let oee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[tx]}),n.\u0275inj=d.cJS({providers:[{provide:ye,useClass:dt}],imports:[Eu,QT.forRoot(see),O0,VD,ci.hO.initializeApp(k3_firebase,"SecretSantaGenerator"),PZ,p6,GQ,iee,JQ]}),n})();(0,d.G48)(),Du().bootstrapModule(oee).catch(n=>console.error(n))},5867:(gt,Ae,V)=>{V.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=V(9681);(0,d.registerVersion)("firebase","9.13.0","app")},127:(gt,Ae,V)=>{V.d(Ae,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(gt,Ae,V)=>{V.r(Ae);var d=V(5861),te=V(3942),L=V(2090),ae=V(9681),se=V(1877),he=V(655),ue=V(4859);const Ce=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new se.Yd("@firebase/auth");function dt(v,...g){ot.logLevel<=se.in.ERROR&&ot.error(`Auth (${ae.SDK_VERSION}): ${v}`,...g)}function Re(v,...g){throw Ke(v,...g)}function we(v,...g){return Ke(v,...g)}function Ie(v,g,_){const w=Object.assign(Object.assign({},ut()),{[g]:_});return new L.LL("auth","Firebase",w).create(g,{appName:v.name})}function ze(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Re(v,"argument-error"),Ie(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(v,...g){if("string"!=typeof v){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ye.create(v,...g)}function G(v,g,..._){if(!v)throw Ke(g,..._)}function _e(v){const g="INTERNAL ASSERTION FAILED: "+v;throw dt(g),new Error(g)}function Y(v,g){v||_e(g)}const ne=new Map;function oe(v){Y(v instanceof Function,"Expected a class definition");let g=ne.get(v);return g?(Y(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,ne.set(v,g),g)}function Ve(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function vt(){return"http:"===cn()||"https:"===cn()}function cn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class _n{constructor(g,_){this.shortDelay=g,this.longDelay=_,Y(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(v,g){Y(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class on{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qr=new _n(3e4,6e4);function Vt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function yn(v,g,_,w){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(v,g,_,w,A={}){return Hi(v,A,(0,d.Z)(function*(){let k={},Z={};w&&("GET"===g?Z=w:k={body:JSON.stringify(w)});const de=(0,L.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),on.fetch()(Gi(v,v.config.apiHost,_,de),Object.assign({method:g,headers:He,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Hi(v,g,_){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(v,g,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},dn),g);try{const A=new hi(v),k=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const Z=yield k.json();if("needConfirmation"in Z)throw Ii(v,"account-exists-with-different-credential",Z);if(k.ok&&!("errorMessage"in Z))return Z;{const de=k.ok?Z.errorMessage:Z.error.message,[He,st]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw Ii(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===He)throw Ii(v,"email-already-in-use",Z);if("USER_DISABLED"===He)throw Ii(v,"user-disabled",Z);const Ct=w[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Ie(v,Ct,st);Re(v,Ct)}}catch(A){if(A instanceof L.ZR)throw A;Re(v,"network-request-failed")}})).apply(this,arguments)}function Xr(v,g,_,w){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(v,g,_,w,A={}){const k=yield yn(v,g,_,w,A);return"mfaPendingCredential"in k&&Re(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Gi(v,g,_,w){const A=`${g}${_}?${w}`;return v.config.emulator?xn(v.config,A):`${v.config.apiScheme}://${A}`}class hi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(we(this.auth,"network-request-failed")),Qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ii(v,g,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const A=we(v,g,w);return A.customData._tokenResponse=_,A}function rt(){return(rt=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Wr(v,g){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pr(v,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function as(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function An(){return(An=(0,d.Z)(function*(v,g=!1){const _=(0,L.m9)(v),w=yield _.getIdToken(g),A=mt(w);G(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,Z=k?.sign_in_provider;return{claims:A,token:w,authTime:as(Dt(A.auth_time)),issuedAtTime:as(Dt(A.iat)),expirationTime:as(Dt(A.exp)),signInProvider:Z||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Dt(v){return 1e3*Number(v)}function mt(v){var g;const[_,w,A]=v.split(".");if(void 0===_||void 0===w||void 0===A)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,L.tV)(w);return k?JSON.parse(k):(dt("Failed to decode base64 JWT payload"),null)}catch(k){return dt("Caught error parsing JWT payload as JSON",null===(g=k)||void 0===g?void 0:g.toString()),null}}function Sr(v,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof L.ZR&&fi(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function fi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class xt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,d.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Es{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=as(this.lastLoginAt),this.creationTime=as(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hn(v){return $i.apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(v){var g;const _=v.auth,w=yield v.getIdToken(),A=yield Sr(v,pr(_,{idToken:w}));G(A?.users.length,_,"internal-error");const k=A.users[0];v._notifyReloadListener(k);const Z=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?lt(k.providerUserInfo):[],de=ei(v.providerData,Z),Ct=!!v.isAnonymous&&!(v.email&&k.passwordHash||de?.length),bt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:de,metadata:new Es(k.createdAt,k.lastLoginAt),isAnonymous:Ct};Object.assign(v,bt)})).apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(v){const g=(0,L.m9)(v);yield hn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ei(v,g){return[...v.filter(w=>!g.some(A=>A.providerId===w.providerId)),...g]}function lt(v){return v.map(g=>{var{providerId:_}=g,w=(0,he._T)(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function at(){return(at=(0,d.Z)(function*(v,g){const _=yield Hi(v,{},(0,d.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:k}=v.config,Z=Gi(v,A,"/v1/token",`key=${k}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(Z,{method:"POST",headers:de,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function gn(v){const g=mt(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,d.Z)(function*(){return G(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:Z}=yield function Me(v,g){return at.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(A,k,Number(Z))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:A,expirationTime:k}=_,Z=new Nt;return w&&(G("string"==typeof w,"internal-error",{appName:g}),Z.refreshToken=w),A&&(G("string"==typeof A,"internal-error",{appName:g}),Z.accessToken=A),k&&(G("number"==typeof k,"internal-error",{appName:g}),Z.expirationTime=k),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return _e("not implemented")}}function It(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class Ut{constructor(g){var{uid:_,auth:w,stsTokenManager:A}=g,k=(0,he._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Es(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const w=yield Sr(_,_.stsTokenManager.getToken(_.auth,g));return G(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function lr(v){return An.apply(this,arguments)}(this,g)}reload(){return function fn(v){return gr.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ut(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,d.Z)(function*(){let A=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield hn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield Sr(g,function ba(v,g){return rt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,A,k,Z,de,He,st,Ct;const bt=null!==(w=_.displayName)&&void 0!==w?w:void 0,br=null!==(A=_.email)&&void 0!==A?A:void 0,Qi=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,Th=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,_v=null!==(de=_.tenantId)&&void 0!==de?de:void 0,Ih=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,Ym=null!==(st=_.createdAt)&&void 0!==st?st:void 0,yv=null!==(Ct=_.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:mp,emailVerified:vv,isAnonymous:Qm,providerData:nd,stsTokenManager:_p}=_;G(mp&&_p,g,"internal-error");const Sh=Nt.fromJSON(this.name,_p);G("string"==typeof mp,g,"internal-error"),It(bt,g.name),It(br,g.name),G("boolean"==typeof vv,g,"internal-error"),G("boolean"==typeof Qm,g,"internal-error"),It(Qi,g.name),It(Th,g.name),It(_v,g.name),It(Ih,g.name),It(Ym,g.name),It(yv,g.name);const Nh=new Ut({uid:mp,auth:g,email:br,emailVerified:vv,displayName:bt,isAnonymous:Qm,photoURL:Th,phoneNumber:Qi,tenantId:_v,stsTokenManager:Sh,createdAt:Ym,lastLoginAt:yv});return nd&&Array.isArray(nd)&&(Nh.providerData=nd.map(rd=>Object.assign({},rd))),Ih&&(Nh._redirectEventId=Ih),Nh}static _fromIdTokenResponse(g,_,w=!1){return(0,d.Z)(function*(){const A=new Nt;A.updateFromServerResponse(_);const k=new Ut({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:w});return yield hn(k),k})()}}const j=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var A=this;return(0,d.Z)(function*(){A.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const A=w.storage[_];return void 0===A?null:A})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function Q(v,g,_){return`firebase:${v}:${g}:${_}`}class Ee{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:A,name:k}=this.auth;this.fullUserKey=Q(this.userKey,A.apiKey,k),this.fullPersistenceKey=Q("persistence",A.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Ut._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new Ee(oe(j),g,w);const A=(yield Promise.all(_.map(function(){var st=(0,d.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return st.apply(this,arguments)}}()))).filter(st=>st);let k=A[0]||oe(j);const Z=Q(w,g.config.apiKey,g.name);let de=null;for(const st of _)try{const Ct=yield st._get(Z);if(Ct){const bt=Ut._fromJSON(g,Ct);st!==k&&(de=bt),k=st;break}}catch{}const He=A.filter(st=>st._shouldAllowMigration);return k._shouldAllowMigration&&He.length?(k=He[0],de&&(yield k._set(Z,de.toJSON())),yield Promise.all(_.map(function(){var st=(0,d.Z)(function*(Ct){if(Ct!==k)try{yield Ct._remove(Z)}catch{}});return function(Ct){return st.apply(this,arguments)}}())),new Ee(k,g,w)):new Ee(k,g,w)})()}}function ee(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Sn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Qe(g))return"Firefox";if(g.includes("silk/"))return"Silk";if($e(g))return"Blackberry";if(Ye(g))return"Webos";if(yt(g))return"Safari";if((g.includes("chrome/")||an(g))&&!g.includes("edge/"))return"Chrome";if(en(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Qe(v=(0,L.z$)()){return/firefox\//i.test(v)}function yt(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function an(v=(0,L.z$)()){return/crios\//i.test(v)}function Sn(v=(0,L.z$)()){return/iemobile/i.test(v)}function en(v=(0,L.z$)()){return/android/i.test(v)}function $e(v=(0,L.z$)()){return/blackberry/i.test(v)}function Ye(v=(0,L.z$)()){return/webos/i.test(v)}function Gt(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Vo(v=(0,L.z$)()){return Gt(v)||en(v)||Ye(v)||$e(v)||/windows phone/i.test(v)||Sn(v)}function no(v,g=[]){let _;switch(v){case"Browser":_=ee((0,L.z$)());break;case"Worker":_=`${ee((0,L.z$)())}-${v}`;break;default:_=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${ae.SDK_VERSION}/${w}`}class wa{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const w=k=>new Promise((Z,de)=>{try{Z(g(k))}catch(He){de(He)}});w.onAbort=_,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){var w;if(_.auth.currentUser===g)return;const A=[];try{for(const k of _.queue)yield k(g),k.onAbort&&A.push(k.onAbort)}catch(k){A.reverse();for(const Z of A)try{Z()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=k)||void 0===w?void 0:w.message})}})()}}class jt{constructor(g,_,w){this.app=g,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bo(this),this.idTokenSubscription=new Bo(this),this.beforeStateQueue=new wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,k;if(!w._deleted&&(w.persistenceManager=yield Ee.create(w,g),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var w;const A=yield _.assertedPersistence.getCurrentUser();let k=A,Z=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const de=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,He=k?._redirectEventId,st=yield _.tryRedirectSignIn(g);(!de||de===He)&&st?.user&&(k=st.user,Z=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(k)}catch(de){k=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(de))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){var w;try{yield hn(g)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function tt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const w=g?(0,L.m9)(g):null;return w&&G(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return g&&G(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&oe(g)||_._popupRedirectResolver;G(w,_,"argument-error"),_.redirectPersistenceManager=yield Ee.create(_,[oe(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var w,A;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,A){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Z,this,"internal-error"),Z.then(()=>k(this.currentUser)),"function"==typeof _?g.addObserver(_,w,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=no(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Ln(v){return(0,L.m9)(v)}class Bo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ls(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function ro(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Br{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return _e("not implemented")}_getIdTokenResponse(g){return _e("not implemented")}_linkToIdToken(g,_){return _e("not implemented")}_getReauthenticationResolver(g){return _e("not implemented")}}function cr(v,g){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:resetPassword",Vt(v,g))})).apply(this,arguments)}function Dn(v,g){return pc.apply(this,arguments)}function pc(){return(pc=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function gc(v,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:update",Vt(v,g))})).apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithPassword",Vt(v,g))})).apply(this,arguments)}function so(v,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:sendOobCode",Vt(v,g))})).apply(this,arguments)}function jn(v,g){return mc.apply(this,arguments)}function mc(){return(mc=(0,d.Z)(function*(v,g){return so(v,g)})).apply(this,arguments)}function Ar(v,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(v,g){return so(v,g)})).apply(this,arguments)}function Yl(v,g){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(v,g){return so(v,g)})).apply(this,arguments)}function _c(v,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(v,g){return so(v,g)})).apply(this,arguments)}function $d(){return($d=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithEmailLink",Vt(v,g))})).apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithEmailLink",Vt(v,g))})).apply(this,arguments)}class yc extends Br{constructor(g,_,w,A=null){super("password",w),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new yc(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new yc(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function rl(v,g){return Ni.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Lf(v,g){return $d.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Re(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Dn(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Vf(v,g){return oo.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:Re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function _r(v,g){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithIdp",Vt(v,g))})).apply(this,arguments)}class Cs extends Br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Cs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Re("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A}=_,k=(0,he._T)(_,["providerId","signInMethod"]);if(!w||!A)return null;const Z=new Cs(w,A);return Z.idToken=k.idToken||void 0,Z.accessToken=k.accessToken||void 0,Z.secret=k.secret,Z.nonce=k.nonce,Z.pendingToken=k.pendingToken||null,Z}_getIdTokenResponse(g){return _r(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,_r(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,_r(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function fm(v,g){return zd.apply(this,arguments)}function zd(){return(zd=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:sendVerificationCode",Vt(v,g))})).apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,g))})).apply(this,arguments)}function qd(){return(qd=(0,d.Z)(function*(v,g){const _=yield Xr(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,g));if(_.temporaryProof)throw Ii(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const gm={USER_NOT_FOUND:"user-not-found"};function Kd(){return(Kd=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),gm)})).apply(this,arguments)}class lo extends Br{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new lo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new lo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function vc(v,g){return ao.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function pm(v,g){return qd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function mm(v,g){return Kd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:k}=g;return w||_||A||k?new lo({verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:k}):null}}class Ql{constructor(g){var _,w,A,k,Z,de;const He=(0,L.zd)((0,L.pd)(g)),st=null!==(_=He.apiKey)&&void 0!==_?_:null,Ct=null!==(w=He.oobCode)&&void 0!==w?w:null,bt=function Zd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=He.mode)&&void 0!==A?A:null);G(st&&Ct&&bt,"argument-error"),this.apiKey=st,this.operation=bt,this.code=Ct,this.continueUrl=null!==(k=He.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Z=He.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(de=He.tenantId)&&void 0!==de?de:null}static parseLink(g){const _=function Yd(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||g||v}(g);try{return new Ql(_)}catch{return null}}}let us=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return yc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const A=Ql.parseLink(w);return G(A,"argument-error"),yc._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ts{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Is extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class jo extends Is{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Cs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return jo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return jo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:k,nonce:Z,providerId:de}=g;if(!w&&!A&&!_&&!k||!de)return null;try{return new jo(de)._credential({idToken:_,accessToken:w,nonce:Z,pendingToken:k})}catch{return null}}}let sl=(()=>{class v extends Is{constructor(){super("facebook.com")}static credential(_){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Jl=(()=>{class v extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:A}=_;if(!w&&!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),bc=(()=>{class v extends Is{constructor(){super("github.com")}static credential(_){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Mr extends Br{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return _r(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,_r(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,_r(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A,pendingToken:k}=_;return w&&A&&k&&w===A?new Mr(w,k):null}static _create(g,_){return new Mr(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ai extends Ts{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ai.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ai.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Mr.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return Mr._create(w,_)}catch{return null}}}let gi=(()=>{class v extends Is{constructor(){super("twitter.com")}static credential(_,w){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=_;if(!w||!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Da(v,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signUp",Vt(v,g))})).apply(this,arguments)}class Ur{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,A=!1){return(0,d.Z)(function*(){const k=yield Ut._fromIdTokenResponse(g,w,A),Z=jf(w);return new Ur({user:k,providerId:Z,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const A=jf(w);return new Ur({user:g,providerId:A,_tokenResponse:w,operationType:_})})()}}function jf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function zn(){return(zn=(0,d.Z)(function*(v){var g;const _=Ln(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Ur({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Da(_,{returnSecureToken:!0}),A=yield Ur._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Xl extends L.ZR{constructor(g,_,w,A){var k;super(_.code,_.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Xl.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,A){return new Xl(g,_,w,A)}}function Gf(v,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Xl._fromErrorAndOperation(v,k,g,w):k})}function Mi(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function eu(){return(eu=(0,d.Z)(function*(v,g){const _=(0,L.m9)(v);yield tn(!0,_,g);const{providerUserInfo:w}=yield Wr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=Mi(w||[]);return _.providerData=_.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Ea(v,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(v,g,_=!1){const w=yield Sr(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Ur._forOperation(v,"link",w)})).apply(this,arguments)}function tn(v,g,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(v,g,_){yield hn(g);const A=!1===v?"provider-already-linked":"no-such-provider";G(Mi(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function Ho(v,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(v,g,_=!1){var w;const{auth:A}=v,k="reauthenticate";try{const Z=yield Sr(v,Gf(A,k,g,v),_);G(Z.idToken,A,"internal-error");const de=mt(Z.idToken);G(de,A,"internal-error");const{sub:He}=de;return G(v.uid===He,A,"user-mismatch"),Ur._forOperation(v,k,Z)}catch(Z){throw"auth/user-not-found"===(null===(w=Z)||void 0===w?void 0:w.code)&&Re(A,"user-mismatch"),Z}})).apply(this,arguments)}function zi(v,g){return ru.apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(v,g,_=!1){const w="signIn",A=yield Gf(v,w,g),k=yield Ur._fromIdTokenResponse(v,w,A);return _||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Hn(v,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(v,g){return zi(Ln(v),g)})).apply(this,arguments)}function iu(v,g){return $f.apply(this,arguments)}function $f(){return($f=(0,d.Z)(function*(v,g){const _=(0,L.m9)(v);return yield tn(!1,_,g.providerId),Ea(_,g)})).apply(this,arguments)}function su(v,g){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(v,g){return Ho((0,L.m9)(v),g)})).apply(this,arguments)}function Dc(v,g){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(v,g){return Xr(v,"POST","/v1/accounts:signInWithCustomToken",Vt(v,g))})).apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(v,g){const _=Ln(v),w=yield Dc(_,{token:g,returnSecureToken:!0}),A=yield Ur._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class xe{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Kt._fromServerResponse(g,_):Re(g,"internal-error")}}class Kt extends xe{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Kt(_)}}function au(v,g,_){var w;G((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function qn(){return(qn=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&au(w,A,_),yield Ar(w,A)})).apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(v,g,_){yield cr((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(v,g){yield gc((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function ll(v,g){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(v,g){const _=(0,L.m9)(v),w=yield cr(_,{oobCode:g}),A=w.requestType;switch(G(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(w.mfaInfo,_,"internal-error");default:G(w.email,_,"internal-error")}let k=null;return w.mfaInfo&&(k=xe._fromServerResponse(Ln(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function Qd(){return(Qd=(0,d.Z)(function*(v,g){const{data:_}=yield ll((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(v,g,_){const w=Ln(v),A=yield Da(w,{returnSecureToken:!0,email:g,password:_}),k=yield Ur._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,w,"argument-error"),_&&au(w,A,_),yield Yl(w,A)})).apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v),A=us.credentialWithLink(g,_||Ve());return G(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Hn(w,A)})).apply(this,arguments)}function ym(v,g){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:createAuthUri",Vt(v,g))})).apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(v,g){const w={identifier:g,continueUri:vt()?Ve():"http://localhost"},{signinMethods:A}=yield ym((0,L.m9)(v),w);return A||[]})).apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(v,g){const _=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&au(_.auth,A,g);const{email:k}=yield jn(_.auth,A);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&au(w.auth,k,_);const{email:Z}=yield _c(w.auth,k);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function hu(v,g){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,d.Z)(function*(v,g){return yn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Rc(){return(Rc=(0,d.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,L.m9)(v),k={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Z=yield Sr(w,hu(w.auth,k));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const de=w.providerData.find(({providerId:He})=>"password"===He);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Wo(v,g,_){return fu.apply(this,arguments)}function fu(){return(fu=(0,d.Z)(function*(v,g,_){const{auth:w}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(k.email=g),_&&(k.password=_);const Z=yield Sr(v,Dn(w,k));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class mi{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class On extends mi{constructor(g,_,w,A){super(g,_,w),this.username=A}}class Xd extends mi{constructor(g,_){super(g,"facebook.com",_)}}class Oc extends On{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Wf extends mi{constructor(g,_){super(g,"google.com",_)}}class kc extends On{constructor(g,_,w){super(g,"twitter.com",_,w)}}function pu(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function yr(v){var g,_;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Z=null===(_=null===(g=mt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new mi(k,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new Xd(k,A);case"github.com":return new Oc(k,A);case"google.com":return new Wf(k,A);case"twitter.com":return new kc(k,A,v.screenName||null);case"custom":case"anonymous":return new mi(k,null);default:return new mi(k,w,A)}}(_)}class qo{constructor(g,_,w){this.type=g,this.credential=_,this.auth=w}static _fromIdtoken(g,_){return new qo("enroll",g,_)}static _fromMfaPendingCredential(g){return new qo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return qo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return qo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class mu{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=Ln(g),A=_.customData._serverResponse,k=(A.mfaInfo||[]).map(de=>xe._fromServerResponse(w,de));G(A.mfaPendingCredential,w,"internal-error");const Z=qo._fromMfaPendingCredential(A.mfaPendingCredential);return new mu(Z,k,function(){var de=(0,d.Z)(function*(He){const st=yield He._process(w,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const Ct=Object.assign(Object.assign({},A),{idToken:st.idToken,refreshToken:st.refreshToken});switch(_.operationType){case"signIn":const bt=yield Ur._fromIdTokenResponse(w,_.operationType,Ct);return yield w._updateCurrentUser(bt.user),bt;case"reauthenticate":return G(_.user,w,"internal-error"),Ur._forOperation(_.user,_.operationType,Ct);default:Re(w,"internal-error")}});return function(He){return de.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function _u(v,g){return yn(v,"POST","/v2/accounts/mfaEnrollment:start",Vt(v,g))}class zf{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>xe._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new zf(g)}getSession(){var g=this;return(0,d.Z)(function*(){return qo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var w=this;return(0,d.Z)(function*(){const A=g,k=yield w.getSession(),Z=yield Sr(w.user,A._process(w.user.auth,k,_));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){var w;const A="string"==typeof g?g:g.uid,k=yield _.user.getIdToken(),Z=yield Sr(_.user,function rh(v,g){return yn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(v,g))}(_.user.auth,{idToken:k,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:de})=>de!==A),yield _.user._updateTokensIfNecessary(Z);try{yield _.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(w=de)||void 0===w?void 0:w.code))throw de}})()}}const Ko=new WeakMap,Zo="__sak";class vu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Zo,"1"),this.storage.removeItem(Zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const pl=(()=>{class v extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fl(){const v=(0,L.z$)();return yt(v)||Gt(v)}()&&function Rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),k=this.localCache[w];A!==k&&_(w,k,A)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((de,He,st)=>{this.notifyListeners(de,st)});const A=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(A);if(_.newValue!==de)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!w)return}const k=()=>{const de=this.storage.getItem(A);!w&&this.localCache[A]===de||this.notifyListeners(A,de)},Z=this.storage.getItem(A);!function mr(){return(0,L.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const k of Array.from(A))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var A=()=>super._set,k=this;return(0,d.Z)(function*(){yield A().call(k,_,w),k.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const k=yield w().call(A,_);return A.localCache[_]=JSON.stringify(k),k})()}_remove(_){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),ds=(()=>{class v extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let oh=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(k=>k.isListeningto(_));if(w)return w;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const A=_,{eventId:k,eventType:Z,data:de}=A.data,He=w.handlersMap[Z];if(!He?.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:Z});const st=Array.from(He).map(function(){var bt=(0,d.Z)(function*(br){return br(A.origin,de)});return function(br){return bt.apply(this,arguments)}}()),Ct=yield function ml(v){return Promise.all(v.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(st);A.ports[0].postMessage({status:"done",eventId:k,eventType:Z,response:Ct})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function _l(v="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return v+_}class Pc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var A=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Z,de;return new Promise((He,st)=>{const Ct=_l("",20);k.port1.start();const bt=setTimeout(()=>{st(new Error("unsupported_event"))},w);de={messageChannel:k,onMessage(br){const Qi=br;if(Qi.data.eventId===Ct)switch(Qi.data.status){case"ack":clearTimeout(bt),Z=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),He(Qi.data.response);break;default:clearTimeout(bt),clearTimeout(Z),st(new Error("invalid_response"))}}},A.handlers.add(de),k.port1.addEventListener("message",de.onMessage),A.target.postMessage({eventType:g,eventId:Ct,data:_},[k.port2])}).finally(()=>{de&&A.removeMessageHandler(de)})})()}}function nr(){return window}function bu(){return typeof nr().WorkerGlobalScope<"u"&&"function"==typeof nr().importScripts}function yl(){return(yl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ho="firebaseLocalStorageDb",fo="firebaseLocalStorage",Eu="fbase_key";class Qo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function vl(v,g){return v.transaction([fo],g?"readwrite":"readonly").objectStore(fo)}function Na(){const v=indexedDB.open(ho,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(fo,{keyPath:Eu})}catch(A){_(A)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(fo)?g(w):(w.close(),yield function lh(){const v=indexedDB.deleteDatabase(ho);return new Qo(v).toPromise()}(),g(yield Na()))}))})}function xs(v,g,_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(v,g,_){const w=vl(v,!0).put({[Eu]:g,value:_});return new Qo(w).toPromise()})).apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(v,g){const _=vl(v,!1).get(g),w=yield new Qo(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Jo(v,g){const _=vl(v,!0).delete(g);return new Qo(_).toPromise()}const Aa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Na()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const k=yield w._openDb();return yield _(k)}catch(k){if(A++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return bu()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=oh._getInstance(function Du(){return bu()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(A,k){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,A;if(_.activeServiceWorker=yield function Yo(){return yl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pc(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Na();return yield xs(_,Zo,"1"),yield Jo(_,Zo),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(k=>xs(k,_,w)),A.localCache[_]=w,A.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(k=>function Cu(v,g){return bl.apply(this,arguments)}(k,_));return w.localCache[_]=A,A})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>Jo(A,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(Z=>{const de=vl(Z,!1).getAll();return new Qo(de).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:Z,value:de}of w)k.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(de)&&(_.notifyListeners(Z,de),A.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!k.has(Z)&&(_.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const k of Array.from(A))k(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ma(v,g){return yn(v,"POST","/v2/accounts/mfaSignIn:start",Vt(v,g))}function po(){return(po=(0,d.Z)(function*(v){return(yield yn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ra(v){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=A=>{const k=we("internal-error");k.customData=A,_(k)},w.type="text/javascript",w.charset="UTF-8",function xa(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function Su(v){return`__${v}${Math.floor(1e6*Math.random())}`}const wl=1e12;class Mn{constructor(g){this.auth=g,this.counter=wl,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new vm(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||wl;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||wl))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(g||wl))||void 0===w||w.execute(),""})()}}class vm{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;G(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tv(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bm=Su("rcb"),nv=new _n(3e4,6e4);class qf{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=nr().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function wD(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(nr().grecaptcha):new Promise((w,A)=>{const k=nr().setTimeout(()=>{A(we(g,"network-request-failed"))},nv.get());nr()[bm]=()=>{nr().clearTimeout(k),delete nr()[bm];const de=nr().grecaptcha;if(!de)return void A(we(g,"internal-error"));const He=de.render;de.render=(st,Ct)=>{const bt=He(st,Ct);return this.counter++,bt},this.hostLanguage=_,w(de)},Ra(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:bm,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),A(we(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=nr().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vc{load(g){return(0,d.Z)(function*(){return new Mn(g)})()}clearedOneInstance(){}}const iv="recaptcha",sv={theme:"light",type:"image"};class Rr{constructor(g,_=Object.assign({},sv),w){this.parameters=_,this.type=iv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(w),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;G(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vc:new qf,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(k=>{const Z=de=>{!de||(g.tokenChangeListeners.delete(Z),k(de))};g.tokenChangeListeners.add(Z),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=nr()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){G(vt()&&!bu(),g.auth,"internal-error"),yield function rr(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function _i(v){return po.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ri{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=lo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ln(){return(ln=(0,d.Z)(function*(v,g,_){const w=Ln(v),A=yield mo(w,g,(0,L.m9)(_));return new ri(A,k=>Hn(w,k))})).apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v);yield tn(!1,w,"phone");const A=yield mo(w.auth,g,(0,L.m9)(_));return new ri(A,k=>iu(w,k))})).apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v),A=yield mo(w.auth,g,(0,L.m9)(_));return new ri(A,k=>su(w,k))})).apply(this,arguments)}function mo(v,g,_){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(v,g,_){var w;const A=yield _.verify();try{let k;if(G("string"==typeof A,v,"argument-error"),G(_.type===iv,v,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const Z=k.session;if("phoneNumber"in k)return G("enroll"===Z.type,v,"internal-error"),(yield _u(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{G("signin"===Z.type,v,"internal-error");const de=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return G(de,v,"missing-multi-factor-info"),(yield Ma(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield fm(v,{phoneNumber:k.phoneNumber,recaptchaToken:A});return Z}}finally{_._reset()}})).apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(v,g){yield Ea((0,L.m9)(v),g)})).apply(this,arguments)}let Nu=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Ln(_)}verifyPhoneNumber(_,w){return mo(this.auth,_,(0,L.m9)(w))}static credential(_,w){return lo._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:A}=_;return w&&A?lo._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Os(v,g){return g?oe(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Au extends Br{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return _r(g,this._buildIdpRequest())}_linkToIdToken(g,_){return _r(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return _r(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function vi(v){return zi(v.auth,new Au(v),v.bypassAuthState)}function Dl(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),Ho(_,new Au(v),v.bypassAuthState)}function Gn(v){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),Ea(_,new Au(v),v.bypassAuthState)})).apply(this,arguments)}class Cl{constructor(g,_,w,A,k=!1){this.auth=g,this.resolver=w,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(w,A){g.pendingPromise={resolve:w,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(w,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:k,tenantId:Z,error:de,type:He}=g;if(de)return void _.reject(de);const st={auth:_.auth,requestUri:w,sessionId:A,tenantId:Z||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(st))}catch(Ct){_.reject(Ct)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return vi;case"linkViaPopup":case"linkViaRedirect":return Gn;case"reauthViaPopup":case"reauthViaRedirect":return Dl;default:Re(this.auth,"internal-error")}}resolve(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Uc=new _n(2e3,1e4);function ks(){return(ks=(0,d.Z)(function*(v,g,_){const w=Ln(v);ze(v,g,Ts);const A=Os(w,_);return new ea(w,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function uh(){return(uh=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v);ze(w.auth,g,Ts);const A=Os(w.auth,_);return new ea(w.auth,"reauthViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v);ze(w.auth,g,Ts);const A=Os(w.auth,_);return new ea(w.auth,"linkViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}let ea=(()=>{class v extends Cl{constructor(_,w,A,k,Z){super(_,w,k,Z),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return G(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){Y(1===_.filter.length,"Popup operations only handle one event");const w=_l();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(we(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Uc.get())};_()}}return v.currentPopupAction=null,v})();const Zi=new Map;class Hc extends Cl{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=Zi.get(_.auth._key());if(!w){try{const k=(yield function Yn(v,g){return Ps.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(k)}catch(A){w=()=>Promise.reject(A)}Zi.set(_.auth._key(),w)}return _.bypassAuthState||Zi.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const A=yield w.auth._redirectUserForId(g.eventId);if(A)return w.user=A,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ps(){return(Ps=(0,d.Z)(function*(v,g){const _=na(g),w=_o(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(_));return yield w._remove(_),A})).apply(this,arguments)}function Gc(v,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(v,g){return _o(v)._set(na(g),"true")})).apply(this,arguments)}function ta(v,g){Zi.set(v._key(),g)}function _o(v){return oe(v._redirectPersistence)}function na(v){return Q("pendingRedirect",v.config.apiKey,v.name)}function I(){return(I=(0,d.Z)(function*(v,g,_){const w=Ln(v);ze(v,g,Ts);const A=Os(w,_);return yield Gc(A,w),A._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v);ze(w.auth,g,Ts);const A=Os(w.auth,_);yield Gc(A,w.auth);const k=yield Et(w);return A._openRedirect(w.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(v,g,_){const w=(0,L.m9)(v);ze(w.auth,g,Ts);const A=Os(w.auth,_);yield tn(!1,w,g.providerId),yield Gc(A,w.auth);const k=yield Et(w);return A._openRedirect(w.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(v,g){return yield Ln(v)._initializationPromise,St(v,g,!1)})).apply(this,arguments)}function St(v,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(v,g,_=!1){const w=Ln(v),A=Os(w,g),Z=yield new Hc(w,A,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,g)),Z})).apply(this,arguments)}function Et(v){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(v){const g=_l(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class En{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function hs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bi(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!bi(g)){const A=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(we(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bn(g))}saveEventToCache(g){this.cachedEventUids.add(Bn(g)),this.lastProcessedEventTime=Date.now()}}function Bn(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function bi({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function yo(v){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(v,g={}){return yn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const kn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fs=/^https?/;function Zf(){return(Zf=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield yo(v);for(const _ of g)try{if(Dm(_))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function Dm(v){const g=Ve(),{protocol:_,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===w}if(!fs.test(_))return!1;if(kn.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Em=new _n(3e4,6e4);function Cm(){const v=nr().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let $c=null;function Tm(v){return $c=$c||function Mu(v){return new Promise((g,_)=>{var w,A,k;function Z(){Cm(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Cm(),_(we(v,"network-request-failed"))},timeout:Em.get()})}if(null!==(A=null===(w=nr().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)g(gapi.iframes.getContext());else{if(null===(k=nr().gapi)||void 0===k||!k.load){const de=Su("iframefcb");return nr()[de]=()=>{gapi.load?Z():_(we(v,"network-request-failed"))},Ra(`https://apis.google.com/js/api.js?onload=${de}`).catch(He=>_(He))}Z()}}).catch(g=>{throw $c=null,g})}(v),$c}const ka=new _n(5e3,15e3),ov={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function av(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?xn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:ae.SDK_VERSION},A=Yf.get(v.config.apiHost);A&&(w.eid=A);const k=v._getFrameworks();return k.length&&(w.fw=k.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function ia(){return ia=(0,d.Z)(function*(v){const g=yield Tm(v),_=nr().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:av(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ov,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(k,Z){yield w.restyle({setHideOnLeave:!1});const de=we(v,"network-request-failed"),He=nr().setTimeout(()=>{Z(de)},ka.get());function st(){nr().clearTimeout(He),k(w)}w.ping(st).then(st,()=>{Z(de)})});return function(k,Z){return A.apply(this,arguments)}}()))}),ia.apply(this,arguments)}const Qf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zc(v,g,_,w,A,k){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:ae.SDK_VERSION,eventId:A};if(g instanceof Ts){g.setDefaultLanguage(v.languageCode),Z.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[He,st]of Object.entries(k||{}))Z[He]=st}if(g instanceof Is){const He=g.getScopes().filter(st=>""!==st);He.length>0&&(Z.scopes=He.join(","))}v.tenantId&&(Z.tid=v.tenantId);const de=Z;for(const He of Object.keys(de))void 0===de[He]&&delete de[He];return`${function Mm({config:v}){return v.emulator?xn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(de).slice(1)}`}const fh="webStorageSupport";class Ls extends class ph{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ls(g)}_finalizeEnroll(g,_,w){return function yu(v,g){return yn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(v,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Iu(v,g){return yn(v,"POST","/v2/accounts/mfaSignIn:finalize",Vt(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xu=(()=>{class v{constructor(){}static assertion(_){return Ls._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var np="@firebase/auth",Rm="0.20.11";class DD{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{var A;g((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pa(){return window}function Fa(){return(Fa=(0,d.Z)(function*(v,g,_){var w;const{BuildInfo:A}=Pa();Y(g.sessionId,"AuthEvent did not contain a session ID");const k=yield Pm(g.sessionId),Z={};return Gt()?Z.ibi=A.packageName:en()?Z.apn=A.packageName:Re(v,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=k,zc(v,_,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(v){const{BuildInfo:g}=Pa(),_={};Gt()?_.iosBundleId=g.packageName:en()?_.androidPackageName=g.packageName:Re(v,"operation-not-supported-in-this-environment"),yield yo(v,_)})).apply(this,arguments)}function sp(){return(sp=(0,d.Z)(function*(v,g,_){const{cordova:w}=Pa();let A=()=>{};try{yield new Promise((k,Z)=>{let de=null;function He(){var bt;k();const br=null===(bt=w.plugins.browsertab)||void 0===bt?void 0:bt.close;"function"==typeof br&&br(),"function"==typeof _?.close&&_.close()}function st(){de||(de=window.setTimeout(()=>{Z(we(v,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&st()}g.addPassiveListener(He),document.addEventListener("resume",st,!1),en()&&document.addEventListener("visibilitychange",Ct,!1),A=()=>{g.removePassiveListener(He),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Ct,!1),de&&window.clearTimeout(de)}})}finally{A()}})).apply(this,arguments)}function Pm(v){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,d.Z)(function*(v){const g=dv(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function dv(v){if(Y(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}(0,L.Pz)("authIdTokenMaxAge"),function uv(v){(0,ae._registerComponent)(new ue.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:k,authDomain:Z}=w.options;return((de,He)=>{G(k&&!k.includes(":"),"invalid-api-key",{appName:de.name}),G(!Z?.includes(":"),"argument-error",{appName:de.name});const st={apiKey:k,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:no(v)},Ct=new jt(de,He,st);return function Ue(v,g){const _=g?.persistence||[],w=(Array.isArray(_)?_:[_]).map(oe);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,g?.popupRedirectResolver)}(Ct,_),Ct})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",g=>{const _=Ln(g.getProvider("auth").getImmediate());return new DD(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(np,Rm,function lv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(np,Rm,"esm2017")}("Browser");class Zc extends En{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,d.Z)(function*(){yield g.initPromise})()}}function Lm(v){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,d.Z)(function*(v){const g=yield Bm()._get(mh(v));return g&&(yield Bm()._remove(mh(v))),g})).apply(this,arguments)}function ap(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*g.length);v.push(g.charAt(w))}return v.join("")}function Bm(){return oe(pl)}function mh(v){return Q("authEvent",v.config.apiKey,v.name)}function _h(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function Hm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function La(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Nl(v=(0,L.z$)()){return!("file:"!==La()&&"ionic:"!==La()&&"capacitor:"!==La()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function hp(){try{const v=self.localStorage,g=_l();if(v)return v.setItem(g,"1"),v.removeItem(g),!function dp(v=(0,L.z$)()){return function cp(){return(0,L.w1)()&&11===document?.documentMode}()||function Jc(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return Al()&&(0,L.hl)()}return!1}function Al(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Va(){return(function Gm(){return"http:"===La()||"https:"===La()}()||(0,L.ru)()||Nl())&&!function Qc(){return(0,L.b$)()||(0,L.UG)()}()&&hp()&&!Al()}function fp(){return Nl()&&typeof document<"u"}function vh(){return(vh=(0,d.Z)(function*(){return!!fp()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},vo=G,Vs="persistence";function Xc(v){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(v){yield v._initializationPromise;const g=Dh(),_=Q(Vs,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function Dh(){var v;try{return(null===(v=function $m(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Eh=G;class wi{constructor(){this.browserResolver=oe(class xm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=St,this._overrideRedirectResult=ta}_openPopup(g,_,w,A){var k=this;return(0,d.Z)(function*(){var Z;Y(null===(Z=k.eventManagers[g._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const de=zc(g,_,w,Ve(),A);return function Am(v,g,_,w=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const He=Object.assign(Object.assign({},Qf),{width:w.toString(),height:A.toString(),top:k,left:Z}),st=(0,L.z$)().toLowerCase();_&&(de=an(st)?"_blank":_),Qe(st)&&(g=g||"http://localhost",He.scrollbars="yes");const Ct=Object.entries(He).reduce((br,[Qi,Th])=>`${br}${Qi}=${Th},`,"");if(function pi(v=(0,L.z$)()){var g;return Gt(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(st)&&"_self"!==de)return function Jf(v,g){const _=document.createElement("a");_.href=v,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",de),new Wc(null);const bt=window.open(g||"",de,Ct);G(bt,v,"popup-blocked");try{bt.focus()}catch{}return new Wc(bt)}(g,de,_l())})()}_openRedirect(g,_,w,A){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(g),function qi(v){nr().location.href=v}(zc(g,_,w,Ve(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:k}=this.eventManagers[_];return A?Promise.resolve(A):(Y(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const w=yield function Sm(v){return ia.apply(this,arguments)}(g),A=new En(g);return w.register("authEvent",k=>(G(k?.authEvent,g,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=w,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(fh,{type:fh},A=>{var k;const Z=null===(k=A?.[0])||void 0===k?void 0:k[fh];void 0!==Z&&_(!!Z),Re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function hh(v){return Zf.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Vo()||yt()||Gt()}}),this.cordovaResolver=oe(class lp{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=St,this._overrideRedirectResult=ta}_initialize(g){var _=this;return(0,d.Z)(function*(){const w=g._key();let A=_.eventManagers.get(w);return A||(A=new Zc(g),_.eventManagers.set(w,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){Re(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,w,A){var k=this;return(0,d.Z)(function*(){!function M1(v){var g,_,w,A,k,Z,de,He,st,Ct;const bt=Pa();G("function"==typeof(null===(g=bt?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=bt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(k=null===(A=null===(w=bt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===k?void 0:k.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(He=null===(de=null===(Z=bt?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===de?void 0:de.browsertab)||void 0===He?void 0:He.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ct=null===(st=bt?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Ct?void 0:Ct.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Z=yield k._initialize(g);yield Z.initialized(),Z.resetRedirect(),function dh(){Zi.clear()}(),yield k._originValidation(g);const de=function hv(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:ap(),postBody:null,tenantId:v.tenantId,error:we(v,"no-auth-event")}}(g,w,A);yield function op(v,g){return Bm()._set(mh(v),g)}(g,de);const He=yield function ps(v,g,_){return Fa.apply(this,arguments)}(g,de,_),st=yield function si(v){const{cordova:g}=Pa();return new Promise(_=>{g.plugins.browsertab.isAvailable(w=>{let A=null;w?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function Nr(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(He);return function Sl(v,g,_){return sp.apply(this,arguments)}(g,Z,st)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ip(v){return Kc.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:w,handleOpenURL:A,BuildInfo:k}=Pa(),Z=setTimeout((0,d.Z)(function*(){yield Lm(g),_.onEvent(Hm())}),500),de=function(){var Ct=(0,d.Z)(function*(bt){clearTimeout(Z);const br=yield Lm(g);let Qi=null;br&&bt?.url&&(Qi=function fv(v,g){var _,w;const A=function Or(v){const g=_h(v),_=g.link?decodeURIComponent(g.link):void 0,w=_h(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return _h(A).link||A||w||_||v}(g);if(A.includes("/__/auth/callback")){const k=_h(A),Z=k.firebaseError?function ED(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,de=null===(w=null===(_=Z?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],He=de?we(de):null;return He?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(br,bt.url)),_.onEvent(Qi||Hm())});return function(br){return Ct.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,de);const He=A,st=`${k.packageName.toLowerCase()}://`;Pa().handleOpenURL=function(){var Ct=(0,d.Z)(function*(bt){if(bt.toLowerCase().startsWith(st)&&de({url:bt}),"function"==typeof He)try{He(bt)}catch(br){console.error(br)}});return function(bt){return Ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=St,this._overrideRedirectResult=ta}_initialize(g){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,w,A){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(g,_,w,A)})()}_openRedirect(g,_,w,A){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(g,_,w,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return fp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Eh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,d.Z)(function*(){if(g.underlyingResolver)return;const _=yield function x1(){return vh.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function pp(v){return v.unwrap()}function pv(v){return gp(v)}function gp(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Nu.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=Jl;break;case"facebook.com":w=sl;break;case"github.com":w=bc;break;case"twitter.com":w=gi;break;default:const{oauthIdToken:A,oauthAccessToken:k,oauthTokenSecret:Z,pendingToken:de,nonce:He}=g;return k||Z||A||de?de?_.startsWith("saml.")?Mr._create(_,de):Cs._fromParams({providerId:_,signInMethod:_,pendingToken:de,idToken:A,accessToken:k}):new jo(_).credential({idToken:A,accessToken:k,rawNonce:He}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function vr(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function CD(v,g){var _,w;const A=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=g)||void 0===w?void 0:w.code))g.resolver=new gv(v,function Zn(v,g){var _;const w=(0,L.m9)(v),A=g;return G(g.customData.operationType,w,"argument-error"),G(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),mu._fromError(w,A)}(v,g));else if(A){const k=gp(g),Z=g;k&&(Z.credential=k,Z.tenantId=A.tenantId||void 0,Z.email=A.email||void 0,Z.phoneNumber=A.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:pv(_),additionalUserInfo:pu(_),user:bo.getOrCreate(A)}})}function Wm(v,g){return ed.apply(this,arguments)}function ed(){return(ed=(0,d.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:w=>vr(v,_.confirm(w))}})).apply(this,arguments)}class gv{constructor(g,_){this.resolver=_,this.auth=function Ch(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return vr(pp(this.auth),this.resolver.resolveSignIn(g))}}class bo{constructor(g){this._delegate=g,this.multiFactor=function Sa(v){const g=(0,L.m9)(v);return Ko.has(g)||Ko.set(g,zf._fromUser(g)),Ko.get(g)}(g)}static getOrCreate(g){return bo.USER_MAP.has(g)||bo.USER_MAP.set(g,new bo(g)),bo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,d.Z)(function*(){return vr(_.auth,iu(_._delegate,g))})()}linkWithPhoneNumber(g,_){var w=this;return(0,d.Z)(function*(){return Wm(w.auth,function Je(v,g,_){return nn.apply(this,arguments)}(w._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,d.Z)(function*(){return vr(_.auth,function ch(v,g,_){return Tl.apply(this,arguments)}(_._delegate,g,wi))})()}linkWithRedirect(g){var _=this;return(0,d.Z)(function*(){return yield Xc(Ln(_.auth)),function X(v,g,_){return function le(v,g,_){return Se.apply(this,arguments)}(v,g,_)}(_._delegate,g,wi)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,d.Z)(function*(){return vr(_.auth,su(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Wm(this.auth,function Ki(v,g,_){return Vn.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return vr(this.auth,function wm(v,g,_){return uh.apply(this,arguments)}(this._delegate,g,wi))}reauthenticateWithRedirect(g){var _=this;return(0,d.Z)(function*(){return yield Xc(Ln(_.auth)),function S(v,g,_){return function x(v,g,_){return U.apply(this,arguments)}(v,g,_)}(_._delegate,g,wi)})()}sendEmailVerification(g){return function Nc(v,g){return hl.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,d.Z)(function*(){return yield function ni(v,g){return eu.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Jd(v,g){return Wo((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function $o(v,g){return Wo((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function ct(v,g){return Bc.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function xc(v,g){return Rc.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Ac(v,g,_){return du.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bo.USER_MAP=new WeakMap;const sa=G;let zm=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;sa(A,"invalid-api-key",{appName:_.name}),sa(A,"invalid-api-key",{appName:_.name});const k=typeof window<"u"?wi:void 0;this._delegate=w.initialize({options:{persistence:mv(A,_.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Kl(v,g,_){const w=Ln(v);G(w._canInitEmulator,w,"emulator-config-failed"),G(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const A=!!_?.disableWarnings,k=ls(g),{host:Z,port:de}=function ur(v){const g=ls(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const k=A[1];return{host:k,port:ro(w.substr(k.length+1))}}{const[k,Z]=w.split(":");return{host:k,port:ro(Z)}}}(g);w.config.emulator={url:`${k}//${Z}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:de,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function io(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function xi(v,g){return al.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return ll(this._delegate,_)}confirmPasswordReset(_,w){return function uu(v,g,_){return Ca.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var A=this;return(0,d.Z)(function*(){return vr(A._delegate,function ul(v,g,_){return Kn.apply(this,arguments)}(A._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function cu(v,g){return dl.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Ms(v,g){return"EMAIL_SIGNIN"===Ql.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){sa(Va(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function qe(v,g){return _t.apply(this,arguments)}(_._delegate,wi);return w?vr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function up(v,g){Ln(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,w,A){const{next:k,error:Z,complete:de}=qm(_,w,A);return this._delegate.onAuthStateChanged(k,Z,de)}onIdTokenChanged(_,w,A){const{next:k,error:Z,complete:de}=qm(_,w,A);return this._delegate.onIdTokenChanged(k,Z,de)}sendSignInLinkToEmail(_,w){return function Ic(v,g,_){return Go.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function lu(v,g,_){return qn.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,d.Z)(function*(){let A;switch(function bh(v,g){vo(Object.values(qr).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?vo(g!==qr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?vo(g===qr.NONE,v,"unsupported-persistence-type"):Al()?vo(g===qr.NONE||g===qr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):vo(g===qr.NONE||hp(),v,"unsupported-persistence-type")}(w._delegate,_),_){case qr.SESSION:A=ds;break;case qr.LOCAL:A=(yield oe(Aa)._isAvailable())?Aa:pl;break;case qr.NONE:A=j;break;default:return Re("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return vr(this._delegate,function Hf(v){return zn.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return vr(this._delegate,Hn(this._delegate,_))}signInWithCustomToken(_){return vr(this._delegate,function Ec(v,g){return ol.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return vr(this._delegate,function cs(v,g,_){return Hn((0,L.m9)(v),us.credential(g,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return vr(this._delegate,function _m(v,g,_){return cl.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Wm(this._delegate,function go(v,g,_){return ln.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,d.Z)(function*(){return sa(Va(),w._delegate,"operation-not-supported-in-this-environment"),vr(w._delegate,function jc(v,g,_){return ks.apply(this,arguments)}(w._delegate,_,wi))})()}signInWithRedirect(_){var w=this;return(0,d.Z)(function*(){return sa(Va(),w._delegate,"operation-not-supported-in-this-environment"),yield Xc(w._delegate),function Qn(v,g,_){return function Kf(v,g,_){return I.apply(this,arguments)}(v,g,_)}(w._delegate,_,wi)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Tc(v,g){return Qd.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=qr,v})();function qm(v,g,_){let w=v;"function"!=typeof v&&({next:w,error:g,complete:_}=v);const A=w;return{next:Z=>A(Z&&bo.getOrCreate(Z)),error:g,complete:_}}function mv(v,g){const _=function wh(v,g){const _=Dh();if(!_)return[];const w=Q(Vs,v,g);switch(_.getItem(w)){case qr.NONE:return[j];case qr.LOCAL:return[Aa,ds];case qr.SESSION:return[ds];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(Aa)&&_.push(Aa),typeof window<"u")for(const w of[pl,ds])_.includes(w)||_.push(w);return _.includes(j)||_.push(j),_}class Ua{constructor(){this.providerId="phone",this._delegate=new Nu(pp(te.Z.auth()))}static credential(g,_){return Nu.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Ua.PHONE_SIGN_IN_METHOD=Nu.PHONE_SIGN_IN_METHOD,Ua.PROVIDER_ID=Nu.PROVIDER_ID;const Km=G;class Zm{constructor(g,_,w=te.Z.app()){var A;Km(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Rr(g,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function td(v){v.INTERNAL.registerComponent(new ue.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new zm(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:us,FacebookAuthProvider:sl,GithubAuthProvider:bc,GoogleAuthProvider:Jl,OAuthProvider:jo,SAMLAuthProvider:Ai,PhoneAuthProvider:Ua,PhoneMultiFactorGenerator:xu,RecaptchaVerifier:Zm,TwitterAuthProvider:gi,Auth:zm,AuthCredential:Br,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(te.Z)},9751:(gt,Ae,V)=>{V.d(Ae,{y:()=>fe});var d=V(930),te=V(727),L=V(8822),ae=V(9635),se=V(2416),he=V(576),ue=V(2806);let fe=(()=>{class J{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Ce=new J;return Ce.source=this,Ce.operator=Pe,Ce}subscribe(Pe,Ce,ut){const ye=function W(J){return J&&J instanceof d.Lv||function $(J){return J&&(0,he.m)(J.next)&&(0,he.m)(J.error)&&(0,he.m)(J.complete)}(J)&&(0,te.Nn)(J)}(Pe)?Pe:new d.Hp(Pe,Ce,ut);return(0,ue.x)(()=>{const{operator:me,source:ot}=this;ye.add(me?me.call(ye,ot):ot?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Ce){Pe.error(Ce)}}forEach(Pe,Ce){return new(Ce=ge(Ce))((ut,ye)=>{const me=new d.Hp({next:ot=>{try{Pe(ot)}catch(dt){ye(dt),me.unsubscribe()}},error:ye,complete:ut});this.subscribe(me)})}_subscribe(Pe){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Pe)}[L.L](){return this}pipe(...Pe){return(0,ae.U)(Pe)(this)}toPromise(Pe){return new(Pe=ge(Pe))((Ce,ut)=>{let ye;this.subscribe(me=>ye=me,me=>ut(me),()=>Ce(ye))})}}return J.create=Ge=>new J(Ge),J})();function ge(J){var Ge;return null!==(Ge=J??se.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(gt,Ae,V)=>{V.d(Ae,{x:()=>ue});var d=V(9751),te=V(727);const ae=(0,V(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=V(8737),he=V(2806);let ue=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const J=new fe(this,this);return J.operator=W,J}_throwIfClosed(){if(this.closed)throw new ae}next(W){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(W)}})}error(W){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:J}=this;for(;J.length;)J.shift().error(W)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:J,isStopped:Ge,observers:Pe}=this;return J||Ge?te.Lc:(this.currentObservers=null,Pe.push(W),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Pe,W)}))}_checkFinalizedStatuses(W){const{hasError:J,thrownError:Ge,isStopped:Pe}=this;J?W.error(Ge):Pe&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return ge.create=($,W)=>new fe($,W),ge})();class fe extends ue{constructor($,W){super(),this.destination=$,this.source=W}next($){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===J||J.call(W,$)}error($){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===J||J.call(W,$)}complete(){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===W||W.call($)}_subscribe($){var W,J;return null!==(J=null===(W=this.source)||void 0===W?void 0:W.subscribe($))&&void 0!==J?J:te.Lc}}},930:(gt,Ae,V)=>{V.d(Ae,{Hp:()=>ut,Lv:()=>J});var d=V(576),te=V(727),L=V(2416),ae=V(7849),se=V(5032);const he=ge("C",void 0,void 0);function ge(Re,we,Ie){return{kind:Re,value:we,error:Ie}}var $=V(3410),W=V(2806);class J extends te.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,te.Nn)(we)&&we.add(this)):this.destination=dt}static create(we,Ie,ze){return new ut(we,Ie,ze)}next(we){this.isStopped?ot(function fe(Re){return ge("N",Re,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ot(function ue(Re){return ge("E",void 0,Re)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ot(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Pe(Re,we){return Ge.call(Re,we)}class Ce{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(we)}catch(ze){ye(ze)}}error(we){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(we)}catch(ze){ye(ze)}else ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ie){ye(Ie)}}}class ut extends J{constructor(we,Ie,ze){let Ke;if(super(),(0,d.m)(we)||!we)Ke={next:we??void 0,error:Ie??void 0,complete:ze??void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(we),G.unsubscribe=()=>this.unsubscribe(),Ke={next:we.next&&Pe(we.next,G),error:we.error&&Pe(we.error,G),complete:we.complete&&Pe(we.complete,G)}):Ke=we}this.destination=new Ce(Ke)}}function ye(Re){L.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Re):(0,ae.h)(Re)}function ot(Re,we){const{onStoppedNotification:Ie}=L.v;Ie&&$.z.setTimeout(()=>Ie(Re,we))}const dt={closed:!0,next:se.Z,error:function me(Re){throw Re},complete:se.Z}},727:(gt,Ae,V)=>{V.d(Ae,{Lc:()=>he,w0:()=>se,Nn:()=>ue});var d=V(576);const L=(0,V(3888).d)(ge=>function(W){ge(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((J,Ge)=>`${Ge+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ae=V(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Pe of W)Pe.remove(this);else W.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(Pe){$=Pe instanceof L?Pe.errors:[Pe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Pe of Ge)try{fe(Pe)}catch(Ce){$=$??[],Ce instanceof L?$=[...$,...Ce.errors]:$.push(Ce)}}if($)throw new L($)}}add($){var W;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push($)}}_hasParent($){const{_parentage:W}=this;return W===$||Array.isArray(W)&&W.includes($)}_addParent($){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push($),W):W?[W,$]:$}_removeParent($){const{_parentage:W}=this;W===$?this._parentage=null:Array.isArray(W)&&(0,ae.P)(W,$)}remove($){const{_finalizers:W}=this;W&&(0,ae.P)(W,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const ge=new se;return ge.closed=!0,ge})();const he=se.EMPTY;function ue(ge){return ge instanceof se||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function fe(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(gt,Ae,V)=>{V.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Ae,V)=>{V.d(Ae,{E:()=>te});const te=new(V(9751).y)(se=>se.complete())},8996:(gt,Ae,V)=>{V.d(Ae,{D:()=>we});var d=V(8421),te=V(5363),L=V(9468),he=V(9751),fe=V(2202),ge=V(576),$=V(9672);function J(Ie,ze){if(!Ie)throw new Error("Iterable cannot be null");return new he.y(Ke=>{(0,$.f)(Ke,ze,()=>{const G=Ie[Symbol.asyncIterator]();(0,$.f)(Ke,ze,()=>{G.next().then(_e=>{_e.done?Ke.complete():Ke.next(_e.value)})},0,!0)})})}var Ge=V(3670),Pe=V(8239),Ce=V(1144),ut=V(6495),ye=V(2206),me=V(4532),ot=V(3260);function we(Ie,ze){return ze?function Re(Ie,ze){if(null!=Ie){if((0,Ge.c)(Ie))return function ae(Ie,ze){return(0,d.Xf)(Ie).pipe((0,L.R)(ze),(0,te.Q)(ze))}(Ie,ze);if((0,Ce.z)(Ie))return function ue(Ie,ze){return new he.y(Ke=>{let G=0;return ze.schedule(function(){G===Ie.length?Ke.complete():(Ke.next(Ie[G++]),Ke.closed||this.schedule())})})}(Ie,ze);if((0,Pe.t)(Ie))return function se(Ie,ze){return(0,d.Xf)(Ie).pipe((0,L.R)(ze),(0,te.Q)(ze))}(Ie,ze);if((0,ye.D)(Ie))return J(Ie,ze);if((0,ut.T)(Ie))return function W(Ie,ze){return new he.y(Ke=>{let G;return(0,$.f)(Ke,ze,()=>{G=Ie[fe.h](),(0,$.f)(Ke,ze,()=>{let _e,Y;try{({value:_e,done:Y}=G.next())}catch(ne){return void Ke.error(ne)}Y?Ke.complete():Ke.next(_e)},0,!0)}),()=>(0,ge.m)(G?.return)&&G.return()})}(Ie,ze);if((0,ot.L)(Ie))return function dt(Ie,ze){return J((0,ot.Q)(Ie),ze)}(Ie,ze)}throw(0,me.z)(Ie)}(Ie,ze):(0,d.Xf)(Ie)}},8421:(gt,Ae,V)=>{V.d(Ae,{Xf:()=>Ge});var d=V(655),te=V(1144),L=V(8239),ae=V(9751),se=V(3670),he=V(2206),ue=V(4532),fe=V(6495),ge=V(3260),$=V(576),W=V(7849),J=V(8822);function Ge(Re){if(Re instanceof ae.y)return Re;if(null!=Re){if((0,se.c)(Re))return function Pe(Re){return new ae.y(we=>{const Ie=Re[J.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,te.z)(Re))return function Ce(Re){return new ae.y(we=>{for(let Ie=0;Ie<Re.length&&!we.closed;Ie++)we.next(Re[Ie]);we.complete()})}(Re);if((0,L.t)(Re))return function ut(Re){return new ae.y(we=>{Re.then(Ie=>{we.closed||(we.next(Ie),we.complete())},Ie=>we.error(Ie)).then(null,W.h)})}(Re);if((0,he.D)(Re))return me(Re);if((0,fe.T)(Re))return function ye(Re){return new ae.y(we=>{for(const Ie of Re)if(we.next(Ie),we.closed)return;we.complete()})}(Re);if((0,ge.L)(Re))return function ot(Re){return me((0,ge.Q)(Re))}(Re)}throw(0,ue.z)(Re)}function me(Re){return new ae.y(we=>{(function dt(Re,we){var Ie,ze,Ke,G;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(Re);!(ze=yield Ie.next()).done;)if(we.next(ze.value),we.closed)return}catch(_e){Ke={error:_e}}finally{try{ze&&!ze.done&&(G=Ie.return)&&(yield G.call(Ie))}finally{if(Ke)throw Ke.error}}we.complete()})})(Re,we).catch(Ie=>we.error(Ie))})}},6451:(gt,Ae,V)=>{V.d(Ae,{T:()=>he});var d=V(8189),te=V(8421),L=V(515),ae=V(3269),se=V(8996);function he(...ue){const fe=(0,ae.yG)(ue),ge=(0,ae._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,te.Xf)($[0]):(0,d.J)(ge)((0,se.D)($,fe)):L.E}},5403:(gt,Ae,V)=>{V.d(Ae,{x:()=>te});var d=V(930);function te(ae,se,he,ue,fe){return new L(ae,se,he,ue,fe)}class L extends d.Lv{constructor(se,he,ue,fe,ge,$){super(se),this.onFinalize=ge,this.shouldUnsubscribe=$,this._next=he?function(W){try{he(W)}catch(J){se.error(J)}}:super._next,this._error=fe?function(W){try{fe(W)}catch(J){se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(gt,Ae,V)=>{V.d(Ae,{U:()=>L});var d=V(4482),te=V(5403);function L(ae,se){return(0,d.e)((he,ue)=>{let fe=0;he.subscribe((0,te.x)(ue,ge=>{ue.next(ae.call(se,ge,fe++))}))})}},8189:(gt,Ae,V)=>{V.d(Ae,{J:()=>L});var d=V(5577),te=V(4671);function L(ae=1/0){return(0,d.z)(te.y,ae)}},5577:(gt,Ae,V)=>{V.d(Ae,{z:()=>fe});var d=V(4004),te=V(8421),L=V(4482),ae=V(9672),se=V(5403),ue=V(576);function fe(ge,$,W=1/0){return(0,ue.m)($)?fe((J,Ge)=>(0,d.U)((Pe,Ce)=>$(J,Pe,Ge,Ce))((0,te.Xf)(ge(J,Ge))),W):("number"==typeof $&&(W=$),(0,L.e)((J,Ge)=>function he(ge,$,W,J,Ge,Pe,Ce,ut){const ye=[];let me=0,ot=0,dt=!1;const Re=()=>{dt&&!ye.length&&!me&&$.complete()},we=ze=>me<J?Ie(ze):ye.push(ze),Ie=ze=>{Pe&&$.next(ze),me++;let Ke=!1;(0,te.Xf)(W(ze,ot++)).subscribe((0,se.x)($,G=>{Ge?.(G),Pe?we(G):$.next(G)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(me--;ye.length&&me<J;){const G=ye.shift();Ce?(0,ae.f)($,Ce,()=>Ie(G)):Ie(G)}Re()}catch(G){$.error(G)}}))};return ge.subscribe((0,se.x)($,we,()=>{dt=!0,Re()})),()=>{ut?.()}}(J,Ge,ge,W)))}},5363:(gt,Ae,V)=>{V.d(Ae,{Q:()=>ae});var d=V(9672),te=V(4482),L=V(5403);function ae(se,he=0){return(0,te.e)((ue,fe)=>{ue.subscribe((0,L.x)(fe,ge=>(0,d.f)(fe,se,()=>fe.next(ge),he),()=>(0,d.f)(fe,se,()=>fe.complete(),he),ge=>(0,d.f)(fe,se,()=>fe.error(ge),he)))})}},3099:(gt,Ae,V)=>{V.d(Ae,{B:()=>se});var d=V(8421),te=V(7579),L=V(930),ae=V(4482);function se(ue={}){const{connector:fe=(()=>new te.x),resetOnError:ge=!0,resetOnComplete:$=!0,resetOnRefCountZero:W=!0}=ue;return J=>{let Ge,Pe,Ce,ut=0,ye=!1,me=!1;const ot=()=>{Pe?.unsubscribe(),Pe=void 0},dt=()=>{ot(),Ge=Ce=void 0,ye=me=!1},Re=()=>{const we=Ge;dt(),we?.unsubscribe()};return(0,ae.e)((we,Ie)=>{ut++,!me&&!ye&&ot();const ze=Ce=Ce??fe();Ie.add(()=>{ut--,0===ut&&!me&&!ye&&(Pe=he(Re,W))}),ze.subscribe(Ie),!Ge&&ut>0&&(Ge=new L.Hp({next:Ke=>ze.next(Ke),error:Ke=>{me=!0,ot(),Pe=he(dt,ge,Ke),ze.error(Ke)},complete:()=>{ye=!0,ot(),Pe=he(dt,$),ze.complete()}}),(0,d.Xf)(we).subscribe(Ge))})(J)}}function he(ue,fe,...ge){if(!0===fe)return void ue();if(!1===fe)return;const $=new L.Hp({next:()=>{$.unsubscribe(),ue()}});return fe(...ge).subscribe($)}},9468:(gt,Ae,V)=>{V.d(Ae,{R:()=>te});var d=V(4482);function te(L,ae=0){return(0,d.e)((se,he)=>{he.add(L.schedule(()=>se.subscribe(he),ae))})}},8505:(gt,Ae,V)=>{V.d(Ae,{b:()=>se});var d=V(576),te=V(4482),L=V(5403),ae=V(4671);function se(he,ue,fe){const ge=(0,d.m)(he)||ue||fe?{next:he,error:ue,complete:fe}:he;return ge?(0,te.e)(($,W)=>{var J;null===(J=ge.subscribe)||void 0===J||J.call(ge);let Ge=!0;$.subscribe((0,L.x)(W,Pe=>{var Ce;null===(Ce=ge.next)||void 0===Ce||Ce.call(ge,Pe),W.next(Pe)},()=>{var Pe;Ge=!1,null===(Pe=ge.complete)||void 0===Pe||Pe.call(ge),W.complete()},Pe=>{var Ce;Ge=!1,null===(Ce=ge.error)||void 0===Ce||Ce.call(ge,Pe),W.error(Pe)},()=>{var Pe,Ce;Ge&&(null===(Pe=ge.unsubscribe)||void 0===Pe||Pe.call(ge)),null===(Ce=ge.finalize)||void 0===Ce||Ce.call(ge)}))}):ae.y}},4408:(gt,Ae,V)=>{V.d(Ae,{o:()=>se});var d=V(727);class te extends d.w0{constructor(ue,fe){super()}schedule(ue,fe=0){return this}}const L={setInterval(he,ue,...fe){const{delegate:ge}=L;return ge?.setInterval?ge.setInterval(he,ue,...fe):setInterval(he,ue,...fe)},clearInterval(he){const{delegate:ue}=L;return(ue?.clearInterval||clearInterval)(he)},delegate:void 0};var ae=V(8737);class se extends te{constructor(ue,fe){super(ue,fe),this.scheduler=ue,this.work=fe,this.pending=!1}schedule(ue,fe=0){var ge;if(this.closed)return this;this.state=ue;const $=this.id,W=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(W,$,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(W,this.id,fe),this}requestAsyncId(ue,fe,ge=0){return L.setInterval(ue.flush.bind(ue,this),ge)}recycleAsyncId(ue,fe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return fe;null!=fe&&L.clearInterval(fe)}execute(ue,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ue,fe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,fe){let $,ge=!1;try{this.work(ue)}catch(W){ge=!0,$=W||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:fe}=this,{actions:ge}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ge,this),null!=ue&&(this.id=this.recycleAsyncId(fe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Ae,V)=>{V.d(Ae,{v:()=>L});var d=V(6063);class te{constructor(se,he=te.now){this.schedulerActionCtor=se,this.now=he}schedule(se,he=0,ue){return new this.schedulerActionCtor(this,se).schedule(ue,he)}}te.now=d.l.now;class L extends te{constructor(se,he=te.now){super(se,he),this.actions=[],this._active=!1}flush(se){const{actions:he}=this;if(this._active)return void he.push(se);let ue;this._active=!0;do{if(ue=se.execute(se.state,se.delay))break}while(se=he.shift());if(this._active=!1,ue){for(;se=he.shift();)se.unsubscribe();throw ue}}}},4986:(gt,Ae,V)=>{V.d(Ae,{P:()=>ae,z:()=>L});var d=V(4408);const L=new(V(7565).v)(d.o),ae=L},6063:(gt,Ae,V)=>{V.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(gt,Ae,V)=>{V.d(Ae,{z:()=>d});const d={setTimeout(te,L,...ae){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(te,L,...ae):setTimeout(te,L,...ae)},clearTimeout(te){const{delegate:L}=d;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(gt,Ae,V)=>{V.d(Ae,{h:()=>te});const te=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Ae,V)=>{V.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gt,Ae,V)=>{V.d(Ae,{_6:()=>he,jO:()=>ae,yG:()=>se});var d=V(576),te=V(3532);function L(ue){return ue[ue.length-1]}function ae(ue){return(0,d.m)(L(ue))?ue.pop():void 0}function se(ue){return(0,te.K)(L(ue))?ue.pop():void 0}function he(ue,fe){return"number"==typeof L(ue)?ue.pop():fe}},8737:(gt,Ae,V)=>{function d(te,L){if(te){const ae=te.indexOf(L);0<=ae&&te.splice(ae,1)}}V.d(Ae,{P:()=>d})},3888:(gt,Ae,V)=>{function d(te){const ae=te(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Ae,{d:()=>d})},2806:(gt,Ae,V)=>{V.d(Ae,{O:()=>ae,x:()=>L});var d=V(2416);let te=null;function L(se){if(d.v.useDeprecatedSynchronousErrorHandling){const he=!te;if(he&&(te={errorThrown:!1,error:null}),se(),he){const{errorThrown:ue,error:fe}=te;if(te=null,ue)throw fe}}else se()}function ae(se){d.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(gt,Ae,V)=>{function d(te,L,ae,se=0,he=!1){const ue=L.schedule(function(){ae(),he?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(ue),!he)return ue}V.d(Ae,{f:()=>d})},4671:(gt,Ae,V)=>{function d(te){return te}V.d(Ae,{y:()=>d})},1144:(gt,Ae,V)=>{V.d(Ae,{z:()=>d});const d=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(gt,Ae,V)=>{V.d(Ae,{D:()=>te});var d=V(576);function te(L){return Symbol.asyncIterator&&(0,d.m)(L?.[Symbol.asyncIterator])}},576:(gt,Ae,V)=>{function d(te){return"function"==typeof te}V.d(Ae,{m:()=>d})},3670:(gt,Ae,V)=>{V.d(Ae,{c:()=>L});var d=V(8822),te=V(576);function L(ae){return(0,te.m)(ae[d.L])}},6495:(gt,Ae,V)=>{V.d(Ae,{T:()=>L});var d=V(2202),te=V(576);function L(ae){return(0,te.m)(ae?.[d.h])}},8239:(gt,Ae,V)=>{V.d(Ae,{t:()=>te});var d=V(576);function te(L){return(0,d.m)(L?.then)}},3260:(gt,Ae,V)=>{V.d(Ae,{L:()=>ae,Q:()=>L});var d=V(655),te=V(576);function L(se){return(0,d.FC)(this,arguments,function*(){const ue=se.getReader();try{for(;;){const{value:fe,done:ge}=yield(0,d.qq)(ue.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(fe)}}finally{ue.releaseLock()}})}function ae(se){return(0,te.m)(se?.getReader)}},3532:(gt,Ae,V)=>{V.d(Ae,{K:()=>te});var d=V(576);function te(L){return L&&(0,d.m)(L.schedule)}},4482:(gt,Ae,V)=>{V.d(Ae,{A:()=>te,e:()=>L});var d=V(576);function te(ae){return(0,d.m)(ae?.lift)}function L(ae){return se=>{if(te(se))return se.lift(function(he){try{return ae(he,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,Ae,V)=>{function d(){}V.d(Ae,{Z:()=>d})},9635:(gt,Ae,V)=>{V.d(Ae,{U:()=>L,z:()=>te});var d=V(4671);function te(...ae){return L(ae)}function L(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(he){return ae.reduce((ue,fe)=>fe(ue),he)}}},7849:(gt,Ae,V)=>{V.d(Ae,{h:()=>L});var d=V(2416),te=V(3410);function L(ae){te.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw ae;se(ae)})}},4532:(gt,Ae,V)=>{function d(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ae,{z:()=>d})},655:(gt,Ae,V)=>{function ae(Y,ne){var oe={};for(var ie in Y)Object.prototype.hasOwnProperty.call(Y,ie)&&ne.indexOf(ie)<0&&(oe[ie]=Y[ie]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ie=Object.getOwnPropertySymbols(Y);Ue<ie.length;Ue++)ne.indexOf(ie[Ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,ie[Ue])&&(oe[ie[Ue]]=Y[ie[Ue]])}return oe}function fe(Y,ne,oe,ie){return new(oe||(oe=Promise))(function(Ve,vt){function cn(_n){try{tt(ie.next(_n))}catch(xn){vt(xn)}}function zt(_n){try{tt(ie.throw(_n))}catch(xn){vt(xn)}}function tt(_n){_n.done?Ve(_n.value):function Ue(Ve){return Ve instanceof oe?Ve:new oe(function(vt){vt(Ve)})}(_n.value).then(cn,zt)}tt((ie=ie.apply(Y,ne||[])).next())})}function ye(Y){return this instanceof ye?(this.v=Y,this):new ye(Y)}function me(Y,ne,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ie=oe.apply(Y,ne||[]),Ve=[];return Ue={},vt("next"),vt("throw"),vt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function vt(on){ie[on]&&(Ue[on]=function(dn){return new Promise(function(Qr,Vt){Ve.push([on,dn,Qr,Vt])>1||cn(on,dn)})})}function cn(on,dn){try{!function zt(on){on.value instanceof ye?Promise.resolve(on.value.v).then(tt,_n):xn(Ve[0][2],on)}(ie[on](dn))}catch(Qr){xn(Ve[0][3],Qr)}}function tt(on){cn("next",on)}function _n(on){cn("throw",on)}function xn(on,dn){on(dn),Ve.shift(),Ve.length&&cn(Ve[0][0],Ve[0][1])}}function dt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ne=Y[Symbol.asyncIterator];return ne?ne.call(Y):(Y=function J(Y){var ne="function"==typeof Symbol&&Symbol.iterator,oe=ne&&Y[ne],ie=0;if(oe)return oe.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ie>=Y.length&&(Y=void 0),{value:Y&&Y[ie++],done:!Y}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),oe={},ie("next"),ie("throw"),ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ie(Ve){oe[Ve]=Y[Ve]&&function(vt){return new Promise(function(cn,zt){!function Ue(Ve,vt,cn,zt){Promise.resolve(zt).then(function(tt){Ve({value:tt,done:cn})},vt)}(cn,zt,(vt=Y[Ve](vt)).done,vt.value)})}}}V.d(Ae,{FC:()=>me,KL:()=>dt,_T:()=>ae,mG:()=>fe,qq:()=>ye})},4650:(gt,Ae,V)=>{V.d(Ae,{$8M:()=>Iu,$Z:()=>hE,AFp:()=>TT,AaK:()=>fe,CHM:()=>au,CRH:()=>eb,CZH:()=>Vl,CqO:()=>m0,D6c:()=>be,EJc:()=>MT,EpF:()=>XE,F$t:()=>sC,F4k:()=>g0,FYo:()=>A,FiY:()=>qe,G48:()=>KM,Gf:()=>pT,GfV:()=>He,Gpc:()=>W,Hsn:()=>oC,Ikx:()=>I0,JOm:()=>Ha,KtG:()=>lu,LFG:()=>Qn,LMc:()=>Mb,LSH:()=>lp,Lbi:()=>AM,Lck:()=>qC,MAs:()=>KE,MGl:()=>Vp,MMx:()=>j0,NdJ:()=>m_,OlP:()=>Mn,Oqu:()=>Pl,PXZ:()=>GM,Q6J:()=>ZE,QGY:()=>p0,QP$:()=>an,QbO:()=>MM,Qsj:()=>k,QtT:()=>zu,R0b:()=>xo,RDi:()=>av,Rgc:()=>qh,SBq:()=>g,SDv:()=>$u,Sil:()=>OM,Suo:()=>gT,TTD:()=>Is,TgZ:()=>wr,Tol:()=>Xn,Udp:()=>lC,VKq:()=>Jp,W1O:()=>Td,WLB:()=>eT,X6Q:()=>qM,XFs:()=>rt,Xpm:()=>Me,Xts:()=>Qc,Y36:()=>Ph,YKP:()=>B0,YNc:()=>sA,Yjl:()=>Ee,Yz7:()=>dn,Z0I:()=>Ds,ZZ4:()=>Ib,_Bn:()=>ua,_UZ:()=>QE,_Vd:()=>ku,_c5:()=>Cn,_uU:()=>Hp,aQg:()=>Nb,c2e:()=>AT,cJS:()=>Vt,cg1:()=>$p,dDg:()=>BM,dqk:()=>gn,eFA:()=>bb,ekj:()=>__,eoX:()=>_b,f3M:()=>I,g9A:()=>ST,h0i:()=>wd,hGG:()=>Ab,hij:()=>Gp,iGM:()=>fT,ifc:()=>mt,ip1:()=>dg,jDz:()=>H0,kEZ:()=>R_,kL8:()=>TC,lG2:()=>Q,lqb:()=>wi,lri:()=>PT,n5z:()=>Rs,oAB:()=>Ut,oxw:()=>iC,pQV:()=>P0,q4F:()=>st,qLn:()=>Ah,qOj:()=>GE,qZA:()=>h0,rWj:()=>FT,s9C:()=>_0,sBO:()=>YM,sIi:()=>Mp,s_b:()=>F_,soG:()=>Xh,tb:()=>NT,tp0:()=>St,uIk:()=>WE,vHH:()=>Ce,vpe:()=>Xi,wAp:()=>Mt,xp6:()=>Oh,z2F:()=>ef,zSh:()=>Xc,zs3:()=>cd});var d=V(7579),te=V(727),L=V(9751),ae=V(6451),se=V(3099);function he(o){for(let a in o)if(o[a]===he)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ge(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=he({__forward_ref__:he});function W(o){return o.__forward_ref__=W,o.toString=function(){return fe(this())},o}function J(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===W}class Ce extends Error{constructor(a,u){super(function ut(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function we(o,a){throw new Ce(-201,!1)}function tt(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}function dn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Vt(o){return{providers:o.providers||[],imports:o.imports||[]}}function yn(o){return Hi(o,Gi)||Hi(o,Ii)}function Ds(o){return null!==yn(o)}function Hi(o,a){return o.hasOwnProperty(a)?o[a]:null}function eo(o){return o&&(o.hasOwnProperty(hi)||o.hasOwnProperty(ba))?o[hi]:null}const Gi=he({\u0275prov:he}),hi=he({\u0275inj:he}),Ii=he({ngInjectableDef:he}),ba=he({ngInjectorDef:he});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let Wr;function pr(o){const a=Wr;return Wr=o,a}function Si(o,a,u){const h=yn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&rt.Optional?null:void 0!==a?a:void we(fe(o))}function Wn(o){return{toString:o}.toString()}var lr=(()=>((lr=lr||{})[lr.OnPush=0]="OnPush",lr[lr.Default=1]="Default",lr))(),mt=(()=>{return(o=mt||(mt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",mt;var o})();const gn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fi={},xt=[],Es=he({\u0275cmp:he}),hn=he({\u0275dir:he}),$i=he({\u0275pipe:he}),fn=he({\u0275mod:he}),gr=he({\u0275fac:he}),ei=he({__NG_ELEMENT_ID__:he});let lt=0;function Me(o){return Wn(()=>{const u=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===lr.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||xt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||mt.Emulated,id:"c"+lt++,styles:o.styles||xt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,b=o.features;return f.inputs=j(o.inputs,h),f.outputs=j(o.outputs),b&&b.forEach(E=>E(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Nt).filter(It):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(yt).filter(It):null,f})}function Nt(o){return ee(o)||Qe(o)}function It(o){return null!==o}function Ut(o){return Wn(()=>({type:o.type,bootstrap:o.bootstrap||xt,declarations:o.declarations||xt,imports:o.imports||xt,exports:o.exports||xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function j(o,a){if(null==o)return fi;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const Q=Me;function Ee(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ee(o){return o[Es]||null}function Qe(o){return o[hn]||null}function yt(o){return o[$i]||null}function an(o){const a=ee(o)||Qe(o)||yt(o);return null!==a&&a.standalone}function Sn(o,a){const u=o[fn]||null;if(!u&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return u}function Ar(o){return Array.isArray(o)&&"object"==typeof o[1]}function ti(o){return Array.isArray(o)&&!0===o[1]}function Yl(o){return 0!=(8&o.flags)}function il(o){return 2==(2&o.flags)}function _c(o){return 1==(1&o.flags)}function zr(o){return null!==o.template}function Lf(o){return 0!=(256&o[2])}function us(o,a){return o.hasOwnProperty(gr)?o[gr]:null}class Ts{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Is(){return jo}function jo(o){return o.type.prototype.ngOnChanges&&(o.setInput=Jl),sl}function sl(){const o=Uf(this),a=o?.current;if(a){const u=o.previous;if(u===fi)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Jl(o,a,u,h){const f=Uf(o)||function Mr(o,a){return o[bc]=a}(o,{previous:fi,current:null}),m=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[u],T=b[E];m[E]=new Ts(T&&T.currentValue,a,b===fi),o[h]=a}Is.ngInherit=!0;const bc="__ngSimpleChanges__";function Uf(o){return o[bc]||null}function zn(o){for(;Array.isArray(o);)o=o[0];return o}function Mi(o,a){return zn(a[o])}function ni(o,a){return zn(a[o.index])}function Ea(o,a){return o.data[a]}function tn(o,a){const u=a[o];return Ar(u)?u:u[0]}function Ho(o){return 64==(64&o[2])}function zi(o,a){return null==a?null:o[a]}function ru(o){o[18]=0}function Hn(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Rt={lFrame:xc(null),bindingsEnabled:!0};function As(){return Rt.bindingsEnabled}function xe(){return Rt.lFrame.lView}function Kt(){return Rt.lFrame.tView}function au(o){return Rt.lFrame.contextLView=o,o[8]}function lu(o){return Rt.lFrame.contextLView=null,o}function qn(){let o=uu();for(;null!==o&&64===o.type;)o=o.parent;return o}function uu(){return Rt.lFrame.currentTNode}function Ca(){const o=Rt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function xi(o,a){const u=Rt.lFrame;u.currentTNode=o,u.isParent=a}function al(){return Rt.lFrame.isParent}function ll(){Rt.lFrame.isParent=!1}function Kn(){const o=Rt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Go(){return Rt.lFrame.bindingIndex++}function Ms(o){const a=Rt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function cl(o){Rt.lFrame.inI18n=o}function ym(o,a){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=o,cu(a)}function cu(o){Rt.lFrame.currentDirectiveIndex=o}function Nc(){return Rt.lFrame.currentQueryIndex}function hl(o){Rt.lFrame.currentQueryIndex=o}function Ac(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function du(o,a,u){if(u&rt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&rt.Host||(f=Ac(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=Rt.lFrame=Mc();return h.currentTNode=a,h.lView=o,!0}function hu(o){const a=Mc(),u=o[1];Rt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Mc(){const o=Rt.lFrame,a=null===o?null:o.child;return null===a?xc(o):a}function xc(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Rc(){const o=Rt.lFrame;return Rt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Jd=Rc;function $o(){const o=Rc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function yr(){return Rt.lFrame.selectedIndex}function mi(o){Rt.lFrame.selectedIndex=o}function On(){const o=Rt.lFrame;return Ea(o.tView,o.selectedIndex)}function gu(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:N,ngOnDestroy:O}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),E&&((o.contentHooks||(o.contentHooks=[])).push(u,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,E)),T&&(o.viewHooks||(o.viewHooks=[])).push(-u,T),N&&((o.viewHooks||(o.viewHooks=[])).push(u,N),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,N)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(u,O)}}function zo(o,a,u){Ia(o,a,3,u)}function Ta(o,a,u,h){(3&o[2])===u&&Ia(o,a,u,h)}function th(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Ia(o,a,u,h){const m=h??-1,b=a.length-1;let E=0;for(let T=void 0!==h?65535&o[18]:0;T<b;T++)if("number"==typeof a[T+1]){if(E=a[T],null!=h&&E>=h)break}else a[T]<0&&(o[18]+=65536),(E<m||-1==m)&&(nh(o,u,a,T),o[18]=(4294901760&o[18])+T+2),T++}function nh(o,a,u,h){const f=u[h]<0,m=u[h+1],E=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class co{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Sa(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],b=u[h++],E=u[h++];o.setAttribute(a,b,E,m)}else{const m=f,b=u[++h];vu(m)?o.setProperty(a,m,b):o.setAttribute(a,m,b),h++}}return h}function Zo(o){return 3===o||4===o||6===o}function vu(o){return 64===o.charCodeAt(0)}function fl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||ih(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function ih(o,a,u,h,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function sh(o){return-1!==o}function xr(o){return 32767&o}function gl(o,a){let u=function pl(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let ds=!0;function ml(o){const a=ds;return ds=o,a}let nr=0;const qi={};function Yo(o,a){const u=wu(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,yl(h.data,o),yl(a,null),yl(h.blueprint,null));const f=Du(o,a),m=o.injectorIndex;if(sh(f)){const b=xr(f),E=gl(f,a),T=E[1].data;for(let N=0;N<8;N++)a[m+N]=E[b+N]|T[b+N]}return a[m+8]=f,m}function yl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function wu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Du(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=Ma(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function ho(o,a,u){!function bu(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(ei)&&(h=u[ei]),null==h&&(h=u[ei]=nr++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function fo(o,a,u){if(u&rt.Optional||void 0!==o)return o;we()}function Eu(o,a,u,h){if(u&rt.Optional&&void 0===h&&(h=null),0==(u&(rt.Self|rt.Host))){const f=o[9],m=pr(void 0);try{return f?f.get(a,h,u&rt.Optional):Si(a,h,u&rt.Optional)}finally{pr(m)}}return fo(h,0,u)}function Qo(o,a,u,h=rt.Default,f){if(null!==o){if(1024&a[2]){const b=function Aa(o,a,u,h,f){let m=o,b=a;for(;null!==m&&null!==b&&1024&b[2]&&!(256&b[2]);){const E=vl(m,b,u,h|rt.Self,qi);if(E!==qi)return E;let T=m.parent;if(!T){const N=b[21];if(N){const O=N.get(u,qi,h);if(O!==qi)return O}T=Ma(b),b=b[15]}m=T}return f}(o,a,u,h,qi);if(b!==qi)return b}const m=vl(o,a,u,h,qi);if(m!==qi)return m}return Eu(a,u,h,f)}function vl(o,a,u,h,f){const m=function Fc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ei)?o[ei]:void 0;return"number"==typeof a?a>=0?255&a:Lc:a}(u);if("function"==typeof m){if(!du(a,o,h))return h&rt.Host?fo(f,0,h):Eu(a,u,h,f);try{const b=m(h);if(null!=b||h&rt.Optional)return b;we()}finally{Jd()}}else if("number"==typeof m){let b=null,E=wu(o,a),T=-1,N=h&rt.Host?a[16][6]:null;for((-1===E||h&rt.SkipSelf)&&(T=-1===E?Du(o,a):a[E+8],-1!==T&&bl(h,!1)?(b=a[1],E=xr(T),a=gl(T,a)):E=-1);-1!==E;){const O=a[1];if(Cu(m,E,O.data)){const B=lh(E,a,u,b,h,N);if(B!==qi)return B}T=a[E+8],-1!==T&&bl(h,a[1].data[E+8]===N)&&Cu(m,E,a)?(b=O,E=xr(T),a=gl(T,a)):E=-1}}return f}function lh(o,a,u,h,f,m){const b=a[1],E=b.data[o+8],O=Na(E,b,u,null==h?il(E)&&ds:h!=b&&0!=(3&E.type),f&rt.Host&&m===E);return null!==O?xs(a,b,O,E):qi}function Na(o,a,u,h,f){const m=o.providerIndexes,b=a.data,E=1048575&m,T=o.directiveStart,O=m>>20,q=f?E+O:o.directiveEnd;for(let re=h?E:E+O;re<q;re++){const De=b[re];if(re<T&&u===De||re>=T&&De.type===u)return re}if(f){const re=b[T];if(re&&zr(re)&&re.type===u)return T}return null}function xs(o,a,u,h){let f=o[u];const m=a.data;if(function qo(o){return o instanceof co}(f)){const b=f;b.resolving&&function ot(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${o}${u}`)}(function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}(m[u]));const E=ml(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?pr(b.injectImpl):null;du(o,h,rt.Default);try{f=o[u]=b.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function eh(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const b=jo(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==T&&pr(T),ml(E),b.resolving=!1,Jd()}}return f}function Cu(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function bl(o,a){return!(o&rt.Self||o&rt.Host&&a)}class Jo{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Qo(this._tNode,this._lView,a,h,u)}}function Lc(){return new Jo(qn(),xe())}function Rs(o){return Wn(()=>{const a=o.prototype.constructor,u=a[gr]||Tu(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[gr]||Tu(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Tu(o){return Ge(o)?()=>{const a=Tu(J(o));return a&&a()}:us(o)}function Ma(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Iu(o){return function ah(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(Zo(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(qn(),o)}const po="__parameters__";function Oa(o,a,u){return Wn(()=>{const h=function Su(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const b=new f(...m);return E.annotation=b,E;function E(T,N,O){const B=T.hasOwnProperty(po)?T[po]:Object.defineProperty(T,po,{value:[]})[po];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(b),T}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Mn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=dn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Je(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),Je(h,a)):a!==o&&a.push(h)}return a}function nn(o,a){o.forEach(u=>Array.isArray(u)?nn(u,a):a(u))}function Ki(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Vn(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function mo(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function vi(o,a,u){let h=Gn(o,a);return h>=0?o[1|h]=u:(h=~h,function Bc(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Dl(o,a){const u=Gn(o,a);if(u>=0)return o[1|u]}function Gn(o,a){return function Cl(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),b=o[m<<u];if(a===b)return m<<u;b>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Zi={},Hc="__NG_DI_FLAG__",Yn="ngTempTokenPath",Gc=/\n/gm,dh="__source";let ta;function _o(o){const a=ta;return ta=o,a}function na(o,a=rt.Default){if(void 0===ta)throw new Ce(-203,!1);return null===ta?Si(o,void 0,a):ta.get(o,a&rt.Optional?null:void 0,a)}function Qn(o,a=rt.Default){return(function to(){return Wr}()||na)(J(o),a)}function I(o,a=rt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Qn(o,a)}function S(o){const a=[];for(let u=0;u<o.length;u++){const h=J(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ce(900,!1);let f,m=rt.Default;for(let b=0;b<h.length;b++){const E=h[b],T=U(E);"number"==typeof T?-1===T?f=E.token:m|=T:f=E}a.push(Qn(f,m))}else a.push(Qn(h))}return a}function x(o,a){return o[Hc]=a,o.prototype[Hc]=a,o}function U(o){return o[Hc]}const qe=x(Oa("Optional"),8),St=x(Oa("SkipSelf"),4);let Yf,ia;function av(o){Yf=o}function Yi(o){return function Qf(){if(void 0===ia&&(ia=null,gn.trustedTypes))try{ia=gn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ia}()?.createHTML(o)||o}class zc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ls(o){return o instanceof zc?o.changingThisBreaksApplicationSecurity:o}class gh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Yi(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class km{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Yi(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Yi(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Pa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function qc(o){return(o=String(o)).match(Pa)?o:"unsafe:"+o}function ps(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Fa(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const ip=ps("area,br,col,hr,img,wbr"),Kc=ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),si=ps("rp,rt"),Pm=Fa(ip,Fa(Kc,ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fa(si,ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fa(si,Kc)),Ru=ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zc=Fa(Ru,ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Or=(()=>((Or=Or||{})[Or.NONE=0]="NONE",Or[Or.HTML=1]="HTML",Or[Or.STYLE=2]="STYLE",Or[Or.SCRIPT=3]="SCRIPT",Or[Or.URL=4]="URL",Or[Or.RESOURCE_URL=5]="RESOURCE_URL",Or))();function lp(o){const a=function Nl(){const o=xe();return o&&o[12]}();return a?a.sanitize(Or.URL,o)||"":function xu(o,a){const u=function np(o){return o instanceof zc&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}(o,"URL")?Ls(o):qc(ye(o))}const Qc=new Mn("ENVIRONMENT_INITIALIZER"),cp=new Mn("INJECTOR",-1),Jc=new Mn("INJECTOR_DEF_TYPES");class dp{get(a,u=Zi){if(u===Zi){const h=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw h.name="NullInjectorError",h}return u}}function hp(...o){return{\u0275providers:Al(0,o)}}function Al(o,...a){const u=[],h=new Set;let f;return nn(a,m=>{const b=m;fp(b,u,[],h)&&(f||(f=[]),f.push(b))}),void 0!==f&&Va(f,u),u}function Va(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];nn(f,m=>{a.push(m)})}}function fp(o,a,u,h){if(!(o=J(o)))return!1;let f=null,m=eo(o);const b=!m&&ee(o);if(m||b){if(b&&!b.standalone)return!1;f=o}else{const T=o.ngModule;if(m=eo(T),!m)return!1;f=T}const E=h.has(f);if(b){if(E)return!1;if(h.add(f),b.dependencies){const T="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const N of T)fp(N,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!E){let N;h.add(f);try{nn(m.imports,O=>{fp(O,a,u,h)&&(N||(N=[]),N.push(O))})}finally{}void 0!==N&&Va(N,a)}if(!E){const N=us(f)||(()=>new f);a.push({provide:f,useFactory:N,deps:xt},{provide:Jc,useValue:f,multi:!0},{provide:Qc,useValue:()=>Qn(f),multi:!0})}const T=m.providers;null==T||E||nn(T,O=>{a.push(O)})}}return f!==o&&void 0!==o.providers}const vh=he({provide:String,useValue:he});function $m(o){return null!==o&&"object"==typeof o&&vh in o}function Vs(o){return"function"==typeof o}const Xc=new Mn("Set Injector scope."),Ba={},wh={};let Dh;function Eh(){return void 0===Dh&&(Dh=new dp),Dh}class wi{}class pp extends wi{constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sa(a,b=>this.processProvider(b)),this.records.set(cp,vr(void 0,this)),f.has("environment")&&this.records.set(wi,vr(void 0,this));const m=this.records.get(Xc);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Jc.multi,xt,rt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=_o(this),h=pr(void 0);try{return a()}finally{_o(u),pr(h)}}get(a,u=Zi,h=rt.Default){this.assertNotDestroyed();const f=_o(this),m=pr(void 0);try{if(!(h&rt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const T=function gv(o){return"function"==typeof o||"object"==typeof o&&o instanceof Mn}(a)&&yn(a);E=T&&this.injectableDefInScope(T)?vr(Ch(a),Ba):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(h&rt.Self?Eh():this.parent).get(a,u=h&rt.Optional&&u===Zi?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Yn]=b[Yn]||[]).unshift(fe(a)),f)throw b;return function X(o,a,u,h){const f=o[Yn];throw a[dh]&&f.unshift(a[dh]),o.message=function le(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];m.push(b+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(Gc,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Yn]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{pr(m),_o(f)}}resolveInjectorInitializers(){const a=_o(this),u=pr(void 0);try{const h=this.get(Qc.multi,xt,rt.Self);for(const f of h)f()}finally{_o(a),pr(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(fe(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(a){let u=Vs(a=J(a))?a:J(a&&a.provide);const h=function CD(o){return $m(o)?vr(void 0,o.useValue):vr(gp(o),Ba)}(a);if(Vs(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=vr(void 0,Ba,!0),f.factory=()=>S(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Ba&&(u.value=wh,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ed(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=J(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Ch(o){const a=yn(o),u=null!==a?a.factory:us(o);if(null!==u)return u;if(o instanceof Mn)throw new Ce(204,!1);if(o instanceof Function)return function pv(o){const a=o.length;if(a>0)throw mo(a,"?"),new Ce(204,!1);const u=function Jr(o){const a=o&&(o[Gi]||o[Ii]);if(a){const u=function Xr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ce(204,!1)}function gp(o,a,u){let h;if(Vs(o)){const f=J(o);return us(f)||Ch(f)}if($m(o))h=()=>J(o.useValue);else if(function vo(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...S(o.deps||[]));else if(function qr(o){return!(!o||!o.useExisting)}(o))h=()=>Qn(J(o.useExisting));else{const f=J(o&&(o.useClass||o.provide));if(!function Wm(o){return!!o.deps}(o))return us(f)||Ch(f);h=()=>new f(...S(o.deps))}return h}function vr(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function bo(o){return!!o.\u0275providers}function sa(o,a){for(const u of o)Array.isArray(u)?sa(u,a):bo(u)?sa(u.\u0275providers,a):a(u)}class qm{}class Zm{resolveComponentFactory(a){throw function mv(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let ku=(()=>{class o{}return o.NULL=new Zm,o})();function td(){return v(qn(),xe())}function v(o,a){return new g(ni(o,a))}let g=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=td,o})();function _(o){return o instanceof g?o.nativeElement:o}class A{}let k=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Z(){const o=xe(),u=tn(qn().index,o);return(Ar(u)?u:o)[11]}(),o})(),de=(()=>{class o{}return o.\u0275prov=dn({token:o,providedIn:"root",factory:()=>null}),o})();class He{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const st=new He("14.2.7"),Ct={};function vp(o){return o.ngOriginalError}class Ah{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&vp(a);for(;u&&vp(u);)u=vp(u);return u||null}}const O1=/^>|^->|<!--|-->|--!>|<!-$/g,bv=/(<|>)/;const Jm=new Map;let V1=0;const Iv="__ngContext__";function Di(o,a){Ar(a)?(o[Iv]=a[20],function Ev(o){Jm.set(o[20],o)}(a)):o[Iv]=a}function ja(o){return o instanceof Function?o():o}var Ha=(()=>((Ha=Ha||{})[Ha.Important=1]="Important",Ha[Ha.DashCase=2]="DashCase",Ha))();let BD;function UD(o,a){return BD(o,a)}function gs(o){const a=o[3];return ti(a)?a[3]:a}function Ji(o){return wo(o[13])}function Bs(o){return wo(o[4])}function wo(o){for(;null!==o&&!ti(o);)o=o[4];return o}function Pu(o,a,u,h,f){if(null!=h){let m,b=!1;ti(h)?m=h:Ar(h)&&(b=!0,h=h[0]);const E=zn(h);0===o&&null!==u?null==f?Us(a,u,E):od(a,u,E,f||null,!0):1===o&&null!==u?od(a,u,E,f||null,!0):2===o?JD(a,E,b):3===o&&a.destroyNode(E),null!=m&&function Tp(o,a,u,h,f){const m=u[7];m!==zn(u)&&Pu(a,o,h,m,f);for(let E=10;E<u.length;E++){const T=u[E];Lu(T[1],T,o,a,h,m)}}(a,o,m,u,f)}}function id(o,a){return o.createText(a)}function sd(o,a,u){o.setValue(a,u)}function Dp(o,a){return o.createComment(function wv(o){return o.replace(O1,a=>a.replace(bv,"\u200b$1\u200b"))}(a))}function Sv(o,a,u){return o.createElement(a,u)}function zD(o,a){const u=o[9],h=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Hn(f,-1)),u.splice(h,1)}function Nv(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&zD(f,h),a>0&&(o[u-1][4]=h[4]);const m=Vn(o,10+a);!function GD(o,a){Lu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function qD(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&Lu(o,a,u,3,null,null),function $D(o){let a=o[13];if(!a)return Av(o[1],o);for(;a;){let u=null;if(Ar(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Ar(a)&&Av(a[1],a),a=a[3];null===a&&(a=o),Ar(a)&&Av(a[1],a),u=a&&a[4]}a=u}}(a)}}function Av(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function K1(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof co)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const E=f[m[b]],T=m[b+1];try{T.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function q1(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],E="function"==typeof b?b(a):zn(a[b]),T=h[f=u[m+2]],N=u[m+3];"boolean"==typeof N?E.removeEventListener(u[m],T,N):N>=0?h[f=N]():h[f=-N].unsubscribe(),m+=2}else{const b=h[f=u[m+1]];u[m].call(b)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&ti(a[3])){u!==a[3]&&zD(u,a);const h=a[19];null!==h&&h.detachView(o)}!function SD(o){Jm.delete(o[20])}(a)}}function KD(o,a,u){return ZD(o,a.parent,u)}function ZD(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===mt.None||f===mt.Emulated)return null}return ni(h,u)}function od(o,a,u,h,f){o.insertBefore(a,u,h,f)}function Us(o,a,u){o.appendChild(a,u)}function Fu(o,a,u,h,f){null!==h?od(o,a,u,h,f):Us(o,a,u)}function oa(o,a){return o.parentNode(a)}function Cp(o,a,u){return t_(o,a,u)}function ld(o,a,u){return 40&o.type?ni(o,u):null}let n_,t_=ld;function ud(o,a){t_=o,n_=a}function Mh(o,a,u,h){const f=KD(o,h,a),m=a[11],E=Cp(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let T=0;T<u.length;T++)Fu(m,f,u[T],E,!1);else Fu(m,f,u,E,!1);void 0!==n_&&n_(m,h,a,u,f)}function xh(o,a){if(null!==a){const u=a.type;if(3&u)return ni(a,o);if(4&u)return aa(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return xh(o,h);{const f=o[a.index];return ti(f)?aa(-1,f):zn(f)}}if(32&u)return UD(a,o)()||zn(o[a.index]);{const h=QD(o,a);return null!==h?Array.isArray(h)?h[0]:xh(gs(o[16]),h):xh(o,a.next)}}return null}function QD(o,a){return null!==a?o[16][6].projection[a.projection]:null}function aa(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return xh(h,f)}return a[7]}function JD(o,a,u){const h=oa(o,a);h&&function Eo(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}function Co(o,a,u,h,f,m,b){for(;null!=u;){const E=h[u.index],T=u.type;if(b&&0===a&&(E&&Di(zn(E),h),u.flags|=4),64!=(64&u.flags))if(8&T)Co(o,a,u.child,h,f,m,!1),Pu(a,o,f,E,m);else if(32&T){const N=UD(u,h);let O;for(;O=N();)Pu(a,o,f,O,m);Pu(a,o,f,E,m)}else 16&T?xv(o,a,h,u,f,m):Pu(a,o,f,E,m);u=b?u.projectionNext:u.next}}function Lu(o,a,u,h,f,m){Co(u,h,o.firstChild,a,f,m,!1)}function xv(o,a,u,h,f,m){const b=u[16],T=b[6].projection[h.projection];if(Array.isArray(T))for(let N=0;N<T.length;N++)Pu(a,o,f,T[N],m);else Co(o,a,T,b[3],f,m,!0)}function Rv(o,a,u){o.setAttribute(a,"style",u)}function Ov(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Rh(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const r_="ng-template";function Q1(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==Rh(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function kv(o){return 4===o.type&&o.value!==r_}function J1(o,a,u){return a===(4!==o.type||u?o.value:r_)}function X1(o,a,u){let h=4;const f=o.attrs||[],m=function eE(o){for(let a=0;a<o.length;a++)if(Zo(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const T=a[E];if("number"!=typeof T){if(!b)if(4&h){if(h=2|1&h,""!==T&&!J1(o,T,u)||""===T&&1===a.length){if(Ri(h))return!1;b=!0}}else{const N=8&h?T:a[++E];if(8&h&&null!==o.attrs){if(!Q1(o.attrs,N,u)){if(Ri(h))return!1;b=!0}continue}const B=Pv(8&h?"class":T,f,kv(o),u);if(-1===B){if(Ri(h))return!1;b=!0;continue}if(""!==N){let q;q=B>m?"":f[B+1].toLowerCase();const re=8&h?q:null;if(re&&-1!==Rh(re,N,0)||2&h&&N!==q){if(Ri(h))return!1;b=!0}}}}else{if(!b&&!Ri(h)&&!Ri(T))return!1;if(b&&Ri(T))continue;b=!1,h=T|1&h}}return Ri(h)||b}function Ri(o){return 0==(1&o)}function Pv(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function tE(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Fv(o,a,u=!1){for(let h=0;h<a.length;h++)if(X1(o,a[h],u))return!0;return!1}function Lv(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function nE(o,a){return o?":not("+a.trim()+")":a}function eN(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&h){const E=o[++u];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!Ri(b)&&(a+=nE(m,f),f=""),h=b,m=m||!Ri(h);u++}return""!==f&&(a+=nE(m,f)),a}const Ht={};function Oh(o){rE(Kt(),xe(),yr()+o,!1)}function rE(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&zo(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Ta(a,m,0,u)}mi(u)}function oE(o,a=null,u=null,h){const f=aE(o,a,u,h);return f.resolveInjectorInitializers(),f}function aE(o,a=null,u=null,h,f=new Set){const m=[u||xt,hp(o)];return h=h||("object"==typeof o?void 0:fe(o)),new pp(m,a||Eh(),h||null,f)}let cd=(()=>{class o{static create(u,h){if(Array.isArray(u))return oE({name:""},h,u,"");{const f=u.name??"";return oE({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Zi,o.NULL=new dp,o.\u0275prov=dn({token:o,providedIn:"any",factory:()=>Qn(cp)}),o.__NG_ELEMENT_ID__=-1,o})();function Ph(o,a=rt.Default){const u=xe();return null===u?Qn(o,a):Qo(qn(),u,J(o),a)}function hE(){throw new Error("invalid")}function $v(o,a){return o<<17|a<<2}function To(o){return o>>17&32767}function Wv(o){return 2|o}function Ml(o){return(131068&o)>>2}function zv(o,a){return-131069&o|a<<2}function gE(o){return 1|o}function EE(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const b=o.data[m];hl(f),b.contentQueries(2,a[m],m)}}}function l_(o,a,u,h,f,m,b,E,T,N,O){const B=a.blueprint.slice();return B[0]=f,B[2]=76|h,(null!==O||o&&1024&o[2])&&(B[2]|=1024),ru(B),B[3]=B[15]=o,B[8]=u,B[10]=b||o&&o[10],B[11]=E||o&&o[11],B[12]=T||o&&o[12]||null,B[9]=N||o&&o[9]||null,B[6]=m,B[20]=function yF(){return V1++}(),B[21]=O,B[16]=2==a.type?o[16]:B,B}function Fh(o,a,u,h,f){let m=o.data[a];if(null===m)m=Ip(o,a,u,h,f),function _m(){return Rt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const b=Ca();m.injectorIndex=null===b?-1:b.injectorIndex}return xi(m,!0),m}function Ip(o,a,u,h,f){const m=uu(),b=al(),T=o.data[a]=function jF(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=T),null!==m&&(b?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}function Lh(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Jv(o,a,u){hu(a);try{const h=o.viewQuery;null!==h&&Uu(1,h,u);const f=o.template;null!==f&&CE(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&EE(o,a),o.staticViewQueries&&Uu(2,o.viewQuery,u);const m=o.components;null!==m&&function ON(o,a){for(let u=0;u<a.length;u++)dd(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,$o()}}function u_(o,a,u,h){const f=a[2];if(128!=(128&f)){hu(a);try{ru(a),function Ic(o){return Rt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&CE(o,a,u,2,h);const b=3==(3&f);if(b){const N=o.preOrderCheckHooks;null!==N&&zo(a,N,null)}else{const N=o.preOrderHooks;null!==N&&Ta(a,N,0,null),th(a,0)}if(function c_(o){for(let a=Ji(o);null!==a;a=Bs(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(512&f[2])&&Hn(m,1),f[2]|=512}}}(a),function GN(o){for(let a=Ji(o);null!==a;a=Bs(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Ho(h)&&u_(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&EE(o,a),b){const N=o.contentCheckHooks;null!==N&&zo(a,N)}else{const N=o.contentHooks;null!==N&&Ta(a,N,1),th(a,1)}!function xN(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)mi(~f);else{const m=f,b=u[++h],E=u[++h];ym(b,m),E(2,a[m])}}}finally{mi(-1)}}(o,a);const E=o.components;null!==E&&function RN(o,a){for(let u=0;u<a.length;u++)Rl(o,a[u])}(a,E);const T=o.viewQuery;if(null!==T&&Uu(2,T,h),b){const N=o.viewCheckHooks;null!==N&&zo(a,N)}else{const N=o.viewHooks;null!==N&&Ta(a,N,2),th(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Hn(a[3],-1))}finally{$o()}}}function CE(o,a,u,h,f){const m=yr(),b=2&h;try{mi(-1),b&&a.length>22&&rE(o,a,22,!1),u(h,f)}finally{mi(m)}}function Xv(o,a,u){!As()||(function zF(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||Yo(u,a),Di(h,a);const b=u.initialInputs;for(let E=f;E<m;E++){const T=o.data[E],N=zr(T);N&&ZF(a,u,T);const O=xs(a,o,E,u);Di(O,a),null!==b&&jN(0,E-f,O,T,0,b),N&&(tn(u.index,a)[8]=O)}}(o,a,u,ni(u,a)),128==(128&u.flags)&&function VN(o,a,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,b=function Sc(){return Rt.lFrame.currentDirectiveIndex}();try{mi(m);for(let E=h;E<f;E++){const T=o.data[E],N=a[E];cu(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&ME(T,N)}}finally{mi(-1),cu(b)}}(o,a,u))}function e0(o,a,u=ni){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],E=-1===b?u(a,o):o[b];o[f++]=E}}}function IE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=t0(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function t0(o,a,u,h,f,m,b,E,T,N){const O=22+h,B=O+f,q=function kN(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Ht);return u}(O,B),re="function"==typeof N?N():N;return q[1]={type:o,blueprint:q,template:u,queries:null,viewQuery:E,declTNode:a,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:re,incompleteFirstPass:!1}}function SE(o,a,u,h){const f=$N(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&PE(o).push(h,f.length-1))}function FN(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function NE(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,b=[];let E=null,T=null;for(let N=a.directiveStart;N<h;N++){const O=f[N],B=O.inputs,q=null===m||kv(a)?null:YF(B,m);b.push(q),E=FN(B,N,E),T=FN(O.outputs,N,T)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=T}function Io(o,a,u,h,f,m,b,E){const T=ni(a,u);let O,N=a.inputs;!E&&null!=N&&(O=N[h])?(u0(o,u,O,h,f),il(a)&&LN(u,a.index)):3&a.type&&(h=function HF(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,m.setProperty(T,h,f))}function LN(o,a){const u=tn(a,o);16&u[2]||(u[2]|=32)}function n0(o,a,u,h){let f=!1;if(As()){const m=function qF(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const b=h[m];Fv(u,b.selectors,!1)&&(f||(f=[]),ho(Yo(u,a),o,b.type),zr(b)?(BN(o,u),f.unshift(b)):f.push(b))}return f}(o,a,u),b=null===h?null:{"":-1};if(null!==m){f=!0,xE(u,o.data.length,m.length);for(let O=0;O<m.length;O++){const B=m[O];B.providersResolver&&B.providersResolver(B)}let E=!1,T=!1,N=Lh(o,a,m.length,null);for(let O=0;O<m.length;O++){const B=m[O];u.mergedAttrs=fl(u.mergedAttrs,B.hostAttrs),RE(o,u,a,N,B),KF(N,B,b),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const q=B.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),E=!0),!T&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),T=!0),N++}NE(o,u)}b&&function UN(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ce(-301,!1);h.push(a[f],m)}}}(u,h,b)}return u.mergedAttrs=fl(u.mergedAttrs,u.attrs),f}function AE(o,a,u,h,f,m){const b=m.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const T=~a.index;(function WF(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(E)!=T&&E.push(T),E.push(h,f,b)}}function ME(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function BN(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function KF(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;zr(a)&&(u[""]=o)}}function xE(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function RE(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=us(f.type)),b=new co(m,zr(f),Ph);o.blueprint[h]=b,u[h]=b,AE(o,a,0,h,Lh(o,u,f.hostVars,Ht),f)}function ZF(o,a,u){const h=ni(a,o),f=IE(u),m=o[10],b=o0(o,l_(o,f,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=b}function r0(o,a,u,h,f,m,b){if(null==m)o.removeAttribute(a,f,u);else{const E=null==b?ye(m):b(m,h||"",f);o.setAttribute(a,f,E,u)}}function jN(o,a,u,h,f,m){const b=m[a];if(null!==b){const E=h.setInput;for(let T=0;T<b.length;){const N=b[T++],O=b[T++],B=b[T++];null!==E?h.setInput(u,B,N,O):u[O]=B}}}function YF(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function HN(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function Rl(o,a){const u=tn(a,o);if(Ho(u)){const h=u[1];48&u[2]?u_(h,u,h.template,u[8]):u[5]>0&&Sp(u)}}function Sp(o){for(let h=Ji(o);null!==h;h=Bs(h))for(let f=10;f<h.length;f++){const m=h[f];if(Ho(m))if(512&m[2]){const b=m[1];u_(b,m,b.template,m[8])}else m[5]>0&&Sp(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=tn(u[h],o);Ho(f)&&f[5]>0&&Sp(f)}}function dd(o,a){const u=tn(a,o),h=u[1];(function OE(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Jv(h,u,u[8])}function o0(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function kE(o){for(;o;){o[2]|=32;const a=gs(o);if(Lf(o)&&!a)return o;o=a}return null}function a0(o,a,u,h=!0){const f=a[10];f.begin&&f.begin();try{u_(o,a,o.template,u)}catch(b){throw h&&FE(a,b),b}finally{f.end&&f.end()}}function Uu(o,a,u){hl(0),a(o,u)}function $N(o){return o[7]||(o[7]=[])}function PE(o){return o.cleanup||(o.cleanup=[])}function FE(o,a){const u=o[9],h=u?u.get(Ah,null):null;h&&h.handleError(a)}function u0(o,a,u,h,f){for(let m=0;m<u.length;){const b=u[m++],E=u[m++],T=a[b],N=o.data[b];null!==N.setInput?N.setInput(T,f,h,E):T[E]=f}}function oi(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?m=E:1==m?f=ge(f,E):2==m&&(h=ge(h,E+": "+a[++b]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function d_(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(zn(m)),ti(m))for(let E=10;E<m.length;E++){const T=m[E],N=T[1].firstChild;null!==N&&d_(T[1],T,N,h)}const b=u.type;if(8&b)d_(o,a,u.child,h);else if(32&b){const E=UD(u,a);let T;for(;T=E();)h.push(T)}else if(16&b){const E=QD(a,u);if(Array.isArray(E))h.push(...E);else{const T=gs(a[16]);d_(T[1],T,E,h,!0)}}u=f?u.projectionNext:u.next}return h}class Np{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return d_(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ti(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Nv(a,h),Vn(u,h))}this._attachedToViewContainer=!1}qD(this._lView[1],this._lView)}onDestroy(a){SE(this._lView[1],this._lView,null,a)}markForCheck(){kE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){a0(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function W1(o,a){Lu(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=a}}class LE extends Np{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;a0(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class hd extends ku{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=ee(a);return new Vh(u,this.ngModule)}}function VE(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class c0{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const f=this.injector.get(a,Ct,h);return f!==Ct||u===Ct?f:this.parentInjector.get(a,u,h)}}class Vh extends qm{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function tN(o){return o.map(eN).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return VE(this.componentDef.inputs)}get outputs(){return VE(this.componentDef.outputs)}create(a,u,h,f){let m=(f=f||this.ngModule)instanceof wi?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new c0(a,m):a,E=b.get(A,null);if(null===E)throw new Ce(407,!1);const T=b.get(de,null),N=E.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=h?function PN(o,a,u){return o.selectRootElement(a,u===mt.ShadowDom)}(N,h,this.componentDef.encapsulation):Sv(E.createRenderer(null,this.componentDef),O,function WN(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),q=this.componentDef.onPush?288:272,re=t0(0,null,null,1,0,null,null,null,null,null),De=l_(null,re,null,q,null,null,E,N,T,b,null);let Le,Ze;hu(De);try{const Xe=function jE(o,a,u,h,f,m){const b=u[1];u[22]=o;const T=Fh(b,22,2,"#host",null),N=T.mergedAttrs=a.hostAttrs;null!==N&&(oi(T,N,!0),null!==o&&(Sa(f,o,N),null!==T.classes&&Ov(f,o,T.classes),null!==T.styles&&Rv(f,o,T.styles)));const O=h.createRenderer(o,a),B=l_(u,IE(a),null,a.onPush?32:16,u[22],T,h,O,m||null,null,null);return b.firstCreatePass&&(ho(Yo(T,u),b,a.type),BN(b,T),xE(T,u.length,1)),o0(u,B),u[22]=B}(B,this.componentDef,De,E,N);if(B)if(h)Sa(N,B,["ng-version",st.full]);else{const{attrs:Tt,classes:Oe}=function nN(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!Ri(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Tt&&Sa(N,B,Tt),Oe&&Oe.length>0&&Ov(N,B,Oe.join(" "))}if(Ze=Ea(re,22),void 0!==u){const Tt=Ze.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Ot=u[Oe];Tt.push(null!=Ot?Array.from(Ot):null)}}Le=function XF(o,a,u,h){const f=u[1],m=function $F(o,a,u){const h=qn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),RE(o,h,a,Lh(o,a,1,null),u),NE(o,h));const f=xs(a,o,h.directiveStart,h);Di(f,a);const m=ni(h,a);return m&&Di(m,a),f}(f,u,a);if(o[8]=u[8]=m,null!==h)for(const E of h)E(m,a);if(a.contentQueries){const E=qn();a.contentQueries(1,m,E.directiveStart)}const b=qn();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(mi(b.index),AE(u[1],b,0,b.directiveStart,b.directiveEnd,a),ME(a,m)),m}(Xe,this.componentDef,De,[HE]),Jv(re,De,null)}finally{$o()}return new zN(this.componentType,Le,v(Ze,De),De,Ze)}}class zN extends class zm{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new LE(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const m=this._rootLView;u0(m[1],m,f,a,u),LN(m,this._tNode.index)}}get injector(){return new Jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function HE(){const o=qn();gu(xe()[1],o)}function GE(o){let a=function KN(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(zr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ce(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const b=o;b.inputs=h_(o.inputs),b.declaredInputs=h_(o.declaredInputs),b.outputs=h_(o.outputs);const E=f.hostBindings;E&&Ap(o,E);const T=f.viewQuery,N=f.contentQueries;if(T&&ju(o,T),N&&$E(o,N),ue(o.inputs,f.inputs),ue(o.declaredInputs,f.declaredInputs),ue(o.outputs,f.outputs),zr(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const E=m[b];E&&E.ngInherit&&E(o),E===GE&&(u=!1)}}a=Object.getPrototypeOf(a)}!function eL(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=fl(f.hostAttrs,u=fl(u,f.hostAttrs))}}(h)}function h_(o){return o===fi?{}:o===xt?[]:o}function ju(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function $E(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function Ap(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let p_=null;function fd(){if(!p_){const o=gn.Symbol;if(o&&o.iterator)p_=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(p_=h)}}}return p_}function Mp(o){return!!g_(o)&&(Array.isArray(o)||!(o instanceof Map)&&fd()in o)}function g_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ol(o,a,u){return o[a]=u}function Jn(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Uh(o,a,u,h){const f=Jn(o,a,u);return Jn(o,a+1,h)||f}function WE(o,a,u,h){const f=xe();return Jn(f,Go(),a)&&(Kt(),function xl(o,a,u,h,f,m){const b=ni(o,a);r0(a[11],b,m,o.value,u,h,f)}(On(),f,o,a,u,h)),WE}function Rp(o,a,u,h){return Jn(o,Go(),u)?a+ye(u)+h:Ht}function sA(o,a,u,h,f,m,b,E){const T=xe(),N=Kt(),O=o+22,B=N.firstCreatePass?function iL(o,a,u,h,f,m,b,E,T){const N=a.consts,O=Fh(a,o,4,b||null,zi(N,E));n0(a,u,O,zi(N,T)),gu(a,O);const B=O.tViews=t0(2,O,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N);return null!==a.queries&&(a.queries.template(a,O),B.queries=a.queries.embeddedTView(O)),O}(O,N,T,a,u,h,f,m,b):N.data[O];xi(B,!1);const q=T[11].createComment("");Mh(N,T,q,B),Di(q,T),o0(T,T[O]=HN(q,T,q,B)),_c(B)&&Xv(N,T,B),null!=b&&e0(T,B,E)}function KE(o){return function Ns(o,a){return o[a]}(function Tc(){return Rt.lFrame.contextLView}(),22+o)}function ZE(o,a,u){const h=xe();return Jn(h,Go(),a)&&Io(Kt(),On(),h,o,a,h[11],u,!1),ZE}function YE(o,a,u,h,f){const b=f?"class":"style";u0(o,u,a.inputs[b],b,h)}function wr(o,a,u,h){const f=xe(),m=Kt(),b=22+o,E=f[11],T=f[b]=Sv(E,a,function pu(){return Rt.lFrame.currentNamespace}()),N=m.firstCreatePass?function oL(o,a,u,h,f,m,b){const E=a.consts,N=Fh(a,o,2,f,zi(E,m));return n0(a,u,N,zi(E,b)),null!==N.attrs&&oi(N,N.attrs,!1),null!==N.mergedAttrs&&oi(N,N.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,N),N}(b,m,f,0,a,u,h):m.data[b];xi(N,!0);const O=N.mergedAttrs;null!==O&&Sa(E,T,O);const B=N.classes;null!==B&&Ov(E,T,B);const q=N.styles;return null!==q&&Rv(E,T,q),64!=(64&N.flags)&&Mh(m,f,T,N),0===function su(){return Rt.lFrame.elementDepthCount}()&&Di(T,f),function ou(){Rt.lFrame.elementDepthCount++}(),_c(N)&&(Xv(m,f,N),function TE(o,a,u){if(Yl(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}(m,N,f)),null!==h&&e0(f,N),wr}function h0(){let o=qn();al()?ll():(o=o.parent,xi(o,!1));const a=o;!function Dc(){Rt.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(gu(u,o),Yl(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function yu(o){return 0!=(16&o.flags)}(a)&&YE(u,a,xe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function rh(o){return 0!=(32&o.flags)}(a)&&YE(u,a,xe(),a.stylesWithoutHost,!1),h0}function QE(o,a,u,h){return wr(o,a,u,h),h0(),QE}function XE(){return xe()}function p0(o){return!!o&&"function"==typeof o.then}function g0(o){return!!o&&"function"==typeof o.subscribe}const m0=g0;function m_(o,a,u,h){const f=xe(),m=Kt(),b=qn();return function tC(o,a,u,h,f,m,b,E){const T=_c(h),O=o.firstCreatePass&&PE(o),B=a[8],q=$N(a);let re=!0;if(3&h.type||E){const Ze=ni(h,a),Xe=E?E(Ze):Ze,Tt=q.length,Oe=E?Tn=>E(zn(Tn[h.index])):h.index;let Ot=null;if(!E&&T&&(Ot=function oA(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===u&&f[m+1]===h){const E=a[7],T=f[m+2];return E.length>T?E[T]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,h.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=m,Ot.__ngLastListenerFn__=m,re=!1;else{m=rC(h,a,B,m,!1);const Tn=u.listen(Xe,f,m);q.push(m,Tn),O&&O.push(f,Oe,Tt,Tt+1)}}else m=rC(h,a,B,m,!1);const De=h.outputs;let Le;if(re&&null!==De&&(Le=De[f])){const Ze=Le.length;if(Ze)for(let Xe=0;Xe<Ze;Xe+=2){const ir=a[Le[Xe]][Le[Xe+1]].subscribe(m),Ad=q.length;q.push(m,ir),O&&O.push(f,h.index,Ad,-(Ad+1))}}}(m,f,f[11],b,o,a,0,h),m_}function nC(o,a,u,h){try{return!1!==u(h)}catch(f){return FE(o,f),!1}}function rC(o,a,u,h,f){return function m(b){if(b===Function)return h;kE(2&o.flags?tn(o.index,a):a);let T=nC(a,0,h,b),N=m.__ngNextListenerFn__;for(;N;)T=nC(a,0,N,b)&&T,N=N.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function iC(o=1){return function Wo(o){return(Rt.lFrame.contextLView=function fu(o,a){for(;o>0;)a=a[15],o--;return a}(o,Rt.lFrame.contextLView))[8]}(o)}function aA(o,a){let u=null;const h=function XD(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?Fv(o,m,!0):Lv(h,m))return f}else u=f}return u}function sC(o){const a=xe()[16][6];if(!a.projection){const h=a.projection=mo(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const b=o?aA(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:h[b]=m,f[b]=m),m=m.next}}}function oC(o,a=0,u){const h=xe(),f=Kt(),m=Fh(f,22+o,16,null,u||null);null===m.projection&&(m.projection=a),ll(),64!=(64&m.flags)&&function Mv(o,a,u){xv(a[11],0,a,u,KD(o,u,a),Cp(u.parent||a[6],u,a))}(f,h,m)}function _0(o,a,u){return Vp(o,"",a,"",u),_0}function Vp(o,a,u,h,f){const m=xe(),b=Rp(m,a,u,h);return b!==Ht&&Io(Kt(),On(),m,o,b,m[11],f,!1),Vp}function dA(o,a,u,h,f){const m=o[u+1],b=null===a;let E=h?To(m):Ml(m),T=!1;for(;0!==E&&(!1===T||b);){const O=o[E+1];cL(o[E],a)&&(T=!0,o[E+1]=h?gE(O):Wv(O)),E=h?To(O):Ml(O)}T&&(o[u+1]=h?Wv(m):gE(m))}function cL(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Gn(o,a)>=0}const ai={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hA(o){return o.substring(ai.key,ai.keyEnd)}function fA(o,a){const u=ai.textEnd;return u===a?-1:(a=ai.keyEnd=function mA(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,ai.key=a,u),Bp(o,a,u))}function Bp(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function lC(o,a,u){return Ao(o,a,u,!1),lC}function __(o,a){return Ao(o,a,null,!0),__}function Xn(o){!function Hs(o,a,u,h){const f=Kt(),m=Ms(2);f.firstUpdatePass&&cC(f,null,m,h);const b=xe();if(u!==Ht&&Jn(b,m,u)){const E=f.data[yr()];if(E0(E,h)&&!uC(f,m)){let T=h?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(u=ge(T,u||"")),YE(f,E,b,u,h)}else!function bA(o,a,u,h,f,m,b,E){f===Ht&&(f=xt);let T=0,N=0,O=0<f.length?f[0]:null,B=0<m.length?m[0]:null;for(;null!==O||null!==B;){const q=T<f.length?f[T+1]:void 0,re=N<m.length?m[N+1]:void 0;let Le,De=null;O===B?(T+=2,N+=2,q!==re&&(De=B,Le=re)):null===B||null!==O&&O<B?(T+=2,De=O):(N+=2,De=B,Le=re),null!==De&&gd(o,a,u,h,De,Le,b,E),O=T<f.length?f[T]:null,B=N<m.length?m[N]:null}}(f,E,b,b[11],b[m+1],b[m+1]=function vA(o,a,u){if(null==u||""===u)return xt;const h=[],f=Ls(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}(vi,No,o,!0)}function No(o,a){for(let u=function hL(o){return function gA(o){ai.key=0,ai.keyEnd=0,ai.value=0,ai.valueEnd=0,ai.textEnd=o.length}(o),fA(o,Bp(o,0,ai.textEnd))}(a);u>=0;u=fA(a,u))vi(o,hA(a),!0)}function Ao(o,a,u,h){const f=xe(),m=Kt(),b=Ms(2);m.firstUpdatePass&&cC(m,o,b,h),a!==Ht&&Jn(f,b,a)&&gd(m,m.data[yr()],f,f[11],o,f[b+1]=function b_(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(Ls(o)))),o}(a,u),h,b)}function uC(o,a){return a>=o.expandoStartIndex}function cC(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[yr()],b=uC(o,u);E0(m,h)&&null===a&&!b&&(a=!1),a=function D0(o,a,u,h){const f=function dl(o){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=jp(u=v_(null,o,a,u,h),a.attrs,h),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(u=v_(f,o,a,u,h),null===m){let T=function mL(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Ml(h))return o[To(h)]}(o,a,h);void 0!==T&&Array.isArray(T)&&(T=v_(null,o,a,T[1],h),T=jp(T,a.attrs,h),function Up(o,a,u,h){o[To(u?a.classBindings:a.styleBindings)]=h}(o,a,h,T))}else m=function y_(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=jp(h,o[m].hostAttrs,u);return jp(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function lL(o,a,u,h,f,m){let b=m?a.classBindings:a.styleBindings,E=To(b),T=Ml(b);o[h]=u;let O,N=!1;if(Array.isArray(u)){const B=u;O=B[1],(null===O||Gn(B,O)>0)&&(N=!0)}else O=u;if(f)if(0!==T){const q=To(o[E+1]);o[h+1]=$v(q,E),0!==q&&(o[q+1]=zv(o[q+1],h)),o[E+1]=function DN(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=$v(E,0),0!==E&&(o[E+1]=zv(o[E+1],h)),E=h;else o[h+1]=$v(T,0),0===E?E=h:o[T+1]=zv(o[T+1],h),T=h;N&&(o[h+1]=Wv(o[h+1])),dA(o,O,h,!0),dA(o,O,h,!1),function uL(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Gn(m,a)>=0&&(u[h+1]=gE(u[h+1]))}(a,O,o,h,m),b=$v(E,T),m?a.classBindings=b:a.styleBindings=b}(f,m,a,u,b,h)}}function v_(o,a,u,h,f){let m=null;const b=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<b&&(m=a[E],h=jp(h,m.hostAttrs,f),m!==o);)E++;return null!==o&&(u.directiveStylingLast=E),h}function jp(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),vi(o,b,!!u||a[++m]))}return void 0===o?null:o}function gd(o,a,u,h,f,m,b,E){if(!(3&a.type))return;const T=o.data,N=T[E+1];Gu(function EN(o){return 1==(1&o)}(N)?Hu(T,a,u,f,Ml(N),b):void 0)||(Gu(m)||function pE(o){return 2==(2&o)}(N)&&(m=Hu(T,null,u,f,E,b)),function Z1(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Ha.DashCase;null==f?o.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ha.Important),o.setStyle(u,h,f,m))}}(h,b,Mi(yr(),u),f,m))}function Hu(o,a,u,h,f,m){const b=null===a;let E;for(;f>0;){const T=o[f],N=Array.isArray(T),O=N?T[1]:T,B=null===O;let q=u[f+1];q===Ht&&(q=B?xt:void 0);let re=B?Dl(q,h):O===h?q:void 0;if(N&&!Gu(re)&&(re=Dl(T,h)),Gu(re)&&(E=re,b))return E;const De=o[f+1];f=b?To(De):Ml(De)}if(null!==a){let T=m?a.residualClasses:a.residualStyles;null!=T&&(E=Dl(T,h))}return E}function Gu(o){return void 0!==o}function E0(o,a){return 0!=(o.flags&(a?16:32))}function Hp(o,a=""){const u=xe(),h=Kt(),f=o+22,m=h.firstCreatePass?Fh(h,f,1,a,null):h.data[f],b=u[f]=id(u[11],a);Mh(h,u,b,m),xi(m,!1)}function Pl(o){return Gp("",o,""),Pl}function Gp(o,a,u){const h=xe(),f=Rp(h,o,a,u);return f!==Ht&&function js(o,a,u){const h=Mi(a,o);sd(o[11],h,u)}(h,yr(),f),Gp}function I0(o,a,u){const h=xe();return Jn(h,Go(),a)&&Io(Kt(),On(),h,o,a,h[11],u,!0),I0}const _d=void 0;var xA=["en",[["a","p"],["AM","PM"],_d],[["AM","PM"],_d,_d],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_d,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_d,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_d,"{1} 'at' {0}",_d],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EC(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let yd={};function $p(o){const a=function TL(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=IC(a);if(u)return u;const h=a.split("-")[0];if(u=IC(h),u)return u;if("en"===h)return xA;throw new Ce(701,!1)}function TC(o){return $p(o)[Mt.PluralCase]}function IC(o){return o in yd||(yd[o]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[o]),yd[o]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const NC=["zero","one","two","few","many"],vd="en-US",Wp={marker:"element"},zp={marker:"ICU"};var dr=(()=>((dr=dr||{})[dr.SHIFT=2]="SHIFT",dr[dr.APPEND_EAGERLY=1]="APPEND_EAGERLY",dr[dr.COMMENT=2]="COMMENT",dr))();let N0=vd;function PA(o){(function zt(o,a){null==o&&tt(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(N0=o.toLowerCase().replace(/_/g,"-"))}function A0(o,a,u){const h=a.insertBeforeIndex,f=Array.isArray(h)?h[0]:h;return null===f?ld(o,0,u):zn(u[f])}function MC(o,a,u,h,f){const m=a.insertBeforeIndex;if(Array.isArray(m)){let b=h,E=null;if(3&a.type||(E=b,b=f),null!==b&&0==(2&a.flags))for(let T=1;T<m.length;T++)od(o,b,u[m[T]],E,!1)}}function xC(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const h=o[u];RC(h)||FA(h,a)&&null===OC(h)&&LA(h,a.index)}}function RC(o){return!(64&o.type)}function FA(o,a){return RC(a)||o.index>a.index}function OC(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function LA(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(ud(A0,MC),o.insertBeforeIndex=a)}function qp(o,a){const u=o.data[a];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function UA(o,a,u){const h=Ip(o,u,64,null,null);return xC(a,h),h}function E_(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function M0(o){return o>>>17}function jA(o){return(131070&o)>>>1}let C_=0,T_=0;function GA(o,a,u,h){const f=u[11];let b,m=null;for(let E=0;E<a.length;E++){const T=a[E];if("string"==typeof T){const N=a[++E];null===u[N]&&(u[N]=id(f,T))}else if("number"==typeof T)switch(1&T){case 0:const N=M0(T);let O,B;if(null===m&&(m=N,b=oa(f,h)),N===m?(O=h,B=b):(O=null,B=zn(u[N])),null!==B){const Le=jA(T);od(f,B,u[Le],O,!1);const Xe=qp(o,Le);if(null!==Xe&&"object"==typeof Xe){const Tt=E_(Xe,u);null!==Tt&&GA(o,Xe.create[Tt],u,u[Xe.anchorIdx])}}break;case 1:const re=a[++E],De=a[++E];r0(f,Mi(T>>>1,u),null,null,re,De,null)}else switch(T){case zp:const N=a[++E],O=a[++E];null===u[O]&&Di(u[O]=Dp(f,N),u);break;case Wp:const B=a[++E],q=a[++E];null===u[q]&&Di(u[q]=Sv(f,B,null),u)}}}function $A(o,a,u,h,f){for(let m=0;m<u.length;m++){const b=u[m],E=u[++m];if(b&f){let T="";for(let N=m+1;N<=m+E;N++){const O=u[N];if("string"==typeof O)T+=O;else if("number"==typeof O)if(O<0)T+=ye(a[h-O]);else{const B=O>>>2;switch(3&O){case 1:const q=u[++N],re=u[++N],De=o.data[B];"string"==typeof De?r0(a[11],a[B],null,De,q,T,re):Io(o,De,a,q,T,a[11],re,!1);break;case 0:const Le=a[B];null!==Le&&sd(a[11],Le,T);break;case 2:AL(o,qp(o,B),a,T);break;case 3:FC(o,qp(o,B),h,a)}}}}else{const T=u[m+1];if(T>0&&3==(3&T)){const O=qp(o,T>>>2);a[O.currentCaseLViewIndex]<0&&FC(o,O,h,a)}}m+=E}}function FC(o,a,u,h){let f=h[a.currentCaseLViewIndex];if(null!==f){let m=C_;f<0&&(f=h[a.currentCaseLViewIndex]=~f,m=-1),$A(o,h,a.update[f],u,m)}}function AL(o,a,u,h){const f=function zA(o,a){let u=o.cases.indexOf(a);if(-1===u)switch(o.type){case 1:{const h=function OA(o,a){const u=TC(a)(parseInt(o,10)),h=NC[u];return void 0!==h?h:"other"}(a,function IL(){return N0}());u=o.cases.indexOf(h),-1===u&&"other"!==h&&(u=o.cases.indexOf("other"));break}case 0:u=o.cases.indexOf("other")}return-1===u?null:u}(a,h);if(E_(a,u)!==f&&(WA(o,a,u),u[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const b=u[a.anchorIdx];b&&GA(o,a.create[f],u,b)}}function WA(o,a,u){let h=E_(a,u);if(null!==h){const f=a.remove[h];for(let m=0;m<f.length;m++){const b=f[m];if(b>0){const E=Mi(b,u);null!==E&&JD(u[11],E)}else WA(o,qp(o,~b),u)}}}function ML(){const o=[];let u,h,a=-1;function m(E,T){a=0;const N=E_(E,T);h=null!==N?E.remove[N]:xt}function b(){if(a<h.length){const E=h[a++];return E>0?u[E]:(o.push(a,h),m(u[1].data[~E],u),b())}return 0===o.length?null:(h=o.pop(),a=o.pop(),b())}return function f(E,T){for(u=T;o.length;)o.pop();return m(E.value,T),b}}const x0=/\ufffd(\d+):?\d*\ufffd/gi,LC=/\ufffd(\d+)\ufffd/,ZA=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,RL=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,OL=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,VC=/\uE500/g;function YA(o,a,u,h,f,m,b){const E=Lh(o,h,1,null);let T=E<<dr.SHIFT,N=Ca();a===N&&(N=null),null===N&&(T|=dr.APPEND_EAGERLY),b&&(T|=dr.COMMENT,function wF(o){void 0===BD&&(BD=o())}(ML)),f.push(T,null===m?"":m);const O=Ip(o,E,b?32:1,null===m?"":m,null);xC(u,O);const B=O.index;return xi(O,!1),null!==N&&a!==N&&function BA(o,a){let u=o.insertBeforeIndex;null===u?(ud(A0,MC),u=o.insertBeforeIndex=[null,a]):(function _e(o,a,u){o!=a&&tt(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(N,B),O}function FL(o,a,u,h,f,m,b){const E=b.match(x0),T=YA(o,a,u,m,h,E?null:b,!1);E&&S_(f,b,T.index,null,0,null)}function S_(o,a,u,h,f,m){const b=o.length,E=b+1;o.push(null,null);const T=b+2,N=a.split(x0);let O=0;for(let B=0;B<N.length;B++){const q=N[B];if(1&B){const re=f+parseInt(q,10);o.push(-1-re),O|=JA(re)}else""!==q&&o.push(q)}return o.push(u<<2|(h?1:0)),h&&o.push(h,m),o[b]=O,o[E]=o.length-T,O}function JA(o){return 1<<Math.min(o,31)}function R0(o){let a,m,u="",h=0,f=!1;for(;null!==(a=RL.exec(o));)f?a[0]===`\ufffd/*${m}\ufffd`&&(h=a.index,f=!1):(u+=o.substring(h,a.index+a[0].length),m=a[1],f=!0);return u+=o.slice(h),u}function XA(o,a,u,h,f,m){let b=0;const E={type:f.type,currentCaseLViewIndex:Lh(o,a,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function UC(o,a,u){o.push(JA(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,f,m),function VA(o,a,u){const h=o.data[a];null===h?o.data[a]=u:h.value=u}(o,m,E);const T=f.values;for(let N=0;N<T.length;N++){const O=T[N],B=[];for(let q=0;q<O.length;q++){const re=O[q];if("string"!=typeof re){const De=B.push(re)-1;O[q]=`\x3c!--\ufffd${De}\ufffd--\x3e`}}b=jL(o,E,a,u,h,f.cases[N],O.join(""),B)|b}b&&function nM(o,a,u){o.push(a,1,u<<2|3)}(u,b,m)}function UL(o){const a=[],u=[];let h=1,f=0;const m=BC(o=o.replace(ZA,function(b,E,T){return h="select"===T?0:1,f=parseInt(E.slice(1),10),""}));for(let b=0;b<m.length;){let E=m[b++].trim();1===h&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&a.push(E);const T=BC(m[b++]);a.length>u.length&&u.push(T)}return{type:h,mainBinding:f,cases:a,values:u}}function BC(o){if(!o)return[];let a=0;const u=[],h=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(o);){const E=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const T=o.substring(a,E);ZA.test(T)?h.push(UL(T)):h.push(T),a=E+1}}else{if(0==u.length){const T=o.substring(a,E);h.push(T),a=E+1}u.push("{")}}const b=o.substring(a);return h.push(b),h}function jL(o,a,u,h,f,m,b,E){const T=[],N=[],O=[];a.cases.push(m),a.create.push(T),a.remove.push(N),a.update.push(O);const q=function rp(o){const a=new km(o);return function cv(){try{return!!(new window.DOMParser).parseFromString(Yi(""),"text/html")}catch{return!1}}()?new gh(a):a}(function Sm(){return void 0!==Yf?Yf:typeof document<"u"?document:void 0}()).getInertBodyElement(b),re=function mh(o){return"content"in o&&function ED(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(q)||q;return re?eM(o,a,u,h,T,N,O,re,f,E,0):0}function eM(o,a,u,h,f,m,b,E,T,N,O){let B=0,q=E.firstChild;for(;q;){const re=Lh(o,u,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const De=q,Le=De.tagName.toLowerCase();if(Pm.hasOwnProperty(Le)){O0(f,Wp,Le,T,re),o.data[re]=Le;const Oe=De.attributes;for(let Ot=0;Ot<Oe.length;Ot++){const Tn=Oe.item(Ot),ir=Tn.name.toLowerCase();Tn.value.match(x0)?Zc.hasOwnProperty(ir)&&S_(b,Tn.value,re,Tn.name,0,Ru[ir]?qc:null):rM(f,re,Tn)}B=eM(o,a,u,h,f,m,b,q,re,N,O+1)|B,tM(m,re,O)}break;case Node.TEXT_NODE:const Ze=q.textContent||"",Xe=Ze.match(x0);O0(f,null,Xe?"":Ze,T,re),tM(m,re,O),Xe&&(B=S_(b,Ze,re,null,0,null)|B);break;case Node.COMMENT_NODE:const Tt=LC.exec(q.textContent||"");if(Tt){const Ot=N[parseInt(Tt[1],10)];O0(f,zp,"",T,re),XA(o,u,h,T,Ot,re),HL(m,re,O)}}q=q.nextSibling}return B}function tM(o,a,u){0===u&&o.push(a)}function HL(o,a,u){0===u&&(o.push(~a),o.push(a))}function O0(o,a,u,h,f){null!==a&&o.push(a),o.push(u,f,function kC(o,a,u){return o|a<<17|u<<1}(0,h,f))}function rM(o,a,u){o.push(a<<1|1,u.name,u.value)}function WC(o,a,u=-1){const h=Kt(),f=xe(),m=22+o,b=zi(h.consts,a),E=Ca();h.firstCreatePass&&function PL(o,a,u,h,f,m){const b=Ca(),E=[],T=[],N=[[]];f=function BL(o,a){if(function VL(o){return-1===o}(a))return R0(o);{const u=o.indexOf(`:${a}\ufffd`)+2+a.toString().length,h=o.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return R0(o.substring(u,h))}}(f,m);const O=function kL(o){return o.replace(VC," ")}(f).split(OL);for(let B=0;B<O.length;B++){let q=O[B];if(0==(1&B)){const re=BC(q);for(let De=0;De<re.length;De++){let Le=re[De];if(0==(1&De)){const Ze=Le;""!==Ze&&FL(o,b,N[0],E,T,u,Ze)}else{const Ze=Le;if("object"!=typeof Ze)throw new Error(`Unable to parse ICU expression in "${f}" message.`);XA(o,u,T,a,Ze,YA(o,b,N[0],u,E,"",!0).index)}}}else{const re=47===q.charCodeAt(0),Le=(q.charCodeAt(re?1:0),22+Number.parseInt(q.substring(re?2:1)));if(re)N.shift(),xi(Ca(),!1);else{const Ze=UA(o,N[0],Le);N.unshift([]),xi(Ze,!0)}}}o.data[h]={create:E,update:T}}(h,null===E?0:E.index,f,m,b,u);const T=h.data[m],O=ZD(h,E===f[6]?null:E,f);(function NL(o,a,u,h){const f=o[11];for(let m=0;m<a.length;m++){const b=a[m++],E=a[m],T=(b&dr.COMMENT)===dr.COMMENT,N=(b&dr.APPEND_EAGERLY)===dr.APPEND_EAGERLY,O=b>>>dr.SHIFT;let B=o[O];null===B&&(B=o[O]=T?f.createComment(E):id(f,E)),N&&null!==u&&od(f,u,B,h,!1)}})(f,T.create,O,E&&8&E.type?f[E.index]:null),cl(!0)}function $u(o,a,u){WC(o,a,u),function Ga(){cl(!1)}()}function P0(o){return function PC(o){o&&(C_|=1<<Math.min(T_,31)),T_++}(Jn(xe(),Go(),o)),P0}function zu(o){!function SL(o,a,u){if(T_>0){const h=o.data[u];$A(o,a,Array.isArray(h)?h:h.update,function cs(){return Rt.lFrame.bindingIndex}()-T_-1,C_)}C_=0,T_=0}(Kt(),xe(),o+22)}function L0(o,a,u,h,f){if(o=J(o),Array.isArray(o))for(let m=0;m<o.length;m++)L0(o[m],a,u,h,f);else{const m=Kt(),b=xe();let E=Vs(o)?o:J(o.provide),T=gp(o);const N=qn(),O=1048575&N.providerIndexes,B=N.directiveStart,q=N.providerIndexes>>20;if(Vs(o)||!o.multi){const re=new co(T,f,Ph),De=bd(E,a,f?O:O+q,B);-1===De?(ho(Yo(N,b),m,E),Yp(m,o,a.length),a.push(E),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(re),b.push(re)):(u[De]=re,b[De]=re)}else{const re=bd(E,a,O+q,B),De=bd(E,a,O,O+q),Le=re>=0&&u[re],Ze=De>=0&&u[De];if(f&&!Ze||!f&&!Le){ho(Yo(N,b),m,E);const Xe=function oM(o,a,u,h,f){const m=new co(o,u,Ph);return m.multi=[],m.index=a,m.componentProviders=0,Zt(m,f,h&&!u),m}(f?Wh:sM,u.length,f,h,T);!f&&Ze&&(u[De].providerFactory=Xe),Yp(m,o,a.length,0),a.push(E),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Xe),b.push(Xe)}else Yp(m,o,re>-1?re:De,Zt(u[f?De:re],T,!f&&h));!f&&h&&Ze&&u[De].componentProviders++}}}function Yp(o,a,u,h){const f=Vs(a),m=function bh(o){return!!o.useClass}(a);if(f||m){const T=(m?J(a.useClass):a).prototype.ngOnDestroy;if(T){const N=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=N.indexOf(u);-1===O?N.push(u,[h,T]):N[O+1].push(h,T)}else N.push(u,T)}}}function Zt(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function bd(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function sM(o,a,u,h){return V0(this.multi,[])}function Wh(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=xs(u,u[1],this.providerFactory.index,h);m=E.slice(0,b),V0(f,m);for(let T=b;T<E.length;T++)m.push(E[T])}else m=[],V0(f,m);return m}function V0(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function ua(o,a=[]){return u=>{u.providersResolver=(h,f)=>function zC(o,a,u){const h=Kt();if(h.firstCreatePass){const f=zr(o);L0(u,h.data,h.blueprint,f,!0),L0(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class wd{}class B0{}function qC(o,a){return new li(o,a??null)}class li extends wd{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hd(this);const h=Sn(a);this._bootstrapComponents=ja(h.bootstrap),this._r3Injector=aE(a,u,[{provide:wd,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class $a extends B0{constructor(a){super(),this.moduleType=a}create(a){return new li(this.moduleType,a)}}class U0 extends wd{constructor(a,u,h){super(),this.componentFactoryResolver=new hd(this),this.instance=null;const f=new pp([...a,{provide:wd,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],u||Eh(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function j0(o,a,u=null){return new U0(o,a,u).injector}let aM=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=Al(0,u.type),f=h.length>0?j0([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=dn({token:o,providedIn:"environment",factory:()=>new o(Qn(wi))}),o})();function H0(o){o.getStandaloneInjector=a=>a.get(aM).getOrCreateStandaloneInjector(o)}function Jp(o,a,u,h){return function rT(o,a,u,h,f,m){const b=a+u;return Jn(o,b,f)?Ol(o,b+1,m?h.call(m,f):h(f)):Ku(o,b+1)}(xe(),Kn(),o,a,u,h)}function eT(o,a,u,h,f){return function iT(o,a,u,h,f,m,b){const E=a+u;return Uh(o,E,f,m)?Ol(o,E+2,b?h.call(b,f,m):h(f,m)):Ku(o,E+2)}(xe(),Kn(),o,a,u,h,f)}function R_(o,a,u,h,f,m){return function sT(o,a,u,h,f,m,b,E){const T=a+u;return function d0(o,a,u,h,f){const m=Uh(o,a,u,h);return Jn(o,a+2,f)||m}(o,T,f,m,b)?Ol(o,T+3,E?h.call(E,f,m,b):h(f,m,b)):Ku(o,T+3)}(xe(),Kn(),o,a,u,h,f,m)}function Ku(o,a){const u=o[a];return u===Ht?void 0:u}function Cd(o){return a=>{setTimeout(o,void 0,a)}}const Xi=class eg extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,m=u||(()=>null),b=h;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),m=T.error?.bind(T),b=T.complete?.bind(T)}this.__isAsync&&(m=Cd(m),f&&(f=Cd(f)),b&&(b=Cd(b)));const E=super.subscribe({next:f,error:m,complete:b});return a instanceof te.w0&&a.add(E),E}};function lT(){return this._results[fd()]()}class P_{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=fd(),h=P_.prototype;h[u]||(h[u]=lT)}get changes(){return this._changes||(this._changes=new Xi)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=Je(a);(this._changesDetected=!function ln(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let qh=(()=>{class o{}return o.__NG_ELEMENT_ID__=gM,o})();const Kh=qh,pM=class extends Kh{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,f=l_(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(h)),Jv(h,f,a),new Np(f)}};function gM(){return tg(qn(),xe())}function tg(o,a){return 4&o.type?new pM(a,o,v(o,a)):null}let F_=(()=>{class o{}return o.__NG_ELEMENT_ID__=q0,o})();function q0(){return Z0(qn(),xe())}const ng=F_,uT=class extends ng{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return v(this._hostTNode,this._hostLView)}get injector(){return new Jo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Du(this._hostTNode,this._hostLView);if(sh(a)){const u=gl(a,this._hostLView),h=xr(a);return new Jo(u[1].data[h+8],u)}return new Jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=L_(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const b=a.createEmbeddedView(u||{},m);return this.insert(b,f),b}createComponent(a,u,h,f,m){const b=a&&!function ri(o){return"function"==typeof o}(a);let E;if(b)E=u;else{const B=u||{};E=B.index,h=B.injector,f=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const T=b?a:new Vh(ee(a)),N=h||this.parentInjector;if(!m&&null==T.ngModule){const q=(b?N:this.parentInjector).get(wi,null);q&&(m=q)}const O=T.create(N,f,void 0,m);return this.insert(O.hostView,E),O}insert(a,u){const h=a._lView,f=h[1];if(function nu(o){return ti(o[3])}(h)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const B=h[3],q=new uT(B,B[6],B[3]);q.detach(q.indexOf(a))}}const m=this._adjustIndex(u),b=this._lContainer;!function WD(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],Ki(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function z1(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=64}(f,h,b,m);const E=aa(m,b),T=h[11],N=oa(T,b[7]);return null!==N&&function Ep(o,a,u,h,f,m){h[0]=f,h[6]=a,Lu(o,h,u,1,f,m)}(f,b[6],T,h,N,E),a.attachToViewContainerRef(),Ki(K0(b),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=L_(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Nv(this._lContainer,u);h&&(Vn(K0(this._lContainer),u),qD(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Nv(this._lContainer,u);return h&&null!=Vn(K0(this._lContainer),u)?new Np(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function L_(o){return o[8]}function K0(o){return o[8]||(o[8]=[])}function Z0(o,a){let u;const h=a[o.index];if(ti(h))u=h;else{let f;if(8&o.type)f=zn(h);else{const m=a[11];f=m.createComment("");const b=ni(o,a);od(m,oa(m,b),f,function ad(o,a){return o.nextSibling(a)}(m,b),!1)}a[o.index]=u=HN(h,a,f,o),o0(a,u)}return new uT(u,o,a)}class Ll{constructor(a){this.queryList=a,this.matches=null}clone(){return new Ll(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zh{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new Zh(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Wa(a,u).matches&&this.queries[u].setDirty()}}class Y0{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Q0{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Q0(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class J0{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new J0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,mM(u,m)),this.matchTNodeWithReadOption(a,u,Na(u,a,m,!1,!1))}else h===qh?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Na(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===g||f===F_||f===qh&&4&u.type)this.addMatch(u.index,-2);else{const m=Na(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function mM(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function yM(o,a,u,h){return-1===u?function _M(o,a){return 11&o.type?v(o,a):4&o.type?tg(o,a):null}(a,o):-2===u?function vM(o,a,u){return u===g?v(a,o):u===qh?tg(a,o):u===F_?Z0(a,o):void 0}(o,a,h):xs(o,o[1],u,a)}function hT(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,b=u.matches,E=[];for(let T=0;T<b.length;T+=2){const N=b[T];E.push(N<0?null:yM(a,m[N],b[T+1],u.metadata.read))}f.matches=E}return f.matches}function X0(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const b=hT(o,a,f,u);for(let E=0;E<m.length;E+=2){const T=m[E];if(T>0)h.push(b[E/2]);else{const N=m[E+1],O=a[-T];for(let B=10;B<O.length;B++){const q=O[B];q[17]===q[3]&&X0(q[1],q,N,h)}if(null!==O[9]){const B=O[9];for(let q=0;q<B.length;q++){const re=B[q];X0(re[1],re,N,h)}}}}}return h}function fT(o){const a=xe(),u=Kt(),h=Nc();hl(h+1);const f=Wa(u,h);if(o.dirty&&function tu(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?X0(u,a,h,[]):hT(u,a,f,h);o.reset(m,_),o.notifyOnChanges()}return!0}return!1}function pT(o,a,u){const h=Kt();h.firstCreatePass&&(V_(h,new Y0(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),tb(h,xe(),a)}function gT(o,a,u,h){const f=Kt();if(f.firstCreatePass){const m=qn();V_(f,new Y0(a,u,h),m.index),function nb(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}tb(f,xe(),u)}function eb(){return function bM(o,a){return o[19].queries[a].queryList}(xe(),Nc())}function tb(o,a,u){const h=new P_(4==(4&u));SE(o,a,h,h.destroy),null===a[19]&&(a[19]=new Zh),a[19].queries.push(new Ll(h))}function V_(o,a,u){null===o.queries&&(o.queries=new Q0),o.queries.track(new J0(a,u))}function Wa(o,a){return o.queries.getByIndex(a)}function Td(o,a){return tg(o,a)}function W_(...o){}const dg=new Mn("Application Initializer");let Vl=(()=>{class o{constructor(u){this.appInits=u,this.resolve=W_,this.reject=W_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(p0(m))u.push(m);else if(m0(m)){const b=new Promise((E,T)=>{m.subscribe({complete:E,error:T})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Qn(dg,8))},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const TT=new Mn("AppId",{providedIn:"root",factory:function IT(){return`${cb()}${cb()}${cb()}`}});function cb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ST=new Mn("Platform Initializer"),AM=new Mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),NT=new Mn("appBootstrapListener"),MM=new Mn("AnimationModuleType");let AT=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Xh=new Mn("LocaleId",{providedIn:"root",factory:()=>I(Xh,rt.Optional|rt.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||vd}()}),MT=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class RM{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let OM=(()=>{class o{compileModuleSync(u){return new $a(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=ja(Sn(u).declarations).reduce((b,E)=>{const T=ee(E);return T&&b.push(new Vh(T)),b},[]);return new RM(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const fg=(()=>Promise.resolve(0))();function z_(o){typeof Zone>"u"?fg.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class xo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xi(!1),this.onMicrotaskEmpty=new Xi(!1),this.onStable=new Xi(!1),this.onError=new Xi(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function PM(){let o=gn.requestAnimationFrame,a=gn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function q_(o){const a=()=>{!function LM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(gn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,mb(o),o.isCheckStableRunning=!0,gb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),mb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,b,E)=>{try{return OT(o),u.invokeTask(f,m,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),kT(o)}},onInvoke:(u,h,f,m,b,E,T)=>{try{return OT(o),u.invoke(f,m,b,E,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),kT(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,mb(o),gb(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xo.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(xo.isInAngularZone())throw new Ce(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,FM,W_,W_);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const FM={};function gb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function mb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function OT(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function kT(o){o._nesting--,gb(o)}class VM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xi,this.onMicrotaskEmpty=new Xi,this.onStable=new Xi,this.onError=new Xi}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const PT=new Mn(""),FT=new Mn("");let K_,BM=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,K_||(function UM(o){K_=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xo.assertNotInAngularZone(),z_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())z_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(Qn(xo),Qn(_b),Qn(FT))},o.\u0275prov=dn({token:o,factory:o.\u0275fac}),o})(),_b=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return K_?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Bl=null;const yb=new Mn("AllowMultipleToken"),Z_=new Mn("PlatformDestroyListeners");class GM{constructor(a,u){this.name=a,this.token=u}}function bb(o,a,u=[]){const h=`Platform: ${a}`,f=new Mn(h);return(m=[])=>{let b=wb();if(!b||b.injector.get(yb,!1)){const E=[...u,...m,{provide:f,useValue:!0}];o?o(E):function $M(o){if(Bl&&!Bl.get(yb,!1))throw new Ce(400,!1);Bl=o;const a=o.get(BT);(function vb(o){const a=o.get(ST,null);a&&a.forEach(u=>u())})(o)}(function zM(o=[],a){return cd.create({name:a,providers:[{provide:Xc,useValue:"platform"},{provide:Z_,useValue:new Set([()=>Bl=null])},...o]})}(E,h))}return function VT(o){const a=wb();if(!a)throw new Ce(401,!1);return a}()}}function wb(){return Bl?.get(BT)??null}let BT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function pg(o,a){let u;return u="noop"===o?new VM:("zone.js"===o?void 0:o)||new xo(a),u}(h?.ngZone,function UT(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:xo,useValue:f}];return f.run(()=>{const b=cd.create({providers:m,parent:this.injector,name:u.moduleType.name}),E=u.create(b),T=E.injector.get(Ah,null);if(!T)throw new Ce(402,!1);return f.runOutsideAngular(()=>{const N=f.onError.subscribe({next:O=>{T.handleError(O)}});E.onDestroy(()=>{Q_(this._modules,E),N.unsubscribe()})}),function Db(o,a,u){try{const h=u();return p0(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(T,f,()=>{const N=E.injector.get(Vl);return N.runInitializers(),N.donePromise.then(()=>(PA(E.injector.get(Xh,vd)||vd),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,h=[]){const f=Y_({},h);return function jM(o,a,u){const h=new $a(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(ef);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ce(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Z_,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Qn(cd))},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Y_(o,a){return Array.isArray(a)?a.reduce(Y_,o):{...o,...a}}let ef=(()=>{class o{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new L.y(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{xo.assertNotInAngularZone(),z_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{xo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(m,b.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof qm;if(!this._injector.get(Vl).done)throw!f&&an(u),new Ce(405,false);let b;b=f?u:this._injector.get(ku).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const E=function HM(o){return o.isBoundToModule}(b)?void 0:this._injector.get(wd),N=b.create(cd.NULL,[],h||b.selector,E),O=N.location.nativeElement,B=N.injector.get(PT,null);return B?.registerApplication(O),N.onDestroy(()=>{this.detachView(N.hostView),Q_(this.components,N),B?.unregisterApplication(O)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Q_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(NT,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Q_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ce(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(Qn(xo),Qn(wi),Qn(Ah))},o.\u0275prov=dn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Q_(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let HT=!0,GT=!1;function qM(){return GT=!0,HT}function KM(){if(GT)throw new Error("Cannot enable prod mode after platform setup.");HT=!1}let YM=(()=>{class o{}return o.__NG_ELEMENT_ID__=$T,o})();function $T(o){return function Eb(o,a,u){if(il(o)&&!u){const h=tn(o.index,a);return new Np(h,h)}return 47&o.type?new Np(a[16],a):null}(qn(),xe(),16==(16&o))}class qT{constructor(){}supports(a){return Mp(a)}create(a){return new ny(a)}}const _V=(o,a)=>a;class ny{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||_V}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<YT(h,f,m)?u:h,E=YT(b,f,m),T=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{m||(m=[]);const N=E-f,O=T-f;if(N!=O){for(let q=0;q<N;q++){const re=q<m.length?m[q]:m[q]=0,De=re+q;O<=De&&De<N&&(m[q]=re+1)}m[b.previousIndex]=O-N}}E!==T&&a(b,E,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Mp(a))throw new Ce(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],b=this._trackByFn(E,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,E)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,E),h=!0),u=u._next}else f=0,function tL(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[fd()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,E=>{b=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,E,b,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,b,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new yV(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new ZT),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class yV{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class ZT{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new KT,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YT(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class QT{constructor(){}supports(a){return a instanceof Map||g_(a)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||g_(a)))throw new Ce(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const h=new ex(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class ex{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JT(){return new Ib([new qT])}let Ib=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||JT()),deps:[[o,new St,new qe]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ce(901,!1)}}return o.\u0275prov=dn({token:o,providedIn:"root",factory:JT}),o})();function Sb(){return new Nb([new QT])}let Nb=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Sb()),deps:[[o,new St,new qe]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Ce(901,!1)}}return o.\u0275prov=dn({token:o,providedIn:"root",factory:Sb}),o})();const Cn=bb(null,"core",[]);let Ab=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Qn(ef))},o.\u0275mod=Ut({type:o}),o.\u0275inj=Vt({}),o})();function be(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function Mb(o,a){const u=ee(o),h=a.elementInjector||Eh();return new Vh(u).create(h,a.projectableNodes,a.hostElement,a.environmentInjector)}},3942:(gt,Ae,V)=>{V.d(Ae,{Z:()=>Ce});var d=V(2090),te=V(4859),L=V(9681),ae=V(1877);class se{constructor(ye,me){this._delegate=ye,this.firebase=me,(0,L._addComponent)(ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ye,me=L._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(ye);return!dt.isInitialized()&&"EXPLICIT"===(null===(ot=dt.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:me})}_removeServiceInstance(ye,me=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(me)}_addComponent(ye){(0,L._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,L._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ge(){const ut=function fe(ut){const ye={},me={__esModule:!0,initializeApp:function Re(Ke,G={}){const _e=L.initializeApp(Ke,G);if((0,d.r3)(ye,_e.name))return ye[_e.name];const Y=new ut(_e,me);return ye[_e.name]=Y,Y},app:dt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ke){const G=Ke.name,_e=G.replace("-compat","");if(L._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Y=(ne=dt())=>{if("function"!=typeof ne[_e])throw ue.create("invalid-app-argument",{appName:G});return ne[_e]()};void 0!==Ke.serviceProps&&(0,d.ZB)(Y,Ke.serviceProps),me[_e]=Y,ut.prototype[_e]=function(...ne){return this._getService.bind(this,G).apply(this,Ke.multipleInstances?ne:[])}}return"PUBLIC"===Ke.type?me[_e]:null},removeApp:function ot(Ke){delete ye[Ke]},useAsService:function ze(Ke,G){return"serverAuth"===G?null:G},modularAPIs:L}};function dt(Ke){if(!(0,d.r3)(ye,Ke=Ke||L._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ke});return ye[Ke]}return me.default=me,Object.defineProperty(me,"apps",{get:function we(){return Object.keys(ye).map(Ke=>ye[Ke])}}),dt.App=ut,me}(se);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function ye(me){(0,d.ZB)(ut,me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ut}(),W=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=$;!function Pe(ut){(0,L.registerVersion)("@firebase/app-compat","0.1.38",ut)}()},9681:(gt,Ae,V)=>{V.r(Ae),V.d(Ae,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>eo,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>on,_addOrOverwriteComponent:()=>dn,_apps:()=>_n,_clearComponents:()=>Ds,_components:()=>xn,_getProvider:()=>Vt,_registerComponent:()=>Qr,_removeServiceInstance:()=>yn,deleteApp:()=>ba,getApp:()=>hi,getApps:()=>Ii,initializeApp:()=>Gi,onLog:()=>to,registerVersion:()=>Wr,setLogLevel:()=>pr});var d=V(5861),te=V(4859),L=V(1877),ae=V(2090),se=V(8766);class he{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(at=>{if(function ue(lt){return"VERSION"===lt.getComponent()?.type}(at)){const Nt=at.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(at=>at).join(" ")}}const fe="@firebase/app",$=new L.Yd("@firebase/app"),zt="[DEFAULT]",tt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_n=new Map,xn=new Map;function on(lt,Me){try{lt.container.addComponent(Me)}catch(at){$.debug(`Component ${Me.name} failed to register with FirebaseApp ${lt.name}`,at)}}function dn(lt,Me){lt.container.addOrOverwriteComponent(Me)}function Qr(lt){const Me=lt.name;if(xn.has(Me))return $.debug(`There were multiple attempts to register component ${Me}.`),!1;xn.set(Me,lt);for(const at of _n.values())on(at,lt);return!0}function Vt(lt,Me){const at=lt.container.getProvider("heartbeat").getImmediate({optional:!0});return at&&at.triggerHeartbeat(),lt.container.getProvider(Me)}function yn(lt,Me,at=zt){Vt(lt,Me).clearInstance(at)}function Ds(){xn.clear()}const Jr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xr{constructor(Me,at,Nt){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},at),this._name=at.name,this._automaticDataCollectionEnabled=at.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const eo="9.13.0";function Gi(lt,Me={}){let at=lt;"object"!=typeof Me&&(Me={name:Me});const Nt=Object.assign({name:zt,automaticDataCollectionEnabled:!1},Me),It=Nt.name;if("string"!=typeof It||!It)throw Jr.create("bad-app-name",{appName:String(It)});if(at||(at=(0,ae.aH)()),!at)throw Jr.create("no-options");const Ut=_n.get(It);if(Ut){if((0,ae.vZ)(at,Ut.options)&&(0,ae.vZ)(Nt,Ut.config))return Ut;throw Jr.create("duplicate-app",{appName:It})}const z=new te.H0(It);for(const Q of xn.values())z.addComponent(Q);const j=new Xr(at,Nt,z);return _n.set(It,j),j}function hi(lt=zt){const Me=_n.get(lt);if(!Me&&lt===zt)return Gi();if(!Me)throw Jr.create("no-app",{appName:lt});return Me}function Ii(){return Array.from(_n.values())}function ba(lt){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(lt){const Me=lt.name;_n.has(Me)&&(_n.delete(Me),yield Promise.all(lt.container.getProviders().map(at=>at.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function Wr(lt,Me,at){var Nt;let It=null!==(Nt=tt[lt])&&void 0!==Nt?Nt:lt;at&&(It+=`-${at}`);const Ut=It.match(/\s|\//),z=Me.match(/\s|\//);if(Ut||z){const j=[`Unable to register library "${It}" with version "${Me}":`];return Ut&&j.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Ut&&z&&j.push("and"),z&&j.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void $.warn(j.join(" "))}Qr(new te.wA(`${It}-version`,()=>({library:It,version:Me}),"VERSION"))}function to(lt,Me){if(null!==lt&&"function"!=typeof lt)throw Jr.create("invalid-log-argument");(0,L.Am)(lt,Me)}function pr(lt){(0,L.Ub)(lt)}const Wn="firebase-heartbeat-store";let lr=null;function An(){return lr||(lr=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(lt,Me)=>{0===Me&&lt.createObjectStore(Wn)}}).catch(lt=>{throw Jr.create("idb-open",{originalErrorMessage:lt.message})})),lr}function mt(){return(mt=(0,d.Z)(function*(lt){var Me;try{return(yield An()).transaction(Wn).objectStore(Wn).get(tr(lt))}catch(at){if(at instanceof ae.ZR)$.warn(at.message);else{const Nt=Jr.create("idb-get",{originalErrorMessage:null===(Me=at)||void 0===Me?void 0:Me.message});$.warn(Nt.message)}}})).apply(this,arguments)}function gn(lt,Me){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(lt,Me){var at;try{const It=(yield An()).transaction(Wn,"readwrite");return yield It.objectStore(Wn).put(Me,tr(lt)),It.done}catch(Nt){if(Nt instanceof ae.ZR)$.warn(Nt.message);else{const It=Jr.create("idb-set",{originalErrorMessage:null===(at=Nt)||void 0===at?void 0:at.message});$.warn(It.message)}}})).apply(this,arguments)}function tr(lt){return`${lt.name}!${lt.options.appId}`}class Es{constructor(Me){this.container=Me,this._heartbeatsCache=null;const at=this.container.getProvider("app").getImmediate();this._storage=new fn(at),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var Me=this;return(0,d.Z)(function*(){const Nt=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=hn();if(null===Me._heartbeatsCache&&(Me._heartbeatsCache=yield Me._heartbeatsCachePromise),Me._heartbeatsCache.lastSentHeartbeatDate!==It&&!Me._heartbeatsCache.heartbeats.some(Ut=>Ut.date===It))return Me._heartbeatsCache.heartbeats.push({date:It,agent:Nt}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(Ut=>{const z=new Date(Ut.date).valueOf();return Date.now()-z<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,d.Z)(function*(){if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null===Me._heartbeatsCache||0===Me._heartbeatsCache.heartbeats.length)return"";const at=hn(),{heartbeatsToSend:Nt,unsentEntries:It}=function $i(lt,Me=1024){const at=[];let Nt=lt.slice();for(const It of lt){const Ut=at.find(z=>z.agent===It.agent);if(Ut){if(Ut.dates.push(It.date),gr(at)>Me){Ut.dates.pop();break}}else if(at.push({agent:It.agent,dates:[It.date]}),gr(at)>Me){at.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:at,unsentEntries:Nt}}(Me._heartbeatsCache.heartbeats),Ut=(0,ae.L)(JSON.stringify({version:2,heartbeats:Nt}));return Me._heartbeatsCache.lastSentHeartbeatDate=at,It.length>0?(Me._heartbeatsCache.heartbeats=It,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),Ut})()}}function hn(){return(new Date).toISOString().substring(0,10)}class fn{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,d.Z)(function*(){return(yield Me._canUseIndexedDBPromise)&&(yield function Dt(lt){return mt.apply(this,arguments)}(Me.app))||{heartbeats:[]}})()}overwrite(Me){var at=this;return(0,d.Z)(function*(){var Nt;if(yield at._canUseIndexedDBPromise){const Ut=yield at.read();return gn(at.app,{lastSentHeartbeatDate:null!==(Nt=Me.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Ut.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var at=this;return(0,d.Z)(function*(){var Nt;if(yield at._canUseIndexedDBPromise){const Ut=yield at.read();return gn(at.app,{lastSentHeartbeatDate:null!==(Nt=Me.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Me.heartbeats]})}})()}}function gr(lt){return(0,ae.L)(JSON.stringify({version:2,heartbeats:lt})).length}!function ei(lt){Qr(new te.wA("platform-logger",Me=>new he(Me),"PRIVATE")),Qr(new te.wA("heartbeat",Me=>new Es(Me),"PRIVATE")),Wr(fe,"0.8.3",lt),Wr(fe,"0.8.3","esm2017"),Wr("fire-js","")}("")},4859:(gt,Ae,V)=>{V.d(Ae,{H0:()=>fe,wA:()=>L,zt:()=>se});var d=V(5861),te=V(2090);class L{constructor($,W,J){this.name=$,this.instanceFactory=W,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class se{constructor($,W){this.name=$,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const W=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(W)){const J=new te.BH;if(this.instancesDeferred.set(W,J),this.isInitialized(W)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:W});Ge&&J.resolve(Ge)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate($){var W;const J=this.normalizeInstanceIdentifier($?.identifier),Ge=null!==(W=$?.optional)&&void 0!==W&&W;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Pe){if(Ge)return null;throw Pe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(ge){return"EAGER"===ge.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[W,J]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(W);try{const Pe=this.getOrInitializeService({instanceIdentifier:Ge});J.resolve(Pe)}catch{}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,d.Z)(function*(){const W=Array.from($.instances.values());yield Promise.all([...W.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...W.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:W={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:J,options:W});for(const[Pe,Ce]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Pe)&&Ce.resolve(Ge);return Ge}onInit($,W){var J;const Ge=this.normalizeInstanceIdentifier(W),Pe=null!==(J=this.onInitCallbacks.get(Ge))&&void 0!==J?J:new Set;Pe.add($),this.onInitCallbacks.set(Ge,Pe);const Ce=this.instances.get(Ge);return Ce&&$(Ce,Ge),()=>{Pe.delete($)}}invokeOnInitCallbacks($,W){const J=this.onInitCallbacks.get(W);if(J)for(const Ge of J)try{Ge($,W)}catch{}}getOrInitializeService({instanceIdentifier:$,options:W={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=$,ge===ae?void 0:ge),options:W}),this.instances.set($,J),this.instancesOptions.set($,W),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch{}var ge;return J||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const W=this.getProvider($.name);if(W.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);W.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const W=new se($,this);return this.providers.set($,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Ae,V)=>{V.d(Ae,{Am:()=>ge,Ub:()=>fe,Yd:()=>ue,in:()=>te});const d=[];var te=(()=>{return($=te||(te={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",te;var $})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ae=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},he=($,W,...J)=>{if(W<$.logLevel)return;const Ge=(new Date).toISOString(),Pe=se[W];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Pe](`[${Ge}]  ${$.name}:`,...J)};class ue{constructor(W){this.name=W,this._logLevel=ae,this._logHandler=he,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in te))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?L[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...W),this._logHandler(this,te.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...W),this._logHandler(this,te.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,te.INFO,...W),this._logHandler(this,te.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,te.WARN,...W),this._logHandler(this,te.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...W),this._logHandler(this,te.ERROR,...W)}}function fe($){d.forEach(W=>{W.setLogLevel($)})}function ge($,W){for(const J of d){let Ge=null;W&&W.level&&(Ge=L[W.level]),J.userLogHandler=null===$?null:(Pe,Ce,...ut)=>{const ye=ut.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ce>=(Ge??Pe.logLevel)&&$({level:te[Ce].toLowerCase(),message:ye,args:ut,type:Pe.name})}}}},8766:(gt,Ae,V)=>{V.d(Ae,{Lj:()=>Re,X3:()=>dt});var d=V(5861);let L,ae;const ue=new WeakMap,fe=new WeakMap,ge=new WeakMap,$=new WeakMap,W=new WeakMap;let Pe={get(G,_e,Y){if(G instanceof IDBTransaction){if("done"===_e)return fe.get(G);if("objectStoreNames"===_e)return G.objectStoreNames||ge.get(G);if("store"===_e)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return me(G[_e])},set:(G,_e,Y)=>(G[_e]=Y,!0),has:(G,_e)=>G instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in G};function ye(G){return"function"==typeof G?function ut(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(..._e){return G.apply(ot(this),_e),me(ue.get(this))}:function(..._e){return me(G.apply(ot(this),_e))}:function(_e,...Y){const ne=G.call(ot(this),_e,...Y);return ge.set(ne,_e.sort?_e.sort():[_e]),me(ne)}}(G):(G instanceof IDBTransaction&&function Ge(G){if(fe.has(G))return;const _e=new Promise((Y,ne)=>{const oe=()=>{G.removeEventListener("complete",ie),G.removeEventListener("error",Ue),G.removeEventListener("abort",Ue)},ie=()=>{Y(),oe()},Ue=()=>{ne(G.error||new DOMException("AbortError","AbortError")),oe()};G.addEventListener("complete",ie),G.addEventListener("error",Ue),G.addEventListener("abort",Ue)});fe.set(G,_e)}(G),((G,_e)=>_e.some(Y=>G instanceof Y))(G,function se(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Pe):G)}function me(G){if(G instanceof IDBRequest)return function J(G){const _e=new Promise((Y,ne)=>{const oe=()=>{G.removeEventListener("success",ie),G.removeEventListener("error",Ue)},ie=()=>{Y(me(G.result)),oe()},Ue=()=>{ne(G.error),oe()};G.addEventListener("success",ie),G.addEventListener("error",Ue)});return _e.then(Y=>{Y instanceof IDBCursor&&ue.set(Y,G)}).catch(()=>{}),W.set(_e,G),_e}(G);if($.has(G))return $.get(G);const _e=ye(G);return _e!==G&&($.set(G,_e),W.set(_e,G)),_e}const ot=G=>W.get(G);function dt(G,_e,{blocked:Y,upgrade:ne,blocking:oe,terminated:ie}={}){const Ue=indexedDB.open(G,_e),Ve=me(Ue);return ne&&Ue.addEventListener("upgradeneeded",vt=>{ne(me(Ue.result),vt.oldVersion,vt.newVersion,me(Ue.transaction))}),Y&&Ue.addEventListener("blocked",()=>Y()),Ve.then(vt=>{ie&&vt.addEventListener("close",()=>ie()),oe&&vt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ve}function Re(G,{blocked:_e}={}){const Y=indexedDB.deleteDatabase(G);return _e&&Y.addEventListener("blocked",()=>_e()),me(Y).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],ze=new Map;function Ke(G,_e){if(!(G instanceof IDBDatabase)||_e in G||"string"!=typeof _e)return;if(ze.get(_e))return ze.get(_e);const Y=_e.replace(/FromIndex$/,""),ne=_e!==Y,oe=Ie.includes(Y);if(!(Y in(ne?IDBIndex:IDBObjectStore).prototype)||!oe&&!we.includes(Y))return;const ie=function(){var Ue=(0,d.Z)(function*(Ve,...vt){const cn=this.transaction(Ve,oe?"readwrite":"readonly");let zt=cn.store;return ne&&(zt=zt.index(vt.shift())),(yield Promise.all([zt[Y](...vt),oe&&cn.done]))[0]});return function(vt){return Ue.apply(this,arguments)}}();return ze.set(_e,ie),ie}!function Ce(G){Pe=G(Pe)}(G=>({...G,get:(_e,Y,ne)=>Ke(_e,Y)||G.get(_e,Y,ne),has:(_e,Y)=>!!Ke(_e,Y)||G.has(_e,Y)}))},5861:(gt,Ae,V)=>{function d(L,ae,se,he,ue,fe,ge){try{var $=L[fe](ge),W=$.value}catch(J){return void se(J)}$.done?ae(W):Promise.resolve(W).then(he,ue)}function te(L){return function(){var ae=this,se=arguments;return new Promise(function(he,ue){var fe=L.apply(ae,se);function ge(W){d(fe,he,ue,ge,$,"next",W)}function $(W){d(fe,he,ue,ge,$,"throw",W)}ge(void 0)})}}V.d(Ae,{Z:()=>te})}},gt=>{gt(gt.s=7555)}]);